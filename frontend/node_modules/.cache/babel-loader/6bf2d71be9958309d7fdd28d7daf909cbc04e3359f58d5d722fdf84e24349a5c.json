{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"result-container\"\n};\nconst _hoisted_2 = {\n  class: \"analysis-progress\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"manual-refresh-container\"\n};\nconst _hoisted_4 = {\n  class: \"bazi-chart\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"four-pillars\"\n};\nconst _hoisted_6 = {\n  class: \"pillar\"\n};\nconst _hoisted_7 = {\n  class: \"stem\"\n};\nconst _hoisted_8 = {\n  class: \"branch\"\n};\nconst _hoisted_9 = {\n  class: \"nayin\"\n};\nconst _hoisted_10 = {\n  class: \"shishen\"\n};\nconst _hoisted_11 = {\n  class: \"wangshuai\"\n};\nconst _hoisted_12 = {\n  class: \"pillar\"\n};\nconst _hoisted_13 = {\n  class: \"stem\"\n};\nconst _hoisted_14 = {\n  class: \"branch\"\n};\nconst _hoisted_15 = {\n  class: \"nayin\"\n};\nconst _hoisted_16 = {\n  class: \"shishen\"\n};\nconst _hoisted_17 = {\n  class: \"wangshuai\"\n};\nconst _hoisted_18 = {\n  class: \"pillar\"\n};\nconst _hoisted_19 = {\n  class: \"stem\"\n};\nconst _hoisted_20 = {\n  class: \"branch\"\n};\nconst _hoisted_21 = {\n  class: \"nayin\"\n};\nconst _hoisted_22 = {\n  class: \"shishen\"\n};\nconst _hoisted_23 = {\n  class: \"wangshuai\"\n};\nconst _hoisted_24 = {\n  class: \"pillar\"\n};\nconst _hoisted_25 = {\n  class: \"stem\"\n};\nconst _hoisted_26 = {\n  class: \"branch\"\n};\nconst _hoisted_27 = {\n  class: \"nayin\"\n};\nconst _hoisted_28 = {\n  class: \"shishen\"\n};\nconst _hoisted_29 = {\n  class: \"wangshuai\"\n};\nconst _hoisted_30 = {\n  key: 1,\n  class: \"error-message\"\n};\nconst _hoisted_31 = {\n  key: 2,\n  class: \"five-elements\"\n};\nconst _hoisted_32 = {\n  class: \"element-name\"\n};\nconst _hoisted_33 = {\n  class: \"element-value\"\n};\nconst _hoisted_34 = {\n  key: 3,\n  class: \"five-elements\"\n};\nconst _hoisted_35 = {\n  class: \"element-name\"\n};\nconst _hoisted_36 = {\n  key: 4,\n  class: \"shen-sha-info\"\n};\nconst _hoisted_37 = {\n  class: \"shen-sha-content\"\n};\nconst _hoisted_38 = {\n  class: \"shen-sha-item\"\n};\nconst _hoisted_39 = {\n  class: \"value\"\n};\nconst _hoisted_40 = {\n  class: \"shen-sha-item\"\n};\nconst _hoisted_41 = {\n  class: \"value\"\n};\nconst _hoisted_42 = {\n  class: \"shen-sha-item\"\n};\nconst _hoisted_43 = {\n  class: \"value\"\n};\nconst _hoisted_44 = {\n  class: \"shen-sha-item\"\n};\nconst _hoisted_45 = {\n  class: \"value\"\n};\nconst _hoisted_46 = {\n  class: \"shen-sha-item\"\n};\nconst _hoisted_47 = {\n  class: \"value\"\n};\nconst _hoisted_48 = {\n  key: 0,\n  class: \"ben-ming-sha\"\n};\nconst _hoisted_49 = {\n  class: \"ben-ming-list\"\n};\nconst _hoisted_50 = {\n  key: 5,\n  class: \"shen-sha-info\"\n};\nconst _hoisted_51 = {\n  key: 6,\n  class: \"da-yun-info\"\n};\nconst _hoisted_52 = {\n  class: \"qi-yun-info\"\n};\nconst _hoisted_53 = {\n  class: \"da-yun-table\"\n};\nconst _hoisted_54 = {\n  class: \"custom-table\"\n};\nconst _hoisted_55 = {\n  key: 7,\n  class: \"da-yun-info\"\n};\nconst _hoisted_56 = {\n  key: 8,\n  class: \"liu-nian-info\"\n};\nconst _hoisted_57 = {\n  class: \"custom-table\"\n};\nconst _hoisted_58 = {\n  key: 9,\n  class: \"liu-nian-info\"\n};\nconst _hoisted_59 = {\n  class: \"ai-analysis\"\n};\nconst _hoisted_60 = {\n  key: 0,\n  class: \"age-notice\"\n};\nconst _hoisted_61 = {\n  key: 1,\n  class: \"age-notice\"\n};\nconst _hoisted_62 = {\n  key: 2,\n  class: \"age-notice\"\n};\nconst _hoisted_63 = {\n  class: \"analysis-progress\"\n};\nconst _hoisted_64 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_65 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_66 = [\"innerHTML\"];\nconst _hoisted_67 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_68 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_69 = [\"innerHTML\"];\nconst _hoisted_70 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_71 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_72 = [\"innerHTML\"];\nconst _hoisted_73 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_74 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_75 = [\"innerHTML\"];\nconst _hoisted_76 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_77 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_78 = {\n  key: 1\n};\nconst _hoisted_79 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_80 = [\"innerHTML\"];\nconst _hoisted_81 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_82 = [\"innerHTML\"];\nconst _hoisted_83 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_84 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_85 = {\n  key: 1\n};\nconst _hoisted_86 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_87 = [\"innerHTML\"];\nconst _hoisted_88 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_89 = [\"innerHTML\"];\nconst _hoisted_90 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_91 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_92 = {\n  key: 1\n};\nconst _hoisted_93 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_94 = [\"innerHTML\"];\nconst _hoisted_95 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_96 = [\"innerHTML\"];\nconst _hoisted_97 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_98 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_99 = {\n  key: 1\n};\nconst _hoisted_100 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_101 = [\"innerHTML\"];\nconst _hoisted_102 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_103 = [\"innerHTML\"];\nconst _hoisted_104 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_105 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_106 = {\n  key: 1\n};\nconst _hoisted_107 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_108 = [\"innerHTML\"];\nconst _hoisted_109 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_110 = [\"innerHTML\"];\nconst _hoisted_111 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_112 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_113 = {\n  key: 1\n};\nconst _hoisted_114 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_115 = [\"innerHTML\"];\nconst _hoisted_116 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_117 = [\"innerHTML\"];\nconst _hoisted_118 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_119 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_120 = {\n  key: 1\n};\nconst _hoisted_121 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_122 = [\"innerHTML\"];\nconst _hoisted_123 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_124 = [\"innerHTML\"];\nconst _hoisted_125 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_126 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_127 = {\n  key: 1\n};\nconst _hoisted_128 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_129 = [\"innerHTML\"];\nconst _hoisted_130 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_131 = [\"innerHTML\"];\nconst _hoisted_132 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_133 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_134 = {\n  key: 1\n};\nconst _hoisted_135 = {\n  key: 0,\n  class: \"enhanced-analysis\"\n};\nconst _hoisted_136 = [\"innerHTML\"];\nconst _hoisted_137 = {\n  class: \"analysis-source\"\n};\nconst _hoisted_138 = [\"innerHTML\"];\nconst _hoisted_139 = {\n  class: \"action-buttons\"\n};\nconst _hoisted_140 = {\n  key: 3,\n  class: \"followup-section\"\n};\nconst _hoisted_141 = {\n  class: \"followup-options\"\n};\nconst _hoisted_142 = [\"onClick\"];\nconst _hoisted_143 = {\n  class: \"option-content\"\n};\nconst _hoisted_144 = {\n  class: \"option-name\"\n};\nconst _hoisted_145 = {\n  key: 0,\n  class: \"option-status\"\n};\nconst _hoisted_146 = {\n  key: 1,\n  class: \"option-status\"\n};\nconst _hoisted_147 = {\n  key: 0,\n  class: \"followup-result\"\n};\nconst _hoisted_148 = {\n  key: 0,\n  class: \"loading-content\"\n};\nconst _hoisted_149 = {\n  key: 1,\n  class: \"loading-content\"\n};\nconst _hoisted_150 = [\"innerHTML\"];\nconst _hoisted_151 = {\n  class: \"followup-dialog-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  const _component_van_progress = _resolveComponent(\"van-progress\");\n  const _component_van_notice_bar = _resolveComponent(\"van-notice-bar\");\n  const _component_van_empty = _resolveComponent(\"van-empty\");\n  const _component_van_button = _resolveComponent(\"van-button\");\n  const _component_van_cell = _resolveComponent(\"van-cell\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  const _component_van_tab = _resolveComponent(\"van-tab\");\n  const _component_van_loading = _resolveComponent(\"van-loading\");\n  const _component_van_tag = _resolveComponent(\"van-tag\");\n  const _component_van_tabs = _resolveComponent(\"van-tabs\");\n  const _component_van_dialog = _resolveComponent(\"van-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_nav_bar, {\n    title: \"八字分析结果\",\n    \"left-text\": \"返回\",\n    \"left-arrow\": \"\",\n    onClickLeft: $setup.onClickLeft\n  }), _cache[68] || (_cache[68] = _createElementVNode(\"div\", {\n    class: \"result-header\"\n  }, [_createElementVNode(\"h2\", null, \"您的八字命盘分析\"), _createElementVNode(\"p\", null, \"基于您的出生信息，AI为您提供的个性化人生指导\")], -1 /* HOISTED */)), _createCommentVNode(\" 添加全局分析状态提示 \"), $setup.analysisStatus === 'pending' ? (_openBlock(), _createBlock(_component_van_notice_bar, {\n    key: 0,\n    color: \"#1989fa\",\n    background: \"#ecf9ff\",\n    \"left-icon\": \"info-o\",\n    scrollable: false,\n    class: \"analysis-progress-notice\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"p\", null, \"AI正在生成八字分析结果，这可能需要30-60秒\", -1 /* HOISTED */)), _createVNode(_component_van_progress, {\n      percentage: $setup.analysisProgress,\n      \"show-pivot\": false,\n      color: \"#1989fa\"\n    }, null, 8 /* PROPS */, [\"percentage\"])])]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 添加手动刷新按钮 \"), $setup.showManualRefresh ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_van_empty, {\n    description: \"获取分析结果失败\"\n  }), _createVNode(_component_van_button, {\n    type: \"primary\",\n    size: \"normal\",\n    onClick: $setup.manualRefresh\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"手动刷新\")])),\n    _: 1 /* STABLE */,\n    __: [4]\n  }), _cache[5] || (_cache[5] = _createElementVNode(\"p\", {\n    class: \"refresh-tip\"\n  }, \"如果多次刷新仍然失败，请联系客服\", -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true), !$setup.showManualRefresh ? (_openBlock(), _createBlock(_component_van_tabs, {\n    key: 2,\n    modelValue: $setup.activeTab,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.activeTab = $event),\n    sticky: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_tab, {\n      title: \"命盘信息\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_cache[20] || (_cache[20] = _createElementVNode(\"h3\", null, \"八字命盘\", -1 /* HOISTED */)), $setup.baziChart && $setup.baziChart.yearPillar && $setup.baziChart.monthPillar && $setup.baziChart.dayPillar && $setup.baziChart.hourPillar ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createCommentVNode(\" 年柱 \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.baziChart.yearPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, _toDisplayString($setup.baziChart.yearPillar.earthlyBranch), 1 /* TEXT */), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n        class: \"label\"\n      }, \"年柱\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_9, _toDisplayString($setup.baziChart.yearPillar.naYin), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_10, _toDisplayString($setup.baziChart.yearPillar.shiShen), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.baziChart.yearPillar.wangShuai), 1 /* TEXT */)]), _createCommentVNode(\" 月柱 \"), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, _toDisplayString($setup.baziChart.monthPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_14, _toDisplayString($setup.baziChart.monthPillar.earthlyBranch), 1 /* TEXT */), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n        class: \"label\"\n      }, \"月柱\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_15, _toDisplayString($setup.baziChart.monthPillar.naYin), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_16, _toDisplayString($setup.baziChart.monthPillar.shiShen), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_17, _toDisplayString($setup.baziChart.monthPillar.wangShuai), 1 /* TEXT */)]), _createCommentVNode(\" 日柱 \"), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, _toDisplayString($setup.baziChart.dayPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_20, _toDisplayString($setup.baziChart.dayPillar.earthlyBranch), 1 /* TEXT */), _cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n        class: \"label\"\n      }, \"日柱\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_21, _toDisplayString($setup.baziChart.dayPillar.naYin), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_22, _toDisplayString($setup.baziChart.dayPillar.shiShen), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_23, _toDisplayString($setup.baziChart.dayPillar.wangShuai), 1 /* TEXT */)]), _createCommentVNode(\" 时柱 \"), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"div\", _hoisted_25, _toDisplayString($setup.baziChart.hourPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_26, _toDisplayString($setup.baziChart.hourPillar.earthlyBranch), 1 /* TEXT */), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n        class: \"label\"\n      }, \"时柱\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_27, _toDisplayString($setup.baziChart.hourPillar.naYin), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_28, _toDisplayString($setup.baziChart.hourPillar.shiShen), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_29, _toDisplayString($setup.baziChart.hourPillar.wangShuai), 1 /* TEXT */)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createVNode(_component_van_empty, {\n        description: \"八字数据加载失败，请重试\"\n      }), _createVNode(_component_van_button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: $setup.reloadBaziData\n      }, {\n        default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"重新加载\")])),\n        _: 1 /* STABLE */,\n        __: [10]\n      })])), _cache[21] || (_cache[21] = _createElementVNode(\"h3\", null, \"五行分布\", -1 /* HOISTED */)), $setup.baziChart && $setup.baziChart.fiveElements ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziChart.fiveElements, (value, element) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"element\",\n          key: element\n        }, [_createElementVNode(\"div\", _hoisted_32, _toDisplayString($setup.getElementName(element)), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_33, _toDisplayString(value), 1 /* TEXT */)]);\n      }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(['wood', 'fire', 'earth', 'metal', 'water'], element => {\n        return _createElementVNode(\"div\", {\n          class: \"element\",\n          key: element\n        }, [_createElementVNode(\"div\", _hoisted_35, _toDisplayString($setup.getElementName(element)), 1 /* TEXT */), _cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n          class: \"element-value\"\n        }, \"--\", -1 /* HOISTED */))]);\n      }), 64 /* STABLE_FRAGMENT */))])), _createCommentVNode(\" 添加神煞显示 \"), _cache[22] || (_cache[22] = _createElementVNode(\"h3\", null, \"神煞信息\", -1 /* HOISTED */)), $setup.baziChart && $setup.baziChart.shenSha ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [_createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"div\", _hoisted_38, [_cache[12] || (_cache[12] = _createElementVNode(\"span\", {\n        class: \"label\"\n      }, \"日冲\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_39, _toDisplayString($setup.baziChart.shenSha.dayChong), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_40, [_cache[13] || (_cache[13] = _createElementVNode(\"span\", {\n        class: \"label\"\n      }, \"值神\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_41, _toDisplayString($setup.baziChart.shenSha.zhiShen), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_42, [_cache[14] || (_cache[14] = _createElementVNode(\"span\", {\n        class: \"label\"\n      }, \"喜神\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_43, _toDisplayString($setup.baziChart.shenSha.xiShen), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_44, [_cache[15] || (_cache[15] = _createElementVNode(\"span\", {\n        class: \"label\"\n      }, \"福神\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_45, _toDisplayString($setup.baziChart.shenSha.fuShen), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_46, [_cache[16] || (_cache[16] = _createElementVNode(\"span\", {\n        class: \"label\"\n      }, \"财神\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_47, _toDisplayString($setup.baziChart.shenSha.caiShen), 1 /* TEXT */)])]), _createCommentVNode(\" 本命神煞 \"), $setup.baziChart.shenSha.benMing.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_48, [_cache[17] || (_cache[17] = _createElementVNode(\"h4\", null, \"本命神煞\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_49, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziChart.shenSha.benMing, (sha, index) => {\n        return _openBlock(), _createElementBlock(\"span\", {\n          key: index,\n          class: \"ben-ming-item\"\n        }, _toDisplayString(sha), 1 /* TEXT */);\n      }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"神煞信息\",\n          value: \"暂无数据\"\n        })]),\n        _: 1 /* STABLE */\n      })])), _createCommentVNode(\" 添加大运显示 \"), _cache[23] || (_cache[23] = _createElementVNode(\"h3\", null, \"大运信息\", -1 /* HOISTED */)), $setup.baziChart && $setup.baziChart.daYun ? (_openBlock(), _createElementBlock(\"div\", _hoisted_51, [_createElementVNode(\"div\", _hoisted_52, [_createElementVNode(\"p\", null, \"起运年龄: \" + _toDisplayString($setup.baziChart.daYun.startAge) + \"岁\", 1 /* TEXT */), _createElementVNode(\"p\", null, \"起运年份: \" + _toDisplayString($setup.baziChart.daYun.startYear) + \"年\", 1 /* TEXT */), _createElementVNode(\"p\", null, \"大运顺序: \" + _toDisplayString($setup.baziChart.daYun.isForward ? '顺行' : '逆行'), 1 /* TEXT */)]), _createCommentVNode(\" 大运列表 \"), _createElementVNode(\"div\", _hoisted_53, [_createElementVNode(\"table\", _hoisted_54, [_cache[18] || (_cache[18] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"年龄\"), _createElementVNode(\"th\", null, \"年份\"), _createElementVNode(\"th\", null, \"天干\"), _createElementVNode(\"th\", null, \"地支\"), _createElementVNode(\"th\", null, \"纳音\"), _createElementVNode(\"th\", null, \"吉凶\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziChart.daYun.daYunList, (yun, index) => {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          key: index\n        }, [_createElementVNode(\"td\", null, _toDisplayString(yun.startAge) + \"-\" + _toDisplayString(yun.endAge), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(yun.startYear) + \"-\" + _toDisplayString(yun.endYear), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(yun.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(yun.earthlyBranch), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(yun.naYin), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(yun.jiXiong), 1 /* TEXT */)]);\n      }), 128 /* KEYED_FRAGMENT */))])])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_55, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"大运信息\",\n          value: \"暂无数据\"\n        })]),\n        _: 1 /* STABLE */\n      })])), _cache[24] || (_cache[24] = _createElementVNode(\"h3\", null, \"流年信息\", -1 /* HOISTED */)), $setup.baziChart && $setup.baziChart.flowingYears && $setup.baziChart.flowingYears.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, [_createElementVNode(\"table\", _hoisted_57, [_cache[19] || (_cache[19] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"年份\"), _createElementVNode(\"th\", null, \"年龄\"), _createElementVNode(\"th\", null, \"天干\"), _createElementVNode(\"th\", null, \"地支\"), _createElementVNode(\"th\", null, \"五行\"), _createElementVNode(\"th\", null, \"神煞\"), _createElementVNode(\"th\", null, \"吉凶\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziChart.flowingYears, (year, index) => {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          key: index\n        }, [_createElementVNode(\"td\", null, _toDisplayString(year.year), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(year.age), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(year.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(year.earthlyBranch), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($setup.getElementName(year.ganElement)) + \"/\" + _toDisplayString($setup.getElementName(year.zhiElement)), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(year.shenSha && Array.isArray(year.shenSha) ? year.shenSha.join(', ') : '无'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(year.jiXiong || '未知'), 1 /* TEXT */)]);\n      }), 128 /* KEYED_FRAGMENT */))])])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_58, [_createVNode(_component_van_empty, {\n        description: \"流年数据暂无\"\n      })]))])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_van_tab, {\n      title: \"AI分析结果\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_59, [$setup.userAge !== null && $setup.userAge < 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_60, [_createVNode(_component_van_notice_bar, {\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\"\n      }, {\n        default: _withCtx(() => _cache[25] || (_cache[25] = [_createTextVNode(\" 此分析针对未来出生的宝宝，重点关注性格特点、天赋才能和健康发展趋势。 \")])),\n        _: 1 /* STABLE */,\n        __: [25]\n      })])) : $setup.userAge !== null && $setup.userAge < 6 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_61, [_createVNode(_component_van_notice_bar, {\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 此分析针对婴幼儿(\" + _toDisplayString($setup.userAge) + \"岁)，重点关注性格特点、天赋才能和健康发展趋势。 \", 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })])) : $setup.userAge !== null && $setup.userAge < 18 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_62, [_createVNode(_component_van_notice_bar, {\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 此分析针对未成年人(\" + _toDisplayString($setup.userAge) + \"岁)，重点关注性格特点、学业发展和健康状况。 \", 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 添加全局分析状态提示 \"), $setup.analysisStatus === 'pending' ? (_openBlock(), _createBlock(_component_van_notice_bar, {\n        key: 3,\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\",\n        scrollable: false,\n        class: \"analysis-progress-notice\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_63, [_cache[26] || (_cache[26] = _createElementVNode(\"p\", null, \"AI正在生成八字分析结果，这可能需要30-60秒\", -1 /* HOISTED */)), _createVNode(_component_van_progress, {\n          percentage: $setup.analysisProgress,\n          \"show-pivot\": false,\n          color: \"#1989fa\"\n        }, null, 8 /* PROPS */, [\"percentage\"])])]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 核心分析 \"), _createElementVNode(\"div\", _hoisted_64, [_cache[28] || (_cache[28] = _createElementVNode(\"h3\", null, \"八字命局核心分析\", -1 /* HOISTED */)), !$setup.aiAnalysis.coreAnalysis || $setup.aiAnalysis.coreAnalysis === '暂无' || $setup.aiAnalysis.coreAnalysis === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_65, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[27] || (_cache[27] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [27]\n      })])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.coreAnalysis),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_66))]), _createCommentVNode(\" 五行旺衰与用神 \"), _createElementVNode(\"div\", _hoisted_67, [_cache[30] || (_cache[30] = _createElementVNode(\"h3\", null, \"五行旺衰与用神\", -1 /* HOISTED */)), !$setup.aiAnalysis.fiveElements || $setup.aiAnalysis.fiveElements === '暂无' || $setup.aiAnalysis.fiveElements === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_68, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[29] || (_cache[29] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [29]\n      })])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.fiveElements),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_69))]), _createCommentVNode(\" 神煞解析 \"), _createElementVNode(\"div\", _hoisted_70, [_cache[32] || (_cache[32] = _createElementVNode(\"h3\", null, \"神煞解析\", -1 /* HOISTED */)), !$setup.aiAnalysis.shenShaAnalysis || $setup.aiAnalysis.shenShaAnalysis === '暂无' || $setup.aiAnalysis.shenShaAnalysis === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_71, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[31] || (_cache[31] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [31]\n      })])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.shenShaAnalysis),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_72))]), _createCommentVNode(\" 大运与流年关键节点 \"), _createElementVNode(\"div\", _hoisted_73, [_cache[34] || (_cache[34] = _createElementVNode(\"h3\", null, \"大运与流年关键节点\", -1 /* HOISTED */)), !$setup.aiAnalysis.keyPoints || $setup.aiAnalysis.keyPoints === '暂无' || $setup.aiAnalysis.keyPoints === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_74, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[33] || (_cache[33] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [33]\n      })])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.keyPoints),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_75))]), _createCommentVNode(\" 婚姻感情 \"), _createElementVNode(\"div\", _hoisted_76, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '婚姻感情' : '未来感情发展'), 1 /* TEXT */), !$setup.aiAnalysis.relationship || $setup.aiAnalysis.relationship === '暂无' || $setup.aiAnalysis.relationship === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_77, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[35] || (_cache[35] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [35]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_78, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.relationship || $setup.followupAnalysis.marriage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_79, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.relationship || $setup.followupAnalysis.marriage),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_80), _createElementVNode(\"div\", _hoisted_81, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[36] || (_cache[36] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [36]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.relationship),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_82))]))]), _createCommentVNode(\" 事业财运 \"), _createElementVNode(\"div\", _hoisted_83, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '事业财运' : '未来事业财运'), 1 /* TEXT */), !$setup.aiAnalysis.career || $setup.aiAnalysis.career === '暂无' || $setup.aiAnalysis.career === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_84, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[37] || (_cache[37] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [37]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_85, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.career || $setup.followupAnalysis.work || $setup.followupAnalysis.money || $setup.followupAnalysis.wealth ? (_openBlock(), _createElementBlock(\"div\", _hoisted_86, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.career || $setup.followupAnalysis.work || $setup.followupAnalysis.money || $setup.followupAnalysis.wealth),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_87), _createElementVNode(\"div\", _hoisted_88, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[38] || (_cache[38] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [38]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.career),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_89))]))]), _createCommentVNode(\" 子女情况 \"), _createElementVNode(\"div\", _hoisted_90, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '子女情况' : '未来子女缘分'), 1 /* TEXT */), !$setup.aiAnalysis.children || $setup.aiAnalysis.children === '暂无' || $setup.aiAnalysis.children === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_91, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[39] || (_cache[39] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [39]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_92, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.children || $setup.followupAnalysis.family ? (_openBlock(), _createElementBlock(\"div\", _hoisted_93, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.children || $setup.followupAnalysis.family),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_94), _createElementVNode(\"div\", _hoisted_95, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[40] || (_cache[40] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [40]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.children),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_96))]))]), _createCommentVNode(\" 父母情况 \"), _createElementVNode(\"div\", _hoisted_97, [_cache[43] || (_cache[43] = _createElementVNode(\"h3\", null, \"父母情况\", -1 /* HOISTED */)), !$setup.aiAnalysis.parents || $setup.aiAnalysis.parents === '暂无' || $setup.aiAnalysis.parents === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_98, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[41] || (_cache[41] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [41]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_99, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.parents ? (_openBlock(), _createElementBlock(\"div\", _hoisted_100, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.parents),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_101), _createElementVNode(\"div\", _hoisted_102, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[42] || (_cache[42] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [42]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.parents),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_103))]))]), _createCommentVNode(\" 身体健康 \"), _createElementVNode(\"div\", _hoisted_104, [_cache[46] || (_cache[46] = _createElementVNode(\"h3\", null, \"身体健康\", -1 /* HOISTED */)), !$setup.aiAnalysis.health || $setup.aiAnalysis.health === '暂无' || $setup.aiAnalysis.health === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_105, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[44] || (_cache[44] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [44]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_106, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.health ? (_openBlock(), _createElementBlock(\"div\", _hoisted_107, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.health),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_108), _createElementVNode(\"div\", _hoisted_109, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[45] || (_cache[45] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [45]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.health),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_110))]))]), _createCommentVNode(\" 学业 \"), _createElementVNode(\"div\", _hoisted_111, [_cache[49] || (_cache[49] = _createElementVNode(\"h3\", null, \"学业\", -1 /* HOISTED */)), !$setup.aiAnalysis.education || $setup.aiAnalysis.education === '暂无' || $setup.aiAnalysis.education === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_112, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[47] || (_cache[47] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [47]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_113, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.education || $setup.followupAnalysis.study ? (_openBlock(), _createElementBlock(\"div\", _hoisted_114, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.education || $setup.followupAnalysis.study),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_115), _createElementVNode(\"div\", _hoisted_116, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[48] || (_cache[48] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [48]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.education),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_117))]))]), _createCommentVNode(\" 人际关系 \"), _createElementVNode(\"div\", _hoisted_118, [_cache[52] || (_cache[52] = _createElementVNode(\"h3\", null, \"人际关系\", -1 /* HOISTED */)), !$setup.aiAnalysis.social || $setup.aiAnalysis.social === '暂无' || $setup.aiAnalysis.social === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_119, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[50] || (_cache[50] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [50]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_120, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.social || $setup.followupAnalysis.relationship || $setup.followupAnalysis.friends ? (_openBlock(), _createElementBlock(\"div\", _hoisted_121, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.social || $setup.followupAnalysis.relationship || $setup.followupAnalysis.friends),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_122), _createElementVNode(\"div\", _hoisted_123, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[51] || (_cache[51] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [51]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.social),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_124))]))]), _createCommentVNode(\" 近五年运势 \"), _createElementVNode(\"div\", _hoisted_125, [_cache[55] || (_cache[55] = _createElementVNode(\"h3\", null, \"近五年运势\", -1 /* HOISTED */)), !$setup.aiAnalysis.future || $setup.aiAnalysis.future === '暂无' || $setup.aiAnalysis.future === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_126, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[53] || (_cache[53] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [53]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_127, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.future || $setup.followupAnalysis.fiveYears ? (_openBlock(), _createElementBlock(\"div\", _hoisted_128, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.future || $setup.followupAnalysis.fiveYears),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_129), _createElementVNode(\"div\", _hoisted_130, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[54] || (_cache[54] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [54]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.future),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_131))]))]), _createCommentVNode(\" 人生规划建议 \"), _createElementVNode(\"div\", _hoisted_132, [_cache[58] || (_cache[58] = _createElementVNode(\"h3\", null, \"人生规划建议\", -1 /* HOISTED */)), !$setup.aiAnalysis.lifePlan || $setup.aiAnalysis.lifePlan === '暂无' || $setup.aiAnalysis.lifePlan === '分析生成中...' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_133, [_createVNode(_component_van_loading, {\n        size: \"24px\",\n        vertical: \"\"\n      }, {\n        default: _withCtx(() => _cache[56] || (_cache[56] = [_createTextVNode(\"分析生成中...\")])),\n        _: 1 /* STABLE */,\n        __: [56]\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_134, [_createCommentVNode(\" 如果有追问分析结果，优先显示追问分析 \"), $setup.followupAnalysis.lifePlan ? (_openBlock(), _createElementBlock(\"div\", _hoisted_135, [_createElementVNode(\"div\", {\n        innerHTML: $setup.renderMarkdown($setup.followupAnalysis.lifePlan),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_136), _createElementVNode(\"div\", _hoisted_137, [_createVNode(_component_van_tag, {\n        type: \"primary\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(() => _cache[57] || (_cache[57] = [_createTextVNode(\"深度分析\")])),\n        _: 1 /* STABLE */,\n        __: [57]\n      })])])) : (_openBlock(), _createElementBlock(\"div\", {\n        key: 1,\n        innerHTML: $setup.renderMarkdown($setup.aiAnalysis.lifePlan),\n        class: \"markdown-content\"\n      }, null, 8 /* PROPS */, _hoisted_138))]))])])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_139, [_createVNode(_component_van_button, {\n    type: \"primary\",\n    block: \"\",\n    onClick: $setup.downloadPDF\n  }, {\n    default: _withCtx(() => _cache[59] || (_cache[59] = [_createTextVNode(\" 下载PDF报告 \")])),\n    _: 1 /* STABLE */,\n    __: [59]\n  }), _createVNode(_component_van_button, {\n    plain: \"\",\n    type: \"primary\",\n    block: \"\",\n    style: {\n      \"margin-top\": \"10px\"\n    },\n    onClick: $setup.shareResult\n  }, {\n    default: _withCtx(() => _cache[60] || (_cache[60] = [_createTextVNode(\" 分享结果 \")])),\n    _: 1 /* STABLE */,\n    __: [60]\n  }), _createCommentVNode(\" 本地生成PDF按钮 \"), _createVNode(_component_van_button, {\n    plain: \"\",\n    type: \"info\",\n    block: \"\",\n    style: {\n      \"margin-top\": \"10px\"\n    },\n    onClick: $setup.handleLocalPDFGeneration\n  }, {\n    default: _withCtx(() => _cache[61] || (_cache[61] = [_createTextVNode(\" 本地生成PDF \")])),\n    _: 1 /* STABLE */,\n    __: [61]\n  }), _createCommentVNode(\" 调试按钮 \"), _createVNode(_component_van_button, {\n    plain: \"\",\n    type: \"warning\",\n    block: \"\",\n    style: {\n      \"margin-top\": \"10px\"\n    },\n    onClick: $setup.reloadBaziData\n  }, {\n    default: _withCtx(() => _cache[62] || (_cache[62] = [_createTextVNode(\" 重新加载分析数据 \")])),\n    _: 1 /* STABLE */,\n    __: [62]\n  })]), _createCommentVNode(\" 添加追问部分 \"), $setup.baziChart && !$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_140, [_cache[65] || (_cache[65] = _createElementVNode(\"h2\", {\n    class: \"section-title\"\n  }, \"深度分析\", -1 /* HOISTED */)), _cache[66] || (_cache[66] = _createElementVNode(\"p\", {\n    class: \"section-desc\"\n  }, \"选择您感兴趣的领域，进行深度分析\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_141, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.followupOptions, option => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: option.id,\n      class: _normalizeClass([\"followup-option\", {\n        'paid': option.paid\n      }]),\n      onClick: $event => $setup.selectFollowupOption(option)\n    }, [_createElementVNode(\"div\", _hoisted_143, [_createElementVNode(\"span\", _hoisted_144, _toDisplayString(option.name), 1 /* TEXT */), option.paid ? (_openBlock(), _createElementBlock(\"span\", _hoisted_145, \"已解锁\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_146, \"￥9.9\"))])], 10 /* CLASS, PROPS */, _hoisted_142);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 已支付的追问分析结果展示 \"), $setup.currentFollowup && $setup.currentFollowup.paid ? (_openBlock(), _createElementBlock(\"div\", _hoisted_147, [_createElementVNode(\"h3\", null, _toDisplayString($setup.currentFollowup.name) + \"分析\", 1 /* TEXT */), $setup.isLoadingFollowup ? (_openBlock(), _createElementBlock(\"div\", _hoisted_148, [_createVNode(_component_van_loading, {\n    size: \"24px\",\n    vertical: \"\"\n  }, {\n    default: _withCtx(() => _cache[63] || (_cache[63] = [_createTextVNode(\"分析加载中...\")])),\n    _: 1 /* STABLE */,\n    __: [63]\n  })])) : !$setup.followupAnalysis[$setup.currentFollowup.id] ? (_openBlock(), _createElementBlock(\"div\", _hoisted_149, [_createVNode(_component_van_empty, {\n    description: \"分析结果尚未生成，请稍后刷新页面\"\n  }), _createVNode(_component_van_button, {\n    type: \"primary\",\n    size: \"small\",\n    onClick: _cache[1] || (_cache[1] = $event => $setup.reloadFollowupAnalysis($setup.currentFollowup.id))\n  }, {\n    default: _withCtx(() => _cache[64] || (_cache[64] = [_createTextVNode(\" 刷新分析 \")])),\n    _: 1 /* STABLE */,\n    __: [64]\n  })])) : (_openBlock(), _createElementBlock(\"div\", {\n    key: 2,\n    class: \"analysis-content\",\n    innerHTML: $setup.renderMarkdown($setup.followupAnalysis[$setup.currentFollowup.id])\n  }, null, 8 /* PROPS */, _hoisted_150))])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 追问支付对话框 \"), _createVNode(_component_van_dialog, {\n    show: $setup.showFollowupDialog,\n    \"onUpdate:show\": _cache[2] || (_cache[2] = $event => $setup.showFollowupDialog = $event),\n    title: \"深度分析\",\n    \"confirm-button-text\": \"支付 ￥9.9\",\n    onConfirm: $setup.payForFollowup,\n    \"before-close\": () => !$setup.isLoadingFollowup\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_151, [_createElementVNode(\"p\", null, \"您选择了「\" + _toDisplayString($setup.currentFollowup?.name) + \"」深度分析\", 1 /* TEXT */), _cache[67] || (_cache[67] = _createElementVNode(\"p\", null, \"支付后，AI将根据您的八字和流年运势，为您提供专业的命理分析\", -1 /* HOISTED */))])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\", \"before-close\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","_createElementVNode","_createCommentVNode","analysisStatus","_createBlock","_component_van_notice_bar","color","background","scrollable","default","_withCtx","_hoisted_2","_component_van_progress","percentage","analysisProgress","_","showManualRefresh","_hoisted_3","_component_van_empty","description","_component_van_button","type","size","onClick","manualRefresh","_cache","_createTextVNode","__","_component_van_tabs","modelValue","activeTab","$event","sticky","_component_van_tab","_hoisted_4","baziChart","yearPillar","monthPillar","dayPillar","hourPillar","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","heavenlyStem","_hoisted_8","earthlyBranch","_hoisted_9","naYin","_hoisted_10","shiShen","_hoisted_11","wangShuai","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","reloadBaziData","fiveElements","_hoisted_31","_Fragment","_renderList","value","element","_hoisted_32","getElementName","_hoisted_33","_hoisted_34","_hoisted_35","shenSha","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","dayChong","_hoisted_40","_hoisted_41","zhiShen","_hoisted_42","_hoisted_43","xiShen","_hoisted_44","_hoisted_45","fuShen","_hoisted_46","_hoisted_47","caiShen","benMing","length","_hoisted_48","_hoisted_49","sha","index","_hoisted_50","_component_van_cell_group","inset","_component_van_cell","daYun","_hoisted_51","_hoisted_52","startAge","startYear","isForward","_hoisted_53","_hoisted_54","daYunList","yun","endAge","endYear","jiXiong","_hoisted_55","flowingYears","_hoisted_56","_hoisted_57","year","age","ganElement","zhiElement","Array","isArray","join","_hoisted_58","_hoisted_59","userAge","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","aiAnalysis","coreAnalysis","_hoisted_65","_component_van_loading","vertical","innerHTML","renderMarkdown","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","shenShaAnalysis","_hoisted_71","_hoisted_72","_hoisted_73","keyPoints","_hoisted_74","_hoisted_75","_hoisted_76","relationship","_hoisted_77","_hoisted_78","followupAnalysis","marriage","_hoisted_79","_hoisted_80","_hoisted_81","_component_van_tag","_hoisted_82","_hoisted_83","career","_hoisted_84","_hoisted_85","work","money","wealth","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","children","_hoisted_91","_hoisted_92","family","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","parents","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","health","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","education","_hoisted_112","_hoisted_113","study","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","social","_hoisted_119","_hoisted_120","friends","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","future","_hoisted_126","_hoisted_127","fiveYears","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","lifePlan","_hoisted_133","_hoisted_134","_hoisted_135","_hoisted_136","_hoisted_137","_hoisted_138","_hoisted_139","block","downloadPDF","plain","style","shareResult","handleLocalPDFGeneration","loading","_hoisted_140","_hoisted_141","followupOptions","option","id","_normalizeClass","paid","selectFollowupOption","_hoisted_143","_hoisted_144","name","_hoisted_145","_hoisted_146","_hoisted_142","currentFollowup","_hoisted_147","isLoadingFollowup","_hoisted_148","_hoisted_149","reloadFollowupAnalysis","_hoisted_150","_component_van_dialog","show","showFollowupDialog","onConfirm","payForFollowup","before-close","_hoisted_151"],"sources":["D:\\Python\\20250603开发八字命理AI指导功能页码\\开发八字命理AI指导功能页码\\frontend\\src\\Result.vue"],"sourcesContent":["<template>\r\n  <div class=\"result-container\">\r\n    <van-nav-bar\r\n      title=\"八字分析结果\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n    />\r\n    \r\n    <div class=\"result-header\">\r\n      <h2>您的八字命盘分析</h2>\r\n      <p>基于您的出生信息，AI为您提供的个性化人生指导</p>\r\n    </div>\r\n    \r\n    <!-- 添加全局分析状态提示 -->\r\n    <van-notice-bar\r\n      v-if=\"analysisStatus === 'pending'\"\r\n      color=\"#1989fa\"\r\n      background=\"#ecf9ff\"\r\n      left-icon=\"info-o\"\r\n      :scrollable=\"false\"\r\n      class=\"analysis-progress-notice\"\r\n    >\r\n      <div class=\"analysis-progress\">\r\n        <p>AI正在生成八字分析结果，这可能需要30-60秒</p>\r\n        <van-progress :percentage=\"analysisProgress\" :show-pivot=\"false\" color=\"#1989fa\" />\r\n      </div>\r\n    </van-notice-bar>\r\n    \r\n    <!-- 添加手动刷新按钮 -->\r\n    <div v-if=\"showManualRefresh\" class=\"manual-refresh-container\">\r\n      <van-empty description=\"获取分析结果失败\" />\r\n      <van-button type=\"primary\" size=\"normal\" @click=\"manualRefresh\">手动刷新</van-button>\r\n      <p class=\"refresh-tip\">如果多次刷新仍然失败，请联系客服</p>\r\n    </div>\r\n    \r\n    <van-tabs v-model=\"activeTab\" sticky v-if=\"!showManualRefresh\">\r\n      <van-tab title=\"命盘信息\">\r\n        <div class=\"bazi-chart\">\r\n          <h3>八字命盘</h3>\r\n          <div v-if=\"baziChart && baziChart.yearPillar && baziChart.monthPillar && baziChart.dayPillar && baziChart.hourPillar\" class=\"four-pillars\">\r\n            <!-- 年柱 -->\r\n            <div class=\"pillar\">\r\n              <div class=\"stem\">{{ baziChart.yearPillar.heavenlyStem }}</div>\r\n              <div class=\"branch\">{{ baziChart.yearPillar.earthlyBranch }}</div>\r\n              <div class=\"label\">年柱</div>\r\n              <div class=\"nayin\">{{ baziChart.yearPillar.naYin }}</div>\r\n              <div class=\"shishen\">{{ baziChart.yearPillar.shiShen }}</div>\r\n              <div class=\"wangshuai\">{{ baziChart.yearPillar.wangShuai }}</div>\r\n            </div>\r\n            \r\n            <!-- 月柱 -->\r\n            <div class=\"pillar\">\r\n              <div class=\"stem\">{{ baziChart.monthPillar.heavenlyStem }}</div>\r\n              <div class=\"branch\">{{ baziChart.monthPillar.earthlyBranch }}</div>\r\n              <div class=\"label\">月柱</div>\r\n              <div class=\"nayin\">{{ baziChart.monthPillar.naYin }}</div>\r\n              <div class=\"shishen\">{{ baziChart.monthPillar.shiShen }}</div>\r\n              <div class=\"wangshuai\">{{ baziChart.monthPillar.wangShuai }}</div>\r\n            </div>\r\n            \r\n            <!-- 日柱 -->\r\n            <div class=\"pillar\">\r\n              <div class=\"stem\">{{ baziChart.dayPillar.heavenlyStem }}</div>\r\n              <div class=\"branch\">{{ baziChart.dayPillar.earthlyBranch }}</div>\r\n              <div class=\"label\">日柱</div>\r\n              <div class=\"nayin\">{{ baziChart.dayPillar.naYin }}</div>\r\n              <div class=\"shishen\">{{ baziChart.dayPillar.shiShen }}</div>\r\n              <div class=\"wangshuai\">{{ baziChart.dayPillar.wangShuai }}</div>\r\n            </div>\r\n            \r\n            <!-- 时柱 -->\r\n            <div class=\"pillar\">\r\n              <div class=\"stem\">{{ baziChart.hourPillar.heavenlyStem }}</div>\r\n              <div class=\"branch\">{{ baziChart.hourPillar.earthlyBranch }}</div>\r\n              <div class=\"label\">时柱</div>\r\n              <div class=\"nayin\">{{ baziChart.hourPillar.naYin }}</div>\r\n              <div class=\"shishen\">{{ baziChart.hourPillar.shiShen }}</div>\r\n              <div class=\"wangshuai\">{{ baziChart.hourPillar.wangShuai }}</div>\r\n            </div>\r\n          </div>\r\n          <div v-else class=\"error-message\">\r\n            <van-empty description=\"八字数据加载失败，请重试\" />\r\n            <van-button type=\"primary\" size=\"small\" @click=\"reloadBaziData\">重新加载</van-button>\r\n          </div>\r\n          \r\n          <h3>五行分布</h3>\r\n          <div class=\"five-elements\" v-if=\"baziChart && baziChart.fiveElements\">\r\n            <div class=\"element\" v-for=\"(value, element) in baziChart.fiveElements\" :key=\"element\">\r\n              <div class=\"element-name\">{{ getElementName(element) }}</div>\r\n              <div class=\"element-value\">{{ value }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"five-elements\" v-else>\r\n            <div class=\"element\" v-for=\"element in ['wood', 'fire', 'earth', 'metal', 'water']\" :key=\"element\">\r\n              <div class=\"element-name\">{{ getElementName(element) }}</div>\r\n              <div class=\"element-value\">--</div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 添加神煞显示 -->\r\n          <h3>神煞信息</h3>\r\n          <div class=\"shen-sha-info\" v-if=\"baziChart && baziChart.shenSha\">\r\n            <div class=\"shen-sha-content\">\r\n              <div class=\"shen-sha-item\">\r\n                <span class=\"label\">日冲</span>\r\n                <span class=\"value\">{{ baziChart.shenSha.dayChong }}</span>\r\n              </div>\r\n              <div class=\"shen-sha-item\">\r\n                <span class=\"label\">值神</span>\r\n                <span class=\"value\">{{ baziChart.shenSha.zhiShen }}</span>\r\n              </div>\r\n              <div class=\"shen-sha-item\">\r\n                <span class=\"label\">喜神</span>\r\n                <span class=\"value\">{{ baziChart.shenSha.xiShen }}</span>\r\n              </div>\r\n              <div class=\"shen-sha-item\">\r\n                <span class=\"label\">福神</span>\r\n                <span class=\"value\">{{ baziChart.shenSha.fuShen }}</span>\r\n              </div>\r\n              <div class=\"shen-sha-item\">\r\n                <span class=\"label\">财神</span>\r\n                <span class=\"value\">{{ baziChart.shenSha.caiShen }}</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- 本命神煞 -->\r\n            <div class=\"ben-ming-sha\" v-if=\"baziChart.shenSha.benMing.length > 0\">\r\n              <h4>本命神煞</h4>\r\n              <div class=\"ben-ming-list\">\r\n                <span v-for=\"(sha, index) in baziChart.shenSha.benMing\" :key=\"index\" class=\"ben-ming-item\">\r\n                  {{ sha }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"shen-sha-info\" v-else>\r\n            <van-cell-group inset>\r\n              <van-cell title=\"神煞信息\" value=\"暂无数据\" />\r\n            </van-cell-group>\r\n          </div>\r\n          \r\n          <!-- 添加大运显示 -->\r\n          <h3>大运信息</h3>\r\n          <div class=\"da-yun-info\" v-if=\"baziChart && baziChart.daYun\">\r\n            <div class=\"qi-yun-info\">\r\n              <p>起运年龄: {{ baziChart.daYun.startAge }}岁</p>\r\n              <p>起运年份: {{ baziChart.daYun.startYear }}年</p>\r\n              <p>大运顺序: {{ baziChart.daYun.isForward ? '顺行' : '逆行' }}</p>\r\n            </div>\r\n            \r\n            <!-- 大运列表 -->\r\n            <div class=\"da-yun-table\">\r\n              <table class=\"custom-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>年龄</th>\r\n                    <th>年份</th>\r\n                    <th>天干</th>\r\n                    <th>地支</th>\r\n                    <th>纳音</th>\r\n                    <th>吉凶</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(yun, index) in baziChart.daYun.daYunList\" :key=\"index\">\r\n                    <td>{{ yun.startAge }}-{{ yun.endAge }}</td>\r\n                    <td>{{ yun.startYear }}-{{ yun.endYear }}</td>\r\n                    <td>{{ yun.heavenlyStem }}</td>\r\n                    <td>{{ yun.earthlyBranch }}</td>\r\n                    <td>{{ yun.naYin }}</td>\r\n                    <td>{{ yun.jiXiong }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div class=\"da-yun-info\" v-else>\r\n            <van-cell-group inset>\r\n              <van-cell title=\"大运信息\" value=\"暂无数据\" />\r\n            </van-cell-group>\r\n          </div>\r\n          \r\n          <h3>流年信息</h3>\r\n          <div class=\"liu-nian-info\" v-if=\"baziChart && baziChart.flowingYears && baziChart.flowingYears.length\">\r\n            <table class=\"custom-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>年份</th>\r\n                  <th>年龄</th>\r\n                  <th>天干</th>\r\n                  <th>地支</th>\r\n                  <th>五行</th>\r\n                  <th>神煞</th>\r\n                  <th>吉凶</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(year, index) in baziChart.flowingYears\" :key=\"index\">\r\n                  <td>{{ year.year }}</td>\r\n                  <td>{{ year.age }}</td>\r\n                  <td>{{ year.heavenlyStem }}</td>\r\n                  <td>{{ year.earthlyBranch }}</td>\r\n                  <td>{{ getElementName(year.ganElement) }}/{{ getElementName(year.zhiElement) }}</td>\r\n                  <td>{{ year.shenSha && Array.isArray(year.shenSha) ? year.shenSha.join(', ') : '无' }}</td>\r\n                  <td>{{ year.jiXiong || '未知' }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div class=\"liu-nian-info\" v-else>\r\n            <van-empty description=\"流年数据暂无\" />\r\n          </div>\r\n        </div>\r\n      </van-tab>\r\n      \r\n      <van-tab title=\"AI分析结果\">\r\n        <div class=\"ai-analysis\">\r\n          <div v-if=\"userAge !== null && userAge < 0\" class=\"age-notice\">\r\n            <van-notice-bar\r\n              color=\"#1989fa\"\r\n              background=\"#ecf9ff\"\r\n              left-icon=\"info-o\"\r\n            >\r\n              此分析针对未来出生的宝宝，重点关注性格特点、天赋才能和健康发展趋势。\r\n            </van-notice-bar>\r\n          </div>\r\n          <div v-else-if=\"userAge !== null && userAge < 6\" class=\"age-notice\">\r\n            <van-notice-bar\r\n              color=\"#1989fa\"\r\n              background=\"#ecf9ff\"\r\n              left-icon=\"info-o\"\r\n            >\r\n              此分析针对婴幼儿({{userAge}}岁)，重点关注性格特点、天赋才能和健康发展趋势。\r\n            </van-notice-bar>\r\n          </div>\r\n          <div v-else-if=\"userAge !== null && userAge < 18\" class=\"age-notice\">\r\n            <van-notice-bar\r\n              color=\"#1989fa\"\r\n              background=\"#ecf9ff\"\r\n              left-icon=\"info-o\"\r\n            >\r\n              此分析针对未成年人({{userAge}}岁)，重点关注性格特点、学业发展和健康状况。\r\n            </van-notice-bar>\r\n          </div>\r\n          \r\n          <!-- 添加全局分析状态提示 -->\r\n          <van-notice-bar\r\n            v-if=\"analysisStatus === 'pending'\"\r\n            color=\"#1989fa\"\r\n            background=\"#ecf9ff\"\r\n            left-icon=\"info-o\"\r\n            :scrollable=\"false\"\r\n            class=\"analysis-progress-notice\"\r\n          >\r\n            <div class=\"analysis-progress\">\r\n              <p>AI正在生成八字分析结果，这可能需要30-60秒</p>\r\n              <van-progress :percentage=\"analysisProgress\" :show-pivot=\"false\" color=\"#1989fa\" />\r\n            </div>\r\n          </van-notice-bar>\r\n          \r\n          <!-- 核心分析 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>八字命局核心分析</h3>\r\n            <template v-if=\"!aiAnalysis.coreAnalysis || aiAnalysis.coreAnalysis === '暂无' || aiAnalysis.coreAnalysis === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else v-html=\"renderMarkdown(aiAnalysis.coreAnalysis)\" class=\"markdown-content\"></div>\r\n          </div>\r\n          \r\n          <!-- 五行旺衰与用神 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>五行旺衰与用神</h3>\r\n            <template v-if=\"!aiAnalysis.fiveElements || aiAnalysis.fiveElements === '暂无' || aiAnalysis.fiveElements === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else v-html=\"renderMarkdown(aiAnalysis.fiveElements)\" class=\"markdown-content\"></div>\r\n          </div>\r\n          \r\n          <!-- 神煞解析 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>神煞解析</h3>\r\n            <template v-if=\"!aiAnalysis.shenShaAnalysis || aiAnalysis.shenShaAnalysis === '暂无' || aiAnalysis.shenShaAnalysis === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else v-html=\"renderMarkdown(aiAnalysis.shenShaAnalysis)\" class=\"markdown-content\"></div>\r\n          </div>\r\n          \r\n          <!-- 大运与流年关键节点 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>大运与流年关键节点</h3>\r\n            <template v-if=\"!aiAnalysis.keyPoints || aiAnalysis.keyPoints === '暂无' || aiAnalysis.keyPoints === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else v-html=\"renderMarkdown(aiAnalysis.keyPoints)\" class=\"markdown-content\"></div>\r\n          </div>\r\n          \r\n          <!-- 婚姻感情 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>{{ userAge !== null && userAge >= 18 ? '婚姻感情' : '未来感情发展' }}</h3>\r\n            <template v-if=\"!aiAnalysis.relationship || aiAnalysis.relationship === '暂无' || aiAnalysis.relationship === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.relationship || followupAnalysis.marriage\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.relationship || followupAnalysis.marriage)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.relationship)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 事业财运 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>{{ userAge !== null && userAge >= 18 ? '事业财运' : '未来事业财运' }}</h3>\r\n            <template v-if=\"!aiAnalysis.career || aiAnalysis.career === '暂无' || aiAnalysis.career === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.career || followupAnalysis.work || followupAnalysis.money || followupAnalysis.wealth\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.career || followupAnalysis.work || followupAnalysis.money || followupAnalysis.wealth)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.career)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 子女情况 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>{{ userAge !== null && userAge >= 18 ? '子女情况' : '未来子女缘分' }}</h3>\r\n            <template v-if=\"!aiAnalysis.children || aiAnalysis.children === '暂无' || aiAnalysis.children === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.children || followupAnalysis.family\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.children || followupAnalysis.family)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.children)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 父母情况 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>父母情况</h3>\r\n            <template v-if=\"!aiAnalysis.parents || aiAnalysis.parents === '暂无' || aiAnalysis.parents === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.parents\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.parents)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.parents)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 身体健康 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>身体健康</h3>\r\n            <template v-if=\"!aiAnalysis.health || aiAnalysis.health === '暂无' || aiAnalysis.health === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.health\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.health)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.health)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 学业 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>学业</h3>\r\n            <template v-if=\"!aiAnalysis.education || aiAnalysis.education === '暂无' || aiAnalysis.education === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.education || followupAnalysis.study\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.education || followupAnalysis.study)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.education)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 人际关系 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>人际关系</h3>\r\n            <template v-if=\"!aiAnalysis.social || aiAnalysis.social === '暂无' || aiAnalysis.social === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.social || followupAnalysis.relationship || followupAnalysis.friends\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.social || followupAnalysis.relationship || followupAnalysis.friends)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.social)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 近五年运势 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>近五年运势</h3>\r\n            <template v-if=\"!aiAnalysis.future || aiAnalysis.future === '暂无' || aiAnalysis.future === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.future || followupAnalysis.fiveYears\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.future || followupAnalysis.fiveYears)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.future)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 人生规划建议 -->\r\n          <div class=\"analysis-section\">\r\n            <h3>人生规划建议</h3>\r\n            <template v-if=\"!aiAnalysis.lifePlan || aiAnalysis.lifePlan === '暂无' || aiAnalysis.lifePlan === '分析生成中...'\">\r\n              <div class=\"loading-content\">\r\n                <van-loading size=\"24px\" vertical>分析生成中...</van-loading>\r\n              </div>\r\n            </template>\r\n            <div v-else>\r\n              <!-- 如果有追问分析结果，优先显示追问分析 -->\r\n              <div v-if=\"followupAnalysis.lifePlan\" class=\"enhanced-analysis\">\r\n                <div v-html=\"renderMarkdown(followupAnalysis.lifePlan)\" class=\"markdown-content\"></div>\r\n                <div class=\"analysis-source\">\r\n                  <van-tag type=\"primary\" size=\"medium\">深度分析</van-tag>\r\n                </div>\r\n              </div>\r\n              <div v-else v-html=\"renderMarkdown(aiAnalysis.lifePlan)\" class=\"markdown-content\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-tab>\r\n    </van-tabs>\r\n    \r\n    <div class=\"action-buttons\">\r\n      <van-button type=\"primary\" block @click=\"downloadPDF\">\r\n        下载PDF报告\r\n      </van-button>\r\n      <van-button plain type=\"primary\" block style=\"margin-top: 10px;\" @click=\"shareResult\">\r\n        分享结果\r\n      </van-button>\r\n      \r\n      <!-- 本地生成PDF按钮 -->\r\n      <van-button plain type=\"info\" \r\n                  block \r\n                  style=\"margin-top: 10px;\" \r\n                  @click=\"handleLocalPDFGeneration\">\r\n        本地生成PDF\r\n      </van-button>\r\n      \r\n      <!-- 调试按钮 -->\r\n      <van-button plain type=\"warning\" \r\n                  block \r\n                  style=\"margin-top: 10px;\" \r\n                  @click=\"reloadBaziData\">\r\n        重新加载分析数据\r\n      </van-button>\r\n    </div>\r\n    \r\n    <!-- 添加追问部分 -->\r\n    <div class=\"followup-section\" v-if=\"baziChart && !loading\">\r\n      <h2 class=\"section-title\">深度分析</h2>\r\n      <p class=\"section-desc\">选择您感兴趣的领域，进行深度分析</p>\r\n      \r\n      <div class=\"followup-options\">\r\n        <div \r\n          v-for=\"option in followupOptions\" \r\n          :key=\"option.id\" \r\n          class=\"followup-option\" \r\n          :class=\"{ 'paid': option.paid }\"\r\n          @click=\"selectFollowupOption(option)\"\r\n        >\r\n          <div class=\"option-content\">\r\n            <span class=\"option-name\">{{ option.name }}</span>\r\n            <span class=\"option-status\" v-if=\"option.paid\">已解锁</span>\r\n            <span class=\"option-status\" v-else>￥9.9</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 已支付的追问分析结果展示 -->\r\n      <div v-if=\"currentFollowup && currentFollowup.paid\" class=\"followup-result\">\r\n        <h3>{{ currentFollowup.name }}分析</h3>\r\n        <div v-if=\"isLoadingFollowup\" class=\"loading-content\">\r\n          <van-loading size=\"24px\" vertical>分析加载中...</van-loading>\r\n        </div>\r\n        <div v-else-if=\"!followupAnalysis[currentFollowup.id]\" class=\"loading-content\">\r\n          <van-empty description=\"分析结果尚未生成，请稍后刷新页面\" />\r\n          <van-button type=\"primary\" size=\"small\" @click=\"reloadFollowupAnalysis(currentFollowup.id)\">\r\n            刷新分析\r\n          </van-button>\r\n        </div>\r\n        <div v-else class=\"analysis-content\" v-html=\"renderMarkdown(followupAnalysis[currentFollowup.id])\"></div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 追问支付对话框 -->\r\n    <van-dialog\r\n      v-model:show=\"showFollowupDialog\"\r\n      title=\"深度分析\"\r\n      confirm-button-text=\"支付 ￥9.9\"\r\n      @confirm=\"payForFollowup\"\r\n      :before-close=\"() => !isLoadingFollowup\"\r\n    >\r\n      <div class=\"followup-dialog-content\">\r\n        <p>您选择了「{{ currentFollowup?.name }}」深度分析</p>\r\n        <p>支付后，AI将根据您的八字和流年运势，为您提供专业的命理分析</p>\r\n      </div>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, reactive, computed, watch, onUnmounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { Toast, Dialog } from 'vant';\r\nimport { jsPDF } from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport axios from 'axios';\r\nimport MarkdownIt from 'markdown-it';  // 添加markdown-it导入\r\n\r\n// 创建markdown解析器实例\r\nconst md = new MarkdownIt({\r\n  html: true,\r\n  breaks: true,\r\n  linkify: true,\r\n  typographer: true\r\n});\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst resultId = ref(route.params.id || route.query.resultId);\r\nconst activeTab = ref(0);\r\nconst loading = ref(false);\r\n\r\n// 添加分析状态相关变量\r\nconst isAnalyzing = ref(false);\r\nconst analyzeProgress = ref(0);\r\nconst analyzeTimer = ref(null);\r\n\r\n// 渲染Markdown内容\r\nconst renderMarkdown = (content) => {\r\n  if (!content) return '';\r\n  try {\r\n    // 检查内容是否已经是HTML\r\n    if (content.includes('<') && content.includes('>') && content.includes('<div') || content.includes('<p>')) {\r\n      // 如果已经含有HTML标签，可能已经被渲染过，直接返回\r\n      return content;\r\n    }\r\n\r\n    // 预处理八字分析特殊格式\r\n    let processedContent = content;\r\n    \r\n    // 处理加粗文本 **文本**\r\n    processedContent = processedContent.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\r\n    \r\n    // 处理分隔符 --\r\n    processedContent = processedContent.replace(/\\s*--\\s*/g, '<hr>');\r\n    \r\n    // 处理标题（以#开头的行）\r\n    processedContent = processedContent.replace(/^(#+)\\s+(.*?)$/gm, (match, hashes, text) => {\r\n      const level = Math.min(hashes.length, 6);\r\n      return `<h${level}>${text}</h${level}>`;\r\n    });\r\n    \r\n    // 处理列表（以-或数字开头的行）\r\n    processedContent = processedContent.replace(/^- (.*?)$/gm, '<li>$1</li>');\r\n    processedContent = processedContent.replace(/^(\\d+)\\. (.*?)$/gm, '<li>$1. $2</li>');\r\n    \r\n    // 将连续的<li>元素包装在<ul>或<ol>中\r\n    if (processedContent.includes('<li>')) {\r\n      // 简单检测是否含有数字列表\r\n      const hasNumberList = /^<li>\\d+\\./.test(processedContent);\r\n      const listTag = hasNumberList ? 'ol' : 'ul';\r\n      \r\n      // 将连续的<li>元素包装在列表标签中\r\n      processedContent = processedContent.replace(/(<li>.*?<\\/li>\\n*)+/g, match => {\r\n        return `<${listTag}>${match}</${listTag}>`;\r\n      });\r\n    }\r\n    \r\n    // 处理段落\r\n    if (!processedContent.includes('<p>')) {\r\n      const paragraphs = processedContent.split('\\n\\n');\r\n      processedContent = paragraphs.map(p => {\r\n        // 如果段落不是以HTML标签开头，则添加<p>标签\r\n        if (p.trim() && !p.trim().startsWith('<')) {\r\n          return `<p>${p}</p>`;\r\n        }\r\n        return p;\r\n      }).join('\\n');\r\n    }\r\n    \r\n    // 最后使用markdown-it处理任何剩余的Markdown标记\r\n    return md.render(processedContent);\r\n  } catch (e) {\r\n    console.error('Markdown渲染失败:', e);\r\n    return content; // 如果渲染失败，返回原始内容\r\n  }\r\n};\r\n\r\n// 用户年龄，从URL参数或localStorage获取\r\nconst userAge = ref(null);\r\n// 尝试从URL参数获取年龄\r\nif (route.query.age && !isNaN(parseInt(route.query.age))) {\r\n  userAge.value = parseInt(route.query.age);\r\n} \r\n// 如果URL参数中没有年龄，尝试从localStorage获取\r\nelse if (localStorage.getItem('userAge') && !isNaN(parseInt(localStorage.getItem('userAge')))) {\r\n  userAge.value = parseInt(localStorage.getItem('userAge'));\r\n}\r\n// 记录用户年龄到控制台，便于调试\r\nconsole.log('用户年龄:', userAge.value);\r\n\r\n// 从分析文本中提取特定部分内容\r\nconst getAnalysisContent = (sectionName) => {\r\n  try {\r\n    // 如果是性格特点或学业发展，直接从对应字段获取\r\n    if (sectionName === '性格特点' && aiAnalysis.value.personality) {\r\n      return aiAnalysis.value.personality;\r\n    }\r\n    \r\n    if (sectionName === '学业发展' && aiAnalysis.value.education) {\r\n      return aiAnalysis.value.education;\r\n    }\r\n    \r\n    // 处理健康分析文本，尝试提取学业、性格等内容\r\n    if (aiAnalysis.value.health) {\r\n      const healthText = aiAnalysis.value.health;\r\n      \r\n      // 查找各部分的标记\r\n      const sectionMatch = healthText.match(new RegExp(`###\\\\s*${sectionName}([\\\\s\\\\S]*?)(?=###|$)`, 'i'));\r\n      if (sectionMatch && sectionMatch[1]) {\r\n        return sectionMatch[1].trim();\r\n      }\r\n      \r\n      // 如果是未来发展，尝试从overall中提取\r\n      if (sectionName === '未来发展' && aiAnalysis.value.overall) {\r\n        const futureMatch = aiAnalysis.value.overall.match(/未来(\\d+)年[：:]([\\s\\S]*?)(?=（本分析|$)/i);\r\n        if (futureMatch && futureMatch[2]) {\r\n          return futureMatch[2].trim();\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 如果没有找到对应部分或提取失败，返回空字符串\r\n    return '';\r\n  } catch (e) {\r\n    console.error(`提取${sectionName}内容时出错:`, e);\r\n    return '';\r\n  }\r\n};\r\n\r\n// 修改数据初始化\r\nconst focusAreas = ref([]);\r\nconst analysisResult = ref({});\r\n\r\n// 初始化八字数据\r\nconst baziData = ref({\r\n  yearPillar: { \r\n    heavenlyStem: '', \r\n    earthlyBranch: '',\r\n    naYin: '',\r\n    shiShen: '',\r\n    wangShuai: ''\r\n  },\r\n  monthPillar: { \r\n    heavenlyStem: '', \r\n    earthlyBranch: '',\r\n    naYin: '',\r\n    shiShen: '',\r\n    wangShuai: ''\r\n  },\r\n  dayPillar: { \r\n    heavenlyStem: '', \r\n    earthlyBranch: '',\r\n    naYin: '',\r\n    shiShen: '',\r\n    wangShuai: ''\r\n  },\r\n  hourPillar: { \r\n    heavenlyStem: '', \r\n    earthlyBranch: '',\r\n    naYin: '',\r\n    shiShen: '',\r\n    wangShuai: ''\r\n  },\r\n  fiveElements: {},\r\n  flowingYears: [],\r\n  shenSha: {\r\n    dayChong: '',\r\n    zhiShen: '',\r\n    xiShen: '',\r\n    fuShen: '',\r\n    caiShen: '',\r\n    benMing: [],\r\n    yearGan: [],\r\n    yearZhi: [],\r\n    dayGan: [],\r\n    dayZhi: []\r\n  },\r\n  daYun: {\r\n    startAge: 0,\r\n    startYear: 0,\r\n    isForward: true,\r\n    daYunList: []\r\n  },\r\n  birthDate: null,\r\n  birthTime: null,\r\n  gender: null\r\n});\r\n\r\n// 初始化分析数据\r\nconst aiAnalysis = ref({\r\n  health: '',\r\n  career: '',\r\n  relationship: '',\r\n  children: '',\r\n  social: '',\r\n  future: '',\r\n  parents: '',\r\n  education: '',\r\n  // 新增字段\r\n  coreAnalysis: '',\r\n  fiveElements: '',\r\n  shenShaAnalysis: '',\r\n  keyPoints: ''\r\n});\r\n\r\nconst testApiConnection = async () => {\r\n  try {\r\n    Toast.loading('正在测试API连接...');\r\n    // 使用配置好的http实例\r\n    const response = await axios.get('/');\r\n    console.log('API根路径响应:', response.data);\r\n    Toast.success('API连接成功');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('API连接测试失败:', error);\r\n    Toast.fail('API连接失败，请检查后端服务');\r\n    return false;\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  // 先测试API连接\r\n  const isApiConnected = await testApiConnection();\r\n  if (!isApiConnected) {\r\n    console.warn('API连接失败，将使用模拟数据');\r\n    loading.value = false;\r\n    return;\r\n  }\r\n  \r\n  console.log('结果页面加载，URL参数中的ID:', resultId.value);\r\n  \r\n  // 如果没有resultId，尝试从本地存储获取\r\n  const localResultId = localStorage.getItem('resultId');\r\n  if (!resultId.value && localResultId) {\r\n    console.log('从本地存储获取ID:', localResultId);\r\n    // 更新resultId为从本地存储获取的值\r\n    resultId.value = localResultId;\r\n  }\r\n  \r\n  // 确保resultId是字符串类型，不是布尔值或其他数据类型\r\n  if (resultId.value === true || resultId.value === false) {\r\n    console.error('resultId不应该是布尔值:', resultId.value);\r\n    resultId.value = localResultId || route.query.resultId || '';\r\n  }\r\n  \r\n  console.log('最终使用的resultId:', resultId.value);\r\n  \r\n  // 如果resultId为空或无效，显示错误并尝试从URL查询参数获取\r\n  if (!resultId.value) {\r\n    console.error('缺少结果ID，无法获取分析结果');\r\n    \r\n    // 尝试从URL查询参数获取备选ID\r\n    const urlResultId = route.query.resultId;\r\n    if (urlResultId) {\r\n      console.log('从URL查询参数获取备选ID:', urlResultId);\r\n      resultId.value = urlResultId;\r\n    } else {\r\n      Toast.fail('缺少结果ID，无法获取分析结果');\r\n      loading.value = false;\r\n      return;\r\n    }\r\n  }\r\n  \r\n  // 存储确认的resultId到本地存储\r\n  localStorage.setItem('resultId', resultId.value);\r\n  \r\n  // 显示加载提示\r\n  Toast.loading({\r\n    message: '正在加载八字分析结果，请稍候...',\r\n    duration: 0,\r\n    forbidClick: true\r\n  });\r\n  \r\n  // 调用getBaziResult函数获取结果\r\n  await getBaziResult();\r\n  \r\n  // 检查分析是否完成\r\n  const stillAnalyzing = Object.values(aiAnalysis.value).some(\r\n    value => typeof value === 'string' && value.includes('正在分析')\r\n  );\r\n  \r\n  if (stillAnalyzing) {\r\n    console.log('检测到分析仍在进行中...');\r\n    Toast.loading({\r\n      message: '正在生成八字分析结果，这可能需要30-60秒...',\r\n      duration: 0\r\n    });\r\n    \r\n    // 设置分析状态为进行中\r\n    analysisStatus.value = 'pending';\r\n    \r\n    // 启动轮询\r\n    await pollAnalysisStatus(resultId.value);\r\n    Toast.success('分析完成');\r\n    \r\n    // 分析完成后更新状态\r\n    analysisStatus.value = 'completed';\r\n    analysisProgress.value = 100;\r\n  }\r\n  \r\n  // 关闭加载提示\r\n  Toast.clear();\r\n});\r\n\r\nconst getElementName = (element) => {\r\n  if (!element) return '--';\r\n  \r\n  const elementNames = {\r\n    'wood': '木',\r\n    'fire': '火',\r\n    'earth': '土',\r\n    'metal': '金',\r\n    'water': '水',\r\n    '木': '木',\r\n    '火': '火',\r\n    '土': '土',\r\n    '金': '金',\r\n    '水': '水'\r\n  };\r\n  \r\n  return elementNames[element] || element;\r\n};\r\n\r\nconst onClickLeft = () => {\r\n  router.push('/');\r\n};\r\n\r\n// 修改后的直接流下载函数，适应后端始终返回文件流\r\nconst downloadPDFAsStream = async () => {\r\n  Toast.loading({\r\n    message: '正在生成PDF并下载报告...',\r\n    duration: 0,\r\n    position: 'middle',\r\n    forbidClick: true\r\n  });\r\n  \r\n  if (!resultId.value) {\r\n    Toast.clear();\r\n    Toast.fail('缺少结果ID，无法下载报告');\r\n    return false;\r\n  }\r\n  \r\n  try {\r\n    console.log('直接下载报告, 结果ID:', resultId.value);\r\n    \r\n    // 创建下载链接，添加时间戳避免缓存问题和force参数强制重新生成\r\n    const timestamp = new Date().getTime();\r\n    // 默认启用markdown解析\r\n    const downloadUrl = `/api/bazi/pdf/${resultId.value}?t=${timestamp}&force=true&parseMarkdown=true`;\r\n    console.log('下载URL:', downloadUrl);\r\n    \r\n    // 使用fetch API获取文件流\r\n    const response = await fetch(downloadUrl, {\r\n      method: 'GET',\r\n      cache: 'no-cache',\r\n      headers: {\r\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\r\n        'Pragma': 'no-cache',\r\n        'Expires': '0'\r\n      }\r\n    });\r\n    \r\n    // 检查错误\r\n    if (!response.ok) {\r\n      let errorMsg = `下载失败: HTTP错误 ${response.status}`;\r\n      try {\r\n        const contentType = response.headers.get('content-type');\r\n        if (contentType && contentType.includes('application/json')) {\r\n          const errorData = await response.json();\r\n          errorMsg = errorData.message || errorMsg;\r\n        } else {\r\n          // 如果不是JSON格式的错误，尝试获取文本错误信息\r\n          const errorText = await response.text();\r\n          if (errorText) {\r\n            errorMsg = `下载失败: ${errorText.substring(0, 100)}`;\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('解析错误响应失败:', e);\r\n      }\r\n      throw new Error(errorMsg);\r\n    }\r\n    \r\n    // 检查内容类型\r\n    const contentType = response.headers.get('content-type');\r\n    const disposition = response.headers.get('content-disposition');\r\n    \r\n    console.log('响应内容类型:', contentType);\r\n    console.log('响应内容处置:', disposition);\r\n    \r\n    // 确定文件名和扩展名\r\n    let filename = `八字命理分析_${resultId.value}.pdf`;\r\n    if (disposition && disposition.includes('filename=')) {\r\n      const filenameMatch = disposition.match(/filename=[\"']?([^\"']+)[\"']?/);\r\n      if (filenameMatch && filenameMatch[1]) {\r\n        filename = filenameMatch[1];\r\n      }\r\n    }\r\n    \r\n    // 确定文件类型\r\n    const fileExtension = contentType && contentType.includes('html') ? 'html' : 'pdf';\r\n    if (!filename.endsWith(fileExtension)) {\r\n      filename = `八字命理分析_${resultId.value}.${fileExtension}`;\r\n    }\r\n    \r\n    // 转换为Blob对象\r\n    const blob = await response.blob();\r\n    console.log('PDF Blob大小:', blob.size, '字节');\r\n    \r\n    // 检查Blob大小 - 注意：当浏览器接管下载时，可能会导致blob.size为0\r\n    // 因此，如果有Content-Disposition头部，我们应该认为下载已经开始\r\n    const isDownloadStarted = disposition && disposition.includes('attachment');\r\n    if (blob.size === 0 && !isDownloadStarted) {\r\n      throw new Error('下载的文件为空');\r\n    }\r\n    \r\n    // 对于小文件，我们可以验证文件内容\r\n    // 但对于大文件或浏览器接管的下载，跳过验证\r\n    if (blob.size > 0 && blob.size < 1024*1024 && contentType && contentType.includes('pdf')) {\r\n      try {\r\n        // 读取文件头部以验证是否为有效的PDF\r\n        const fileReader = new FileReader();\r\n        const headerPromise = new Promise((resolve, reject) => {\r\n          fileReader.onloadend = (e) => resolve(e.target.result);\r\n          fileReader.onerror = (e) => reject(e);\r\n        });\r\n        fileReader.readAsArrayBuffer(blob.slice(0, 5));\r\n        \r\n        const header = await headerPromise;\r\n        const headerView = new Uint8Array(header);\r\n        const headerString = String.fromCharCode.apply(null, headerView);\r\n        \r\n        if (!headerString.startsWith('%PDF')) {\r\n          console.error('无效的PDF文件头:', headerString);\r\n          throw new Error('下载的不是有效的PDF文件');\r\n        } else {\r\n          console.log('PDF文件头验证通过');\r\n        }\r\n      } catch (e) {\r\n        console.error('验证PDF文件失败:', e);\r\n        // 如果是浏览器接管下载导致的验证失败，我们不抛出错误\r\n        if (!isDownloadStarted) {\r\n          throw new Error('验证PDF文件失败: ' + e.message);\r\n        } else {\r\n          console.warn('浏览器接管了下载，跳过PDF验证');\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 不管浏览器是否已经接管下载，我们都手动创建一个下载链接\r\n    try {\r\n      // 创建下载链接\r\n      const url = window.URL.createObjectURL(blob);\r\n      console.log('创建Blob URL:', url);\r\n      \r\n      // 使用iframe方式下载，避免某些浏览器的下载拦截\r\n      const iframe = document.createElement('iframe');\r\n      iframe.style.display = 'none';\r\n      document.body.appendChild(iframe);\r\n      \r\n      // 创建a标签并触发下载\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `八字命理分析_${resultId.value}.pdf`; // 强制使用自定义文件名\r\n      a.target = '_blank';\r\n      a.rel = 'noopener noreferrer';\r\n      \r\n      // 在iframe中添加a标签并点击\r\n      iframe.contentWindow.document.body.appendChild(a);\r\n      console.log('触发下载, 文件名:', a.download);\r\n      a.click();\r\n      \r\n      // 清理\r\n      setTimeout(() => {\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(iframe);\r\n        console.log('清理下载资源完成');\r\n      }, 1000); // 增加延时确保下载开始\r\n    } catch (e) {\r\n      console.error('创建下载链接失败:', e);\r\n      \r\n      // 尝试使用window.open直接打开PDF\r\n      try {\r\n        console.log('尝试使用window.open方法下载');\r\n        const pdfWindow = window.open(downloadUrl, '_blank');\r\n        if (!pdfWindow) {\r\n          console.warn('弹出窗口被阻止，尝试其他方法');\r\n          // 提示用户直接打开链接\r\n          Dialog.alert({\r\n            title: '下载提示',\r\n            message: '系统无法自动下载PDF，请点击确定后手动保存文件',\r\n            confirmButtonText: '确定',\r\n          }).then(() => {\r\n            window.open(downloadUrl, '_blank');\r\n          });\r\n        }\r\n      } catch (openError) {\r\n        console.error('使用window.open下载失败:', openError);\r\n        throw new Error('下载失败，请尝试使用其他浏览器');\r\n      }\r\n    }\r\n    \r\n    Toast.clear();\r\n    Toast.success('报告下载成功');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('直接下载PDF出错:', error);\r\n    Toast.clear();\r\n    \r\n    // 检查是否是因为浏览器已经接管了下载而导致的错误\r\n    if (error.message && (\r\n        error.message.includes('下载的文件为空') || \r\n        error.message.includes('验证PDF文件失败')\r\n      )) {\r\n      // 如果是这类错误，可能是浏览器已经开始下载，我们不显示错误\r\n      console.log('可能是浏览器已经接管了下载，不显示错误');\r\n      Toast.success('报告下载已开始，请等待浏览器完成下载');\r\n      return true;\r\n    }\r\n    \r\n    // 显示错误信息\r\n    Toast.fail(error.message || '下载失败，请稍后重试');\r\n    return false;\r\n  }\r\n};\r\n\r\n// 修改主下载函数，添加重试逻辑\r\nconst downloadPDF = async () => {\r\n  Toast.loading({\r\n    message: '正在准备生成PDF报告...',\r\n    duration: 5000,\r\n    position: 'middle'\r\n  });\r\n  \r\n  if (!resultId.value) {\r\n    Toast.fail('缺少结果ID，无法生成报告');\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    // 先重新加载最新的数据，确保PDF包含最新的追问分析结果\r\n    Toast.loading({\r\n      message: '正在同步最新数据...',\r\n      duration: 5000\r\n    });\r\n    \r\n    // 获取最新的基础分析结果\r\n    await getBaziResult();\r\n    \r\n    // 获取最新的追问分析结果\r\n    await loadFollowupResults();\r\n    \r\n    Toast.loading({\r\n      message: '正在生成并下载PDF报告...',\r\n      duration: 5000\r\n    });\r\n    \r\n    // 最多尝试3次下载\r\n    let attempts = 0;\r\n    let success = false;\r\n    \r\n    while (attempts < 3 && !success) {\r\n      attempts++;\r\n      \r\n      if (attempts > 1) {\r\n        console.log(`尝试第${attempts}次下载...`);\r\n        Toast.loading({\r\n          message: `尝试第${attempts}次下载...`,\r\n          duration: 2000\r\n        });\r\n        // 在重试之前等待一段时间\r\n        await new Promise(resolve => setTimeout(resolve, 2000));\r\n      }\r\n      \r\n      // 使用流式下载模式，并处理返回值\r\n      success = await downloadPDFAsStream();\r\n      \r\n      // 如果流式下载成功，直接返回，不再尝试其他方法\r\n      if (success === true) {\r\n        return;\r\n      }\r\n    }\r\n    \r\n    // 如果多次尝试后仍然失败，提示用户\r\n    if (!success) {\r\n      Toast.clear();\r\n      Dialog.alert({\r\n        title: 'PDF下载失败',\r\n        message: '下载PDF报告失败，请稍后再试。如果问题持续存在，请联系客服。',\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error('下载PDF过程中发生错误:', error);\r\n    Toast.clear();\r\n    Toast.fail('生成PDF报告失败: ' + (error.message || '未知错误'));\r\n  }\r\n};\r\n\r\n// 本地生成PDF的函数\r\nconst generatePDFLocally = async () => {\r\n  console.log('使用客户端jsPDF库生成PDF');\r\n  \r\n  // 获取内容元素\r\n  const element = document.querySelector('.result-container');\r\n  if (!element) {\r\n    throw new Error('找不到要转换的内容元素');\r\n  }\r\n  \r\n  Toast.loading({\r\n    message: '正在捕获页面内容...',\r\n    duration: 5000\r\n  });\r\n  \r\n  try {\r\n    // 在捕获内容前先应用Markdown格式（临时）\r\n    const sections = document.querySelectorAll('.analysis-section');\r\n    const originalContents = [];\r\n    \r\n    // 确保所有Markdown内容都已经被渲染为HTML\r\n    sections.forEach((section, index) => {\r\n      const contentElement = section.querySelector('p, .markdown-content');\r\n      if (contentElement && !contentElement.classList.contains('markdown-content')) {\r\n        originalContents.push({\r\n          element: contentElement,\r\n          content: contentElement.innerHTML\r\n        });\r\n        \r\n        // 如果内容中有Markdown语法但尚未渲染，则渲染它\r\n        if (contentElement.textContent.includes('**') || \r\n            contentElement.textContent.includes('##') ||\r\n            contentElement.textContent.includes('--') ||\r\n            contentElement.textContent.includes('- ')) {\r\n          contentElement.innerHTML = md.render(contentElement.textContent);\r\n          contentElement.classList.add('markdown-content-temp');\r\n        }\r\n      }\r\n    });\r\n    \r\n    // 使用html2canvas捕获内容\r\n    const canvas = await html2canvas(element, {\r\n      scale: 1,\r\n      useCORS: true,\r\n      logging: false,\r\n      windowWidth: document.documentElement.offsetWidth,\r\n      windowHeight: document.documentElement.offsetHeight,\r\n    });\r\n    \r\n    Toast.loading({\r\n      message: '正在生成PDF文件...',\r\n      duration: 5000\r\n    });\r\n        \r\n    // 创建PDF文档\r\n    const pdf = new jsPDF('p', 'mm', 'a4');\r\n        \r\n    // 计算尺寸和比例\r\n    const imgData = canvas.toDataURL('image/png');\r\n    const imgWidth = 210; // A4宽度，单位mm\r\n    const pageHeight = 297; // A4高度，单位mm\r\n    const imgHeight = canvas.height * imgWidth / canvas.width;\r\n    let heightLeft = imgHeight;\r\n    let position = 0;\r\n          \r\n    // 添加首页\r\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n    heightLeft -= pageHeight;\r\n    \r\n    // 如果内容超过一页，添加更多页\r\n    while (heightLeft > 0) {\r\n      position = heightLeft - imgHeight;\r\n      pdf.addPage();\r\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n      heightLeft -= pageHeight;\r\n    }\r\n    \r\n    // 添加页脚\r\n    const pageCount = pdf.internal.getNumberOfPages();\r\n    for (let i = 1; i <= pageCount; i++) {\r\n      pdf.setPage(i);\r\n      pdf.setFontSize(10);\r\n      pdf.setTextColor(150);\r\n      pdf.text(`八字命理AI分析报告 - 页 ${i} / ${pageCount}`, pdf.internal.pageSize.getWidth() / 2, pdf.internal.pageSize.getHeight() - 10, { align: 'center' });\r\n    }\r\n    \r\n    // 恢复原始内容\r\n    originalContents.forEach(item => {\r\n      if (item && item.element) {\r\n        item.element.innerHTML = item.content;\r\n        item.element.classList.remove('markdown-content-temp');\r\n      }\r\n    });\r\n    \r\n    // 保存PDF\r\n    pdf.save(`八字命理分析_${resultId.value}.pdf`);\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('本地PDF生成错误:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst shareResult = () => {\r\n  Toast.success('分享功能开发中');\r\n};\r\n\r\n// 处理本地PDF生成\r\nconst handleLocalPDFGeneration = async () => {\r\n  try {\r\n    Toast.loading({\r\n      message: '正在本地生成PDF...',\r\n      duration: 0,\r\n      forbidClick: true\r\n    });\r\n    \r\n    // 确保所有内容都已经渲染Markdown\r\n    const sections = document.querySelectorAll('.analysis-section');\r\n    const originalContents = [];\r\n    let needsRendering = false;\r\n    \r\n    // 检查是否有内容需要渲染\r\n    sections.forEach((section) => {\r\n      const contentElement = section.querySelector('p:not(.markdown-content)');\r\n      if (contentElement) {\r\n        needsRendering = true;\r\n      }\r\n    });\r\n    \r\n    // 如果需要渲染，先将所有内容进行Markdown渲染\r\n    if (needsRendering) {\r\n      console.log('检测到需要渲染Markdown内容');\r\n      sections.forEach((section) => {\r\n        const contentElements = section.querySelectorAll('p:not(.markdown-content)');\r\n        contentElements.forEach((element) => {\r\n          const text = element.textContent;\r\n          if (text && (\r\n            text.includes('**') || \r\n            text.includes('#') || \r\n            text.includes('-') || \r\n            text.includes('1.') ||\r\n            text.includes('\\n')\r\n          )) {\r\n            originalContents.push({\r\n              element: element,\r\n              content: element.innerHTML\r\n            });\r\n            element.innerHTML = md.render(text);\r\n            element.classList.add('markdown-content');\r\n            element.classList.add('temp-rendered');\r\n          }\r\n        });\r\n      });\r\n    }\r\n    \r\n    // 生成PDF\r\n    await generatePDFLocally();\r\n    \r\n    // 恢复原始内容\r\n    if (needsRendering) {\r\n      document.querySelectorAll('.temp-rendered').forEach((element) => {\r\n        const original = originalContents.find(item => item.element === element);\r\n        if (original) {\r\n          element.innerHTML = original.content;\r\n          element.classList.remove('markdown-content');\r\n          element.classList.remove('temp-rendered');\r\n        }\r\n      });\r\n    }\r\n    \r\n    Toast.clear();\r\n    Toast.success('本地PDF生成成功');\r\n  } catch (error) {\r\n    console.error('本地PDF生成失败:', error);\r\n    Toast.clear();\r\n    Toast.fail('本地PDF生成失败: ' + (error.message || '未知错误'));\r\n  }\r\n};\r\n\r\n// 添加分析状态检查函数\r\nconst checkAnalysisStatus = async (resultId) => {\r\n  try {\r\n    console.log('检查分析状态:', resultId);\r\n    const response = await axios.get(`/api/bazi/result/${resultId}`);\r\n    \r\n    if (response.data.code === 200) {\r\n      // 检查AI分析是否已经生成\r\n      const aiAnalysisData = response.data.data.aiAnalysis || {};\r\n      \r\n      // 统计已完成和正在分析的项目\r\n      let totalItems = 0;\r\n      let completedItems = 0;\r\n      \r\n      Object.entries(aiAnalysisData).forEach(([key, value]) => {\r\n        totalItems++;\r\n        if (!(typeof value === 'string' && value.includes('正在分析'))) {\r\n          completedItems++;\r\n        }\r\n      });\r\n      \r\n      // 更新进度\r\n      if (totalItems > 0) {\r\n        analyzeProgress.value = Math.floor((completedItems / totalItems) * 100);\r\n      }\r\n      \r\n      // 检查是否还有\"正在分析\"的内容\r\n      const stillAnalyzing = Object.values(aiAnalysisData).some(\r\n        value => typeof value === 'string' && value.includes('正在分析')\r\n      );\r\n      \r\n      isAnalyzing.value = stillAnalyzing;\r\n      \r\n      if (stillAnalyzing) {\r\n        console.log('分析仍在进行中...', `完成度: ${analyzeProgress.value}%`);\r\n        return false;\r\n      } else {\r\n        console.log('分析已完成');\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  } catch (error) {\r\n    console.error('检查分析状态出错:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// 轮询检查分析状态\r\nconst pollAnalysisStatus = async (resultId) => {\r\n  let attempts = 0;\r\n  const maxAttempts = 30; // 最多轮询30次，约60秒\r\n  \r\n  // 启动模拟进度条\r\n  if (!analyzeTimer.value) {\r\n    let progress = analysisProgress.value || 0;\r\n    analyzeTimer.value = setInterval(() => {\r\n      if (progress < 95) { // 最多到95%，留5%给实际完成时\r\n        progress += Math.random() * 3;\r\n        if (progress > 95) progress = 95;\r\n        analysisProgress.value = Math.floor(progress);\r\n      }\r\n    }, 1000);\r\n  }\r\n  \r\n  // 检查分析状态\r\n  const checkAnalysisStatus = async (resultId) => {\r\n    try {\r\n      const response = await axios.get(`/api/bazi/result/${resultId}`);\r\n      if (response.data.code === 200) {\r\n        const data = response.data.data;\r\n        \r\n        // 更新AI分析结果\r\n        if (data.aiAnalysis) {\r\n          aiAnalysis.value = {\r\n            ...aiAnalysis.value,\r\n            ...data.aiAnalysis\r\n          };\r\n        }\r\n        \r\n        // 检查分析状态\r\n        const status = data.analysisStatus || 'completed';\r\n        const progress = data.analysisProgress || 0;\r\n        \r\n        // 更新状态和进度\r\n        analysisStatus.value = status;\r\n        analysisProgress.value = progress;\r\n        \r\n        // 检查是否完成\r\n        if (status === 'completed' || progress >= 100) {\r\n          return true;\r\n        }\r\n        \r\n        // 检查内容是否已生成（即使状态未更新）\r\n        const allGenerated = !Object.values(aiAnalysis.value).some(\r\n          value => typeof value === 'string' && value.includes('正在分析')\r\n        );\r\n        \r\n        return allGenerated;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      console.error('检查分析状态失败:', error);\r\n      return false;\r\n    }\r\n  };\r\n  \r\n  return new Promise((resolve) => {\r\n    const checkInterval = setInterval(async () => {\r\n      attempts++;\r\n      const isComplete = await checkAnalysisStatus(resultId);\r\n      \r\n      if (isComplete || attempts >= maxAttempts) {\r\n        clearInterval(checkInterval);\r\n        \r\n        // 清除模拟进度定时器\r\n        if (analyzeTimer.value) {\r\n          clearInterval(analyzeTimer.value);\r\n          analyzeTimer.value = null;\r\n        }\r\n        \r\n        if (isComplete) {\r\n          // 如果完成，确保进度显示100%\r\n          analysisProgress.value = 100;\r\n          setTimeout(() => {\r\n            analysisStatus.value = 'completed';\r\n          }, 1000); // 短暂显示100%后隐藏进度条\r\n        }\r\n        \r\n        await getBaziResult(); // 最后再获取一次完整结果\r\n        Toast.clear();\r\n        resolve(isComplete);\r\n      }\r\n    }, 2000); // 每2秒检查一次\r\n  });\r\n};\r\n\r\n// 重新加载八字数据\r\nconst reloadBaziData = async () => {\r\n  try {\r\n    Toast.loading({\r\n      message: '正在加载现有分析结果...',\r\n      duration: 0,\r\n      forbidClick: true\r\n    });\r\n    \r\n    const response = await axios.get(`/api/bazi/result/${resultId.value}`);\r\n    \r\n    if (response.data.code === 200) {\r\n      // 更新八字数据\r\n      if (response.data.data.baziChart) {\r\n        baziChart.value = response.data.data.baziChart;\r\n      }\r\n      \r\n      // 更新AI分析结果\r\n      if (response.data.data.aiAnalysis) {\r\n        aiAnalysis.value = response.data.data.aiAnalysis;\r\n      }\r\n      \r\n      // 检查分析状态和进度\r\n      analysisStatus.value = response.data.data.analysisStatus || 'completed';\r\n      analysisProgress.value = response.data.data.analysisProgress || 100;\r\n      \r\n      // 如果分析已完成但进度条未达到100%，强制设置为100%\r\n      if (analysisStatus.value === 'completed' && analysisProgress.value < 100) {\r\n        analysisProgress.value = 100;\r\n      }\r\n      \r\n      console.log('分析状态:', analysisStatus.value);\r\n      console.log('分析进度:', analysisProgress.value);\r\n      console.log('AI分析结果更新:', aiAnalysis.value);\r\n      \r\n      // 重新加载追问分析结果\r\n      console.log('重新加载追问分析结果...');\r\n      await loadFollowupResults();\r\n      \r\n      // 遍历所有已支付的追问选项，强制重新获取分析结果\r\n      const paidOptions = followupOptions.value.filter(option => option.paid);\r\n      if (paidOptions.length > 0) {\r\n        console.log('发现已支付的追问选项，强制重新获取:', paidOptions.map(o => o.id));\r\n        for (const option of paidOptions) {\r\n          await getFollowupAnalysis(option.id);\r\n        }\r\n      }\r\n      \r\n      Toast.success('数据刷新成功');\r\n    } else {\r\n      Toast.fail(response.data.message || '加载失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('重新加载失败:', error);\r\n    Toast.fail('加载失败: ' + (error.message || '未知错误'));\r\n  }\r\n};\r\n\r\n// 追问相关状态\r\nconst followupOptions = ref([\r\n  { id: 'marriage', name: '婚姻感情', selected: false, paid: false },\r\n  { id: 'career', name: '事业财运', selected: false, paid: false },\r\n  { id: 'children', name: '子女情况', selected: false, paid: false },\r\n  { id: 'parents', name: '父母情况', selected: false, paid: false },\r\n  { id: 'health', name: '身体健康', selected: false, paid: false },\r\n  { id: 'education', name: '学业', selected: false, paid: false },\r\n  { id: 'relationship', name: '人际关系', selected: false, paid: false },\r\n  { id: 'fiveYears', name: '近五年运势', selected: false, paid: false }\r\n]);\r\n\r\nconst currentFollowup = ref(null);\r\nconst showFollowupDialog = ref(false);\r\nconst followupAnalysis = ref({});\r\nconst isLoadingFollowup = ref(false);\r\n\r\n// 选择追问选项\r\nconst selectFollowupOption = async (option) => {\r\n  // 设置当前选择的追问选项\r\n  currentFollowup.value = option;\r\n  \r\n  // 如果已经支付过，直接显示结果\r\n  if (option.paid) {\r\n    console.log(`选择已支付的追问: ${option.id}`);\r\n    \r\n    // 如果已有分析结果，直接显示\r\n    if (followupAnalysis.value[option.id]) {\r\n      console.log(`已有${option.id}分析结果，直接显示`);\r\n      return;\r\n    }\r\n    \r\n    // 如果没有分析结果，尝试获取\r\n    console.log(`尝试获取${option.id}分析结果`);\r\n    Toast.loading({\r\n      message: '正在加载分析结果...',\r\n      duration: 0\r\n    });\r\n    \r\n    try {\r\n      // 尝试获取分析结果\r\n      const analysis = await getFollowupAnalysis(option.id);\r\n      if (analysis && typeof analysis === 'string' && analysis.length > 0) {\r\n        Toast.success('加载成功');\r\n        console.log(`成功获取${option.id}分析结果，长度: ${analysis.length}`);\r\n      } else {\r\n        Toast.fail('分析结果尚未生成完成，请稍后再试');\r\n        console.warn(`获取${option.id}分析结果失败或为空`);\r\n      }\r\n    } catch (error) {\r\n      console.error(`获取${option.id}分析失败:`, error);\r\n      Toast.fail('获取分析失败，请重试');\r\n    } finally {\r\n      Toast.clear();\r\n    }\r\n    \r\n    return;\r\n  }\r\n  \r\n  // 否则显示支付对话框\r\n  showFollowupDialog.value = true;\r\n};\r\n\r\n// 支付追问费用\r\nconst payForFollowup = async () => {\r\n  if (!currentFollowup.value) return;\r\n  \r\n  try {\r\n    isLoadingFollowup.value = true;\r\n    \r\n    // 第一步：创建订单\r\n    Toast.loading({\r\n      message: '正在创建订单...',\r\n      forbidClick: true,\r\n      duration: 0\r\n    });\r\n    \r\n    // 获取URL参数\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    \r\n    // 创建追问订单\r\n    const orderResponse = await axios.post('/api/order/create/followup', {\r\n      resultId: resultId.value,\r\n      area: currentFollowup.value.id\r\n    });\r\n    \r\n    if (orderResponse.data.code === 200) {\r\n      const followupOrderId = orderResponse.data.data.orderId;\r\n      console.log('追问订单创建成功:', followupOrderId);\r\n      \r\n      // 调用微信支付\r\n      Toast.loading({\r\n        message: '正在准备支付...',\r\n        forbidClick: true,\r\n        duration: 0\r\n      });\r\n      \r\n      // 获取微信支付参数\r\n      const paymentResponse = await axios.post('/api/order/payment', {\r\n        orderId: followupOrderId,\r\n        paymentMethod: 'wechat',\r\n        deviceType: 'pc',\r\n        returnQrCode: true // 返回二维码图片\r\n      });\r\n      \r\n      if (paymentResponse.data.code === 200) {\r\n        Toast.clear();\r\n        \r\n        // 显示微信支付二维码\r\n        const paymentData = paymentResponse.data.data;\r\n        const qrCodeImage = paymentData.qr_image;\r\n        \r\n        Dialog.confirm({\r\n          title: '微信支付',\r\n          message: `\r\n            <div style=\"text-align: center\">\r\n              <p>请使用微信扫描下方二维码支付</p>\r\n              <p>金额: ￥9.9</p>\r\n              <img src=\"${qrCodeImage}\" style=\"width: 200px; height: 200px\" />\r\n              <p style=\"font-size: 12px; color: #999\">付款完成后，请点击\"已完成支付\"按钮</p>\r\n            </div>\r\n          `,\r\n          messageAlign: 'center',\r\n          confirmButtonText: '已完成支付',\r\n          cancelButtonText: '取消',\r\n          showCancelButton: true,\r\n        })\r\n        .then(async () => {\r\n          // 用户点击\"已完成支付\"\r\n          Toast.loading({\r\n            message: '正在确认支付结果...',\r\n            forbidClick: true,\r\n            duration: 0\r\n          });\r\n          \r\n          // 轮询检查支付结果\r\n          let checkCount = 0;\r\n          const maxChecks = 10;\r\n          let isPaid = false;\r\n          \r\n          while (checkCount < maxChecks && !isPaid) {\r\n            try {\r\n              const statusResponse = await axios.get(`/api/order/status/${followupOrderId}`);\r\n              \r\n              if (statusResponse.data.code === 200) {\r\n                const orderStatus = statusResponse.data.data.status;\r\n                \r\n                if (orderStatus === 'paid') {\r\n                  isPaid = true;\r\n                  \r\n                  // 如果有返回新的resultId，更新它\r\n                  if (statusResponse.data.data.resultId) {\r\n                    resultId.value = statusResponse.data.data.resultId;\r\n                    localStorage.setItem('resultId', statusResponse.data.data.resultId);\r\n                  }\r\n                  \r\n                  break;\r\n                }\r\n              }\r\n            } catch (error) {\r\n              console.error('检查支付状态出错:', error);\r\n            }\r\n            \r\n            // 等待2秒后再次检查\r\n            await new Promise(resolve => setTimeout(resolve, 2000));\r\n            checkCount++;\r\n          }\r\n          \r\n          Toast.clear();\r\n          \r\n          if (isPaid) {\r\n            // 支付成功\r\n            Toast.success('支付成功');\r\n            \r\n            // 更新UI，将当前追问项标记为已付费\r\n            const index = followupOptions.value.findIndex(o => o.id === currentFollowup.value.id);\r\n            if (index !== -1) {\r\n              followupOptions.value[index].paid = true;\r\n              followupOptions.value = [...followupOptions.value]; // 强制Vue更新\r\n            }\r\n            \r\n            // 加载分析结果\r\n            Toast.loading({\r\n              message: '正在生成分析结果，这可能需要30-60秒...',\r\n              forbidClick: true,\r\n              duration: 0\r\n            });\r\n            \r\n            // 轮询检查分析结果状态\r\n            const area = currentFollowup.value.id;\r\n            await pollFollowupStatus();\r\n          } else {\r\n            // 支付未完成\r\n            Toast.fail('未检测到支付完成，请稍后再试');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          // 用户取消支付\r\n          Toast.clear();\r\n          Toast.info('已取消支付');\r\n        });\r\n      } else {\r\n        Toast.clear();\r\n        Toast.fail(paymentResponse.data.message || '获取支付参数失败');\r\n      }\r\n    } else {\r\n      Toast.fail('创建订单失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('追问支付过程出错:', error);\r\n    Toast.fail('处理失败，请重试');\r\n  } finally {\r\n    isLoadingFollowup.value = false;\r\n  }\r\n};\r\n\r\n// 自定义轮询检查追问分析状态\r\nconst pollFollowupStatus = async () => {\r\n  const area = currentFollowup.value.id;\r\n  console.log(`开始轮询追问分析状态: ${area}`);\r\n  \r\n  // 开始计时\r\n  const startTime = new Date().getTime();\r\n  const timeoutMs = 120000; // 120秒超时\r\n  let attempts = 0;\r\n  const maxAttempts = 60; // 最多等待120秒（60次 * 2秒）\r\n  let isComplete = false;\r\n  \r\n  while (attempts < maxAttempts && !isComplete) {\r\n    attempts++;\r\n    try {\r\n      // 等待2秒\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      \r\n      // 检查是否超时\r\n      const currentTime = new Date().getTime();\r\n      if (currentTime - startTime > timeoutMs) {\r\n        console.warn(`轮询追问分析状态超时: ${area}`);\r\n        break;\r\n      }\r\n      \r\n      // 检查追问分析结果\r\n      console.log(`尝试第${attempts}次获取追问分析: ${area}`);\r\n      const response = await axios.get(`/api/bazi/followup/${resultId.value}/${area}`);\r\n      \r\n      if (response.data.code === 200 && response.data.data && response.data.data.analysis) {\r\n        // 检查分析内容是否为\"正在分析\"\r\n        const analysis = response.data.data.analysis;\r\n        if (typeof analysis === 'string' && !analysis.includes('正在分析')) {\r\n          console.log(`成功获取追问分析结果: ${area}`);\r\n          isComplete = true;\r\n          followupAnalysis.value[area] = analysis;\r\n          break;\r\n        } else {\r\n          console.log(`追问分析结果还在生成中: ${area}`);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // 只有非404错误才打印详细信息\r\n      if (!error.response || error.response.status !== 404) {\r\n        console.error('检查追问分析状态出错:', error);\r\n      }\r\n      \r\n      // 如果遇到404错误，表示追问分析尚未创建完毕\r\n      if (error.response && error.response.status === 404) {\r\n        console.log('追问分析尚未创建完毕，继续等待...');\r\n      } else if (attempts >= maxAttempts / 2) {\r\n        // 如果尝试次数超过一半且仍然失败，不要退出轮询，但记录错误\r\n        console.warn(`获取分析数据失败(${attempts}/${maxAttempts})，继续尝试...`);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // 无论是否完成，都尝试获取最终结果\r\n  console.log(`轮询完成，最终尝试获取追问分析: ${area}`);\r\n  try {\r\n    const finalResult = await getFollowupAnalysis(area);\r\n    console.log(`最终获取追问分析结果: ${finalResult ? '成功' : '失败'}`);\r\n    \r\n    // 更新UI\r\n    Toast.clear();\r\n    if (finalResult) {\r\n      Toast.success('分析已完成');\r\n      \r\n      // 支付成功且分析完成后，切换到AI分析结果标签页显示结果\r\n      activeTab.value = 1; // 切换到AI分析结果标签\r\n      \r\n      // 滚动到相应分析部分\r\n      setTimeout(() => {\r\n        const sectionMap = {\r\n          'relationship': '婚姻感情',\r\n          'marriage': '婚姻感情',\r\n          'career': '事业财运',\r\n          'work': '事业财运',\r\n          'money': '事业财运',\r\n          'wealth': '事业财运',\r\n          'children': '子女情况',\r\n          'family': '子女情况',\r\n          'parents': '父母情况',\r\n          'health': '身体健康',\r\n          'education': '学业',\r\n          'study': '学业',\r\n          'social': '人际关系',\r\n          'friends': '人际关系',\r\n          'future': '近五年运势',\r\n          'fiveYears': '近五年运势'\r\n        };\r\n        \r\n        const targetTitle = sectionMap[currentFollowup.value.id];\r\n        if (targetTitle) {\r\n          // 查找并滚动到对应的分析部分\r\n          const sections = document.querySelectorAll('.analysis-section h3');\r\n          for (let i = 0; i < sections.length; i++) {\r\n            if (sections[i].textContent.includes(targetTitle)) {\r\n              sections[i].scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n              \r\n              // 高亮显示该部分\r\n              const section = sections[i].parentElement;\r\n              section.classList.add('highlight-section');\r\n              setTimeout(() => {\r\n                section.classList.remove('highlight-section');\r\n              }, 3000);\r\n              \r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }, 500);\r\n    } else {\r\n      Toast.success('正在生成分析，请稍后刷新查看');\r\n    }\r\n    \r\n    showFollowupDialog.value = false;\r\n    \r\n    return finalResult;\r\n  } catch (error) {\r\n    console.error('获取最终追问分析结果失败:', error);\r\n    Toast.clear();\r\n    Toast.fail('分析生成失败，请稍后刷新页面');\r\n    \r\n    // 如果分析结果仍然不可用，显示友好的错误信息\r\n    followupAnalysis.value[area] = \"分析正在处理中，请稍后刷新页面查看。\";\r\n    return null;\r\n  }\r\n};\r\n\r\n// 获取追问分析结果\r\nconst getFollowupAnalysis = async (area) => {\r\n  loading.value = true;\r\n  try {\r\n    console.log(`开始获取[${area}]追问分析，结果ID: ${resultId.value}`);\r\n    const response = await axios.get(`/api/bazi/followup/${resultId.value}/${area}`);\r\n    \r\n    if (response.data.code === 200) {\r\n      console.log('获取追问分析成功，响应数据:', response.data);\r\n      console.log('响应data字段详情:', JSON.stringify(response.data.data));\r\n      \r\n      // 处理分析结果为null或空的情况\r\n      if (!response.data.data) {\r\n        console.warn(`追问分析结果data为空: ${area}`);\r\n        const defaultMessage = `${followupOptions.value.find(o => o.id === area)?.name || area}分析正在生成中，请稍后刷新页面查看。`;\r\n        followupAnalysis.value[area] = defaultMessage;\r\n        return defaultMessage;\r\n      }\r\n      \r\n      // 提取分析内容，处理不同的响应格式\r\n      let analysisContent = null;\r\n      \r\n      if (response.data.data.analysis) {\r\n        // 标准格式：{area, analysis}\r\n        analysisContent = response.data.data.analysis;\r\n        console.log(`获取到标准格式分析结果, 类型: ${typeof analysisContent}, 长度: ${analysisContent ? analysisContent.length : 0}`);\r\n      } else if (typeof response.data.data === 'string') {\r\n        // 直接字符串格式\r\n        analysisContent = response.data.data;\r\n        console.log(`获取到字符串格式分析结果, 长度: ${analysisContent.length}`);\r\n      } else if (response.data.data[area]) {\r\n        // 对象格式：{area1: \"分析1\", area2: \"分析2\"}\r\n        analysisContent = response.data.data[area];\r\n        console.log(`获取到对象格式分析结果, 长度: ${analysisContent ? analysisContent.length : 0}`);\r\n      } else {\r\n        // 尝试遍历所有属性，看是否有匹配的内容\r\n        console.log('尝试查找匹配内容，data的所有键:', Object.keys(response.data.data));\r\n        for (const key in response.data.data) {\r\n          if (key.toLowerCase() === area.toLowerCase() || \r\n             (area === 'fiveYears' && key === 'future') ||\r\n             (area === 'future' && key === 'fiveYears')) {\r\n            analysisContent = response.data.data[key];\r\n            console.log(`找到匹配的键[${key}]，内容长度: ${analysisContent ? analysisContent.length : 0}`);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // 检查分析结果是否为null或空\r\n      if (!analysisContent) {\r\n        console.warn(`无法从响应中提取有效分析内容: ${area}`);\r\n        const defaultMessage = `${followupOptions.value.find(o => o.id === area)?.name || area}分析尚未生成，请稍后刷新页面查看。`;\r\n        followupAnalysis.value[area] = defaultMessage;\r\n        return defaultMessage;\r\n      }\r\n      \r\n      // 检查分析结果是否是空字符串\r\n      if (typeof analysisContent === 'string' && analysisContent.trim() === '') {\r\n        console.warn(`追问分析结果为空字符串: ${area}`);\r\n        const defaultMessage = `${followupOptions.value.find(o => o.id === area)?.name || area}分析正在生成中，请稍后刷新页面查看。`;\r\n        followupAnalysis.value[area] = defaultMessage;\r\n        return defaultMessage;\r\n      }\r\n      \r\n      // 记录有效的分析结果\r\n      console.log(`获取到有效的[${area}]分析结果，长度: ${analysisContent.length}`);\r\n      \r\n      // 存储并返回分析结果\r\n      followupAnalysis.value[area] = analysisContent;\r\n      return analysisContent;\r\n    } else {\r\n      console.error('获取追问分析失败:', response.data);\r\n      const errorMessage = `获取分析失败: ${response.data.message || '未知错误'}`;\r\n      followupAnalysis.value[area] = errorMessage;\r\n      return errorMessage;\r\n    }\r\n  } catch (error) {\r\n    console.error('获取追问分析出错:', error);\r\n    const errorMessage = `获取分析出错: ${error.message || '请稍后重试'}`;\r\n    followupAnalysis.value[area] = errorMessage;\r\n    return errorMessage;\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// 检查已支付的追问\r\nconst checkPaidFollowups = async () => {\r\n  try {\r\n    const response = await axios.get(`/api/bazi/followup/list/${resultId.value}`);\r\n    \r\n    if (response.data.code === 200 && response.data.data.followups) {\r\n      const paidFollowups = response.data.data.followups;\r\n      \r\n      // 更新已支付的追问选项\r\n      followupOptions.value = followupOptions.value.map(option => {\r\n        const isPaid = paidFollowups.some(f => f.area === option.id);\r\n        if (isPaid) {\r\n          // 如果已支付，获取分析结果\r\n          getFollowupAnalysis(option.id);\r\n        }\r\n        return { ...option, paid: isPaid };\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error('检查已支付追问出错:', error);\r\n  }\r\n};\r\n\r\n// 获取八字分析结果\r\nconst getBaziResult = async () => {\r\n  loading.value = true;\r\n  error.value = '';\r\n  \r\n  // 添加重试机制\r\n  let retryCount = 0;\r\n  const maxRetries = 3;\r\n  let success = false;\r\n  \r\n  while (retryCount < maxRetries && !success) {\r\n    try {\r\n      console.log(`获取八字分析结果 (尝试 ${retryCount + 1}/${maxRetries})，ID: ${resultId.value}`);\r\n      const response = await axios.get(`/api/bazi/result/${resultId.value}`);\r\n      \r\n      if (response.data.code === 200) {\r\n        // 将结果数据赋值给响应变量\r\n        const result = response.data.data;\r\n        \r\n        // 更新八字图数据\r\n        if (result.baziChart) {\r\n          baziChart.value = result.baziChart;\r\n          \r\n          // 计算年龄\r\n          if (result.baziChart.birthDate) {\r\n            const birthYear = parseInt(result.baziChart.birthDate.split('-')[0]);\r\n            const currentYear = new Date().getFullYear();\r\n            userAge.value = currentYear - birthYear;\r\n            console.log('用户年龄:', userAge.value);\r\n          }\r\n        }\r\n        \r\n        // 更新AI分析结果\r\n        if (result.aiAnalysis) {\r\n          aiAnalysis.value = result.aiAnalysis;\r\n        }\r\n        \r\n        // 更新用户信息\r\n        if (result.gender) {\r\n          userGender.value = result.gender === 'male' ? '男' : '女';\r\n        }\r\n        \r\n        if (result.birthTime) {\r\n          userBirthTime.value = result.birthTime;\r\n        }\r\n        \r\n        // 更新分析状态\r\n        analysisStatus.value = result.analysisStatus || 'completed';\r\n        analysisProgress.value = result.analysisProgress || 100;\r\n        \r\n        // 更新订单ID\r\n        orderId.value = result.orderId || '';\r\n        \r\n        // 标记为成功\r\n        success = true;\r\n        loading.value = false;\r\n        \r\n        // 检查是否有神煞数据\r\n        if (result.baziChart && result.baziChart.shenSha) {\r\n          shenShaData.value = result.baziChart.shenSha;\r\n        }\r\n        \r\n        // 检查是否有大运数据\r\n        if (result.baziChart && result.baziChart.daYun) {\r\n          daYunData.value = result.baziChart.daYun;\r\n        }\r\n        \r\n        // 检查是否有流年数据\r\n        if (result.baziChart && result.baziChart.flowingYears) {\r\n          flowingYearsData.value = result.baziChart.flowingYears;\r\n        }\r\n        \r\n        return true;\r\n      } else {\r\n        console.error('获取八字分析结果失败:', response.data.message);\r\n        error.value = response.data.message || '获取分析结果失败';\r\n        retryCount++;\r\n        await new Promise(resolve => setTimeout(resolve, 1000)); // 等待1秒后重试\r\n      }\r\n    } catch (e) {\r\n      console.error('获取八字分析结果出错:', e);\r\n      error.value = e.message || '获取分析结果出错';\r\n      \r\n      // 如果是404错误，可能是结果记录还未创建，尝试手动更新订单状态\r\n      if (e.response && e.response.status === 404) {\r\n        console.log('结果记录不存在，尝试手动更新订单状态');\r\n        \r\n        // 从resultId中提取orderId\r\n        let orderId = '';\r\n        if (resultId.value.startsWith('RES')) {\r\n          orderId = 'BZ' + resultId.value.substring(3);\r\n          console.log('从resultId提取的orderId:', orderId);\r\n          \r\n          try {\r\n            // 尝试手动更新订单状态\r\n            const manualResponse = await axios.get(`/api/order/manual_update/${orderId}`);\r\n            console.log('手动更新响应:', manualResponse.data);\r\n            \r\n            if (manualResponse.data.code === 200) {\r\n              console.log('手动更新成功，等待2秒后重试获取结果');\r\n              // 等待2秒后重试，给后端时间创建记录\r\n              await new Promise(resolve => setTimeout(resolve, 2000));\r\n            }\r\n          } catch (manualError) {\r\n            console.error('手动更新失败:', manualError);\r\n          }\r\n        }\r\n      }\r\n      \r\n      retryCount++;\r\n      await new Promise(resolve => setTimeout(resolve, 1000)); // 等待1秒后重试\r\n    }\r\n  }\r\n  \r\n  if (!success) {\r\n    loading.value = false;\r\n    \r\n    // 如果所有重试都失败，显示手动刷新按钮\r\n    showManualRefresh.value = true;\r\n    \r\n    return false;\r\n  }\r\n  \r\n  return true;\r\n};\r\n\r\n// 添加缺失的函数\r\n// 初始化追问选项\r\nconst initFollowupOptions = () => {\r\n  // 根据用户年龄调整追问选项\r\n  if (userAge.value !== null) {\r\n    if (userAge.value < 6) {\r\n      // 为婴幼儿调整选项\r\n      followupOptions.value = followupOptions.value.filter(option => \r\n        ['health', 'personality', 'education', 'parents'].includes(option.id)\r\n      );\r\n    } else if (userAge.value < 18) {\r\n      // 为未成年人调整选项\r\n      followupOptions.value = followupOptions.value.filter(option => \r\n        !['marriage', 'career'].includes(option.id)\r\n      );\r\n    }\r\n  }\r\n  \r\n  console.log('初始化追问选项完成:', followupOptions.value);\r\n};\r\n\r\n// 加载已支付的追问分析结果\r\nconst loadFollowupResults = async () => {\r\n  try {\r\n    // 检查是否有结果ID\r\n    if (!resultId.value) {\r\n      console.warn('缺少结果ID，无法加载追问分析');\r\n      return;\r\n    }\r\n    \r\n    console.log('开始加载追问分析结果列表:', resultId.value);\r\n    \r\n    // 调用API获取已支付的追问列表\r\n    const response = await axios.get(`/api/bazi/followup/list/${resultId.value}`);\r\n    \r\n    if (response.data.code === 200 && response.data.data.followups) {\r\n      const paidFollowups = response.data.data.followups;\r\n      console.log('获取到的追问列表:', paidFollowups);\r\n      \r\n      // 更新已支付的追问选项\r\n      followupOptions.value = followupOptions.value.map(option => {\r\n        // 检查是否有匹配的追问分析\r\n        const isPaid = paidFollowups.some(f => {\r\n          // 尝试多种匹配方式\r\n          if (typeof f === 'object') {\r\n            // 对象格式：检查area字段\r\n            return f.area === option.id;\r\n          } else if (typeof f === 'string') {\r\n            // 字符串格式：直接比较\r\n            return f === option.id;\r\n          }\r\n          return false;\r\n        });\r\n        \r\n        if (isPaid) {\r\n          console.log(`发现已支付的追问: ${option.id}`);\r\n          // 如果已支付，获取分析结果\r\n          getFollowupAnalysis(option.id);\r\n        }\r\n        \r\n        return { ...option, paid: isPaid };\r\n      });\r\n      \r\n      console.log('更新后的追问选项:', followupOptions.value);\r\n    } else {\r\n      console.warn('获取追问列表失败或返回空列表');\r\n    }\r\n  } catch (error) {\r\n    console.error('加载追问分析结果出错:', error);\r\n    // 出错时不显示错误提示，静默失败\r\n  }\r\n};\r\n\r\n// 解析八字数据\r\nconst parseBaZiData = (data) => {\r\n  if (!data) return null;\r\n  \r\n  return {\r\n    yearPillar: data.yearPillar || { heavenlyStem: '未知', earthlyBranch: '未知' },\r\n    monthPillar: data.monthPillar || { heavenlyStem: '未知', earthlyBranch: '未知' },\r\n    dayPillar: data.dayPillar || { heavenlyStem: '未知', earthlyBranch: '未知' },\r\n    hourPillar: data.hourPillar || { heavenlyStem: '未知', earthlyBranch: '未知' },\r\n    shenSha: data.shenSha || {\r\n      dayChong: '未知',\r\n      zhiShen: '未知',\r\n      pengZuGan: '未知',\r\n      pengZuZhi: '未知',\r\n      xiShen: '未知',\r\n      fuShen: '未知',\r\n      caiShen: '未知',\r\n      benMing: [],\r\n      yearGan: [],\r\n      yearZhi: [],\r\n      dayGan: [],\r\n      dayZhi: []\r\n    },\r\n    daYun: data.daYun || {\r\n      startAge: 0,\r\n      startYear: 0,\r\n      isForward: true,\r\n      daYunList: []\r\n    },\r\n    flowingYears: data.flowingYears || []\r\n  };\r\n};\r\n\r\n// 添加分析状态检测函数\r\nconst isAnalysisItemLoading = (key) => {\r\n  if (!aiAnalysis.value) return true;\r\n  const value = aiAnalysis.value[key];\r\n  return !value || value === '暂无' || (value.includes && value.includes('正在分析'));\r\n};\r\n\r\n// 清理组件时移除定时器\r\nonUnmounted(() => {\r\n  if (analyzeTimer.value) {\r\n    clearInterval(analyzeTimer.value);\r\n    analyzeTimer.value = null;\r\n  }\r\n});\r\n\r\n// 刷新特定追问的分析结果\r\nconst reloadFollowupAnalysis = async (area) => {\r\n  if (!area) return;\r\n  \r\n  try {\r\n    isLoadingFollowup.value = true;\r\n    Toast.loading({\r\n      message: '正在刷新分析结果...',\r\n      duration: 0\r\n    });\r\n    \r\n    console.log(`刷新${area}分析结果`);\r\n    const analysis = await getFollowupAnalysis(area);\r\n    \r\n    if (analysis && typeof analysis === 'string' && analysis.length > 0) {\r\n      Toast.success('刷新成功');\r\n      console.log(`成功刷新${area}分析结果，长度: ${analysis.length}`);\r\n    } else {\r\n      Toast.fail('分析结果尚未生成完成');\r\n      console.warn(`刷新${area}分析结果失败或为空`);\r\n    }\r\n  } catch (error) {\r\n    console.error(`刷新${area}分析失败:`, error);\r\n    Toast.fail('刷新失败，请重试');\r\n  } finally {\r\n    isLoadingFollowup.value = false;\r\n    Toast.clear();\r\n  }\r\n};\r\n\r\n// 在data部分添加showManualRefresh变量\r\nconst showManualRefresh = ref(false);\r\n\r\n// 添加手动刷新函数\r\nconst manualRefresh = async () => {\r\n  showManualRefresh.value = false;\r\n  Toast.loading({\r\n    message: '正在重新获取分析结果...',\r\n    duration: 0,\r\n    forbidClick: true\r\n  });\r\n  \r\n  // 从resultId中提取orderId\r\n  let orderId = '';\r\n  if (resultId.value.startsWith('RES')) {\r\n    orderId = 'BZ' + resultId.value.substring(3);\r\n    console.log('从resultId提取的orderId:', orderId);\r\n    \r\n    try {\r\n      // 尝试手动更新订单状态\r\n      const manualResponse = await axios.get(`/api/order/manual_update/${orderId}`);\r\n      console.log('手动更新响应:', manualResponse.data);\r\n      \r\n      if (manualResponse.data.code === 200) {\r\n        console.log('手动更新成功，等待2秒后重试获取结果');\r\n        // 等待2秒后重试，给后端时间创建记录\r\n        await new Promise(resolve => setTimeout(resolve, 2000));\r\n        \r\n        // 重新获取结果\r\n        const success = await getBaziResult();\r\n        if (success) {\r\n          Toast.success('分析结果加载成功');\r\n        } else {\r\n          Toast.fail('获取分析结果失败，请稍后再试');\r\n        }\r\n      } else {\r\n        Toast.fail('手动更新失败: ' + (manualResponse.data.message || '未知错误'));\r\n      }\r\n    } catch (error) {\r\n      console.error('手动更新失败:', error);\r\n      Toast.fail('手动更新失败，请稍后再试');\r\n    }\r\n  } else {\r\n    // 直接重试获取结果\r\n    const success = await getBaziResult();\r\n    if (success) {\r\n      Toast.success('分析结果加载成功');\r\n    } else {\r\n      Toast.fail('获取分析结果失败，请稍后再试');\r\n    }\r\n  }\r\n  \r\n  Toast.clear();\r\n};\r\n\r\n// 在data部分添加error变量\r\nconst error = ref('');\r\n\r\n// 添加所有需要的变量定义\r\nconst baziChart = ref({});\r\nconst analysisStatus = ref('completed');\r\nconst analysisProgress = ref(100);\r\nconst orderId = ref('');\r\nconst userGender = ref('');\r\nconst userBirthTime = ref('');\r\nconst shenShaData = ref({});\r\nconst daYunData = ref({});\r\nconst flowingYearsData = ref([]);\r\n</script>\r\n\r\n<style scoped>\r\n.result-container {\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.result-header {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n  background-color: #f2f3f5;\r\n}\r\n\r\n.result-header h2 {\r\n  margin: 0;\r\n  font-size: 20px;\r\n  color: #323233;\r\n}\r\n\r\n.result-header p {\r\n  margin: 10px 0 0;\r\n  font-size: 14px;\r\n  color: #969799;\r\n}\r\n\r\n.bazi-chart {\r\n  padding: 20px 16px;\r\n}\r\n\r\n.bazi-chart h3 {\r\n  margin: 20px 0 10px;\r\n  color: #323233;\r\n}\r\n\r\n.four-pillars {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin: 20px 0;\r\n}\r\n\r\n.pillar {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background: #f5f7fa;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n  width: 80px;\r\n}\r\n\r\n.stem, .branch {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin: 4px 0;\r\n  border-radius: 4px;\r\n}\r\n\r\n.stem {\r\n  background: #1989fa;\r\n  color: white;\r\n}\r\n\r\n.branch {\r\n  background: #07c160;\r\n  color: white;\r\n}\r\n\r\n.label {\r\n  font-size: 12px;\r\n  color: #646566;\r\n  margin-top: 4px;\r\n}\r\n\r\n.nayin, .shishen, .wangshuai {\r\n  font-size: 12px;\r\n  color: #323233;\r\n  margin-top: 4px;\r\n}\r\n\r\n.five-elements {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 10px 0;\r\n}\r\n\r\n.element {\r\n  text-align: center;\r\n  flex: 1;\r\n}\r\n\r\n.element-name {\r\n  font-size: 14px;\r\n  color: #323233;\r\n}\r\n\r\n.element-value {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #1989fa;\r\n  margin-top: 5px;\r\n}\r\n\r\n.flowing-years {\r\n  margin: 20px 0;\r\n}\r\n\r\n.ai-analysis {\r\n  padding: 20px 16px;\r\n}\r\n\r\n.analysis-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.analysis-section h3 {\r\n  margin: 0 0 10px;\r\n  color: #323233;\r\n}\r\n\r\n.analysis-section p {\r\n  margin: 0;\r\n  font-size: 14px;\r\n  color: #646566;\r\n  line-height: 1.6;\r\n}\r\n\r\n.action-buttons {\r\n  padding: 20px 16px;\r\n}\r\n\r\n.age-notice {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.shen-sha-info {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.da-yun-info {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.qi-yun-info {\r\n  margin: 0 0 10px;\r\n  font-size: 14px;\r\n  color: #646566;\r\n}\r\n\r\n.da-yun-table {\r\n  margin-top: 10px;\r\n}\r\n\r\n.placeholder {\r\n  background-color: #f2f3f5;\r\n  color: #969799;\r\n}\r\n\r\n/* 追问部分样式 */\r\n.followup-section {\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n  color: #333;\r\n}\r\n\r\n.section-desc {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.followup-options {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 12px;\r\n}\r\n\r\n.followup-option {\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.followup-option:hover {\r\n  background-color: #e8f0fe;\r\n}\r\n\r\n.followup-option.paid {\r\n  background-color: #e6f7ff;\r\n  border: 1px solid #91d5ff;\r\n}\r\n\r\n.option-content {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.option-name {\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n}\r\n\r\n.option-status {\r\n  font-size: 13px;\r\n  color: #ff6b00;\r\n}\r\n\r\n.followup-option.paid .option-status {\r\n  color: #52c41a;\r\n}\r\n\r\n.followup-result {\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n  border-left: 4px solid #1989fa;\r\n}\r\n\r\n.followup-result h3 {\r\n  font-size: 16px;\r\n  margin-bottom: 10px;\r\n  color: #333;\r\n}\r\n\r\n.analysis-content {\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  color: #333;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.followup-dialog-content {\r\n  padding: 15px;\r\n  text-align: center;\r\n}\r\n\r\n/* 添加表格样式 */\r\n.custom-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n  margin: 10px 0;\r\n  background-color: #fff;\r\n  color: #323233;\r\n  font-size: 14px;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  padding: 8px 12px;\r\n  border-bottom: 1px solid #ebedf0;\r\n  text-align: center;\r\n}\r\n\r\n.custom-table th {\r\n  font-weight: 500;\r\n  background-color: #f7f8fa;\r\n  color: #646566;\r\n}\r\n\r\n.custom-table tr:hover {\r\n  background-color: #f2f3f5;\r\n}\r\n\r\n/* 添加分析状态相关样式 */\r\n.analysis-progress-notice {\r\n  margin: 10px 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.analysis-progress {\r\n  width: 100%;\r\n}\r\n\r\n.analysis-progress p {\r\n  margin-bottom: 10px;\r\n  font-size: 14px;\r\n  color: #1989fa;\r\n}\r\n\r\n.loading-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px 0;\r\n  background-color: #f7f8fa;\r\n  border-radius: 8px;\r\n  margin: 10px 0;\r\n}\r\n\r\n.enhanced-analysis {\r\n  margin-bottom: 10px;\r\n  padding: 10px;\r\n  border-left: 3px solid #1989fa;\r\n  background-color: #f8f9ff;\r\n  border-radius: 4px;\r\n}\r\n\r\n.enhanced-analysis p {\r\n  color: #333;\r\n  line-height: 1.6;\r\n  white-space: pre-wrap;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.analysis-source {\r\n  text-align: right;\r\n  margin-top: 8px;\r\n}\r\n\r\n/* 高亮效果 */\r\n@keyframes highlight-pulse {\r\n  0% { box-shadow: 0 0 0 0 rgba(25, 137, 250, 0.7); }\r\n  70% { box-shadow: 0 0 0 10px rgba(25, 137, 250, 0); }\r\n  100% { box-shadow: 0 0 0 0 rgba(25, 137, 250, 0); }\r\n}\r\n\r\n.highlight-section {\r\n  animation: highlight-pulse 1.5s ease-in-out;\r\n  background-color: rgba(25, 137, 250, 0.08);\r\n  border-radius: 8px;\r\n  transition: background-color 0.5s ease;\r\n}\r\n\r\n.markdown-content {\r\n  white-space: pre-wrap;\r\n  line-height: 1.6;\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n\r\n.markdown-content h1, \r\n.markdown-content h2, \r\n.markdown-content h3, \r\n.markdown-content h4, \r\n.markdown-content h5, \r\n.markdown-content h6 {\r\n  margin-top: 1em;\r\n  margin-bottom: 0.5em;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.markdown-content h1 {\r\n  font-size: 1.8em;\r\n}\r\n\r\n.markdown-content h2 {\r\n  font-size: 1.5em;\r\n}\r\n\r\n.markdown-content h3 {\r\n  font-size: 1.3em;\r\n}\r\n\r\n.markdown-content h4 {\r\n  font-size: 1.1em;\r\n}\r\n\r\n.markdown-content p {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.markdown-content ul, \r\n.markdown-content ol {\r\n  margin-left: 2em;\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.markdown-content ul {\r\n  list-style-type: disc;\r\n}\r\n\r\n.markdown-content ol {\r\n  list-style-type: decimal;\r\n}\r\n\r\n.markdown-content li {\r\n  margin-bottom: 0.5em;\r\n}\r\n\r\n.markdown-content strong {\r\n  font-weight: bold;\r\n}\r\n\r\n.markdown-content em {\r\n  font-style: italic;\r\n}\r\n\r\n.markdown-content blockquote {\r\n  border-left: 4px solid #ddd;\r\n  padding-left: 1em;\r\n  margin-left: 0;\r\n  color: #666;\r\n}\r\n\r\n.markdown-content hr {\r\n  height: 1px;\r\n  background-color: #ddd;\r\n  border: none;\r\n  margin: 1.5em 0;\r\n}\r\n\r\n/* 添加手动刷新按钮样式 */\r\n.manual-refresh-container {\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n.refresh-tip {\r\n  margin-top: 10px;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
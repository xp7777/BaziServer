{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"payment-container\"\n};\nconst _hoisted_2 = {\n  class: \"payment-method\"\n};\nconst _hoisted_3 = {\n  class: \"payment-method\"\n};\nconst _hoisted_4 = {\n  class: \"payment-action\"\n};\nconst _hoisted_5 = {\n  class: \"qrcode-container\"\n};\nconst _hoisted_6 = {\n  class: \"qrcode\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  key: 1,\n  class: \"qrcode-placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  const _component_van_tag = _resolveComponent(\"van-tag\");\n  const _component_van_card = _resolveComponent(\"van-card\");\n  const _component_van_cell = _resolveComponent(\"van-cell\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  const _component_van_icon = _resolveComponent(\"van-icon\");\n  const _component_van_radio = _resolveComponent(\"van-radio\");\n  const _component_van_button = _resolveComponent(\"van-button\");\n  const _component_van_popup = _resolveComponent(\"van-popup\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_nav_bar, {\n    title: \"订单支付\",\n    \"left-text\": \"返回\",\n    \"left-arrow\": \"\",\n    onClickLeft: $setup.onClickLeft\n  }, null, 8 /* PROPS */, [\"onClickLeft\"]), _createVNode(_component_van_card, {\n    title: \"八字命理AI人生指导\",\n    desc: \"个性化人生指导建议\",\n    price: \"9.90\",\n    currency: \"¥\"\n  }, {\n    tags: _withCtx(() => [_createVNode(_component_van_tag, {\n      plain: \"\",\n      type: \"primary\"\n    }, {\n      default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"专业分析\")])),\n      _: 1 /* STABLE */,\n      __: [3]\n    }), _createVNode(_component_van_tag, {\n      plain: \"\",\n      type: \"success\"\n    }, {\n      default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"AI解读\")])),\n      _: 1 /* STABLE */,\n      __: [4]\n    }), _createVNode(_component_van_tag, {\n      plain: \"\",\n      type: \"warning\"\n    }, {\n      default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"PDF报告\")])),\n      _: 1 /* STABLE */,\n      __: [5]\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_van_cell_group, {\n    inset: \"\",\n    title: \"订单信息\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_cell, {\n      title: \"订单编号\",\n      value: $setup.orderId\n    }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n      title: \"创建时间\",\n      value: $setup.createTime\n    }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n      title: \"支付金额\",\n      value: \"¥9.90\"\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_van_cell_group, {\n    inset: \"\",\n    title: \"选择支付方式\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_cell, {\n      clickable: \"\",\n      onClick: _cache[0] || (_cache[0] = $event => $setup.paymentMethod = 'wechat')\n    }, {\n      title: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_van_icon, {\n        name: \"wechat\",\n        color: \"#07C160\",\n        size: \"24\"\n      }), _cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n        class: \"payment-name\"\n      }, \"微信支付\", -1 /* HOISTED */))])]),\n      \"right-icon\": _withCtx(() => [_createVNode(_component_van_radio, {\n        name: 'wechat',\n        checked: $setup.paymentMethod === 'wechat'\n      }, null, 8 /* PROPS */, [\"checked\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_van_cell, {\n      clickable: \"\",\n      onClick: _cache[1] || (_cache[1] = $event => $setup.paymentMethod = 'alipay')\n    }, {\n      title: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_van_icon, {\n        name: \"alipay\",\n        color: \"#1677FF\",\n        size: \"24\"\n      }), _cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n        class: \"payment-name\"\n      }, \"支付宝\", -1 /* HOISTED */))])]),\n      \"right-icon\": _withCtx(() => [_createVNode(_component_van_radio, {\n        name: 'alipay',\n        checked: $setup.paymentMethod === 'alipay'\n      }, null, 8 /* PROPS */, [\"checked\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_van_button, {\n    round: \"\",\n    block: \"\",\n    type: \"primary\",\n    onClick: $setup.onPayment\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\" 立即支付 \")])),\n    _: 1 /* STABLE */,\n    __: [8]\n  }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_van_popup, {\n    show: $setup.showQRCode,\n    \"onUpdate:show\": _cache[2] || (_cache[2] = $event => $setup.showQRCode = $event),\n    round: \"\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"请扫码支付\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_6, [$setup.qrCodeUrl ? (_openBlock(), _createElementBlock(\"iframe\", {\n      key: 0,\n      src: $setup.qrCodeUrl,\n      frameborder: \"0\",\n      width: \"200\",\n      height: \"200\"\n    }, null, 8 /* PROPS */, _hoisted_7)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _cache[9] || (_cache[9] = [_createElementVNode(\"p\", null, \"正在加载支付二维码...\", -1 /* HOISTED */)])))]), _cache[12] || (_cache[12] = _createElementVNode(\"p\", null, \"支付金额: ¥9.90\", -1 /* HOISTED */)), _createVNode(_component_van_button, {\n      type: \"primary\",\n      block: \"\",\n      onClick: $setup.onPaymentSuccess\n    }, {\n      default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\" 支付完成 \")])),\n      _: 1 /* STABLE */,\n      __: [10]\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","_component_van_card","desc","price","currency","tags","_withCtx","_component_van_tag","plain","type","default","_cache","_createTextVNode","_","__","_component_van_cell_group","inset","_component_van_cell","value","orderId","createTime","clickable","onClick","$event","paymentMethod","_createElementVNode","_hoisted_2","_component_van_icon","name","color","size","_component_van_radio","checked","_hoisted_3","_hoisted_4","_component_van_button","round","block","onPayment","_component_van_popup","show","showQRCode","_hoisted_5","_hoisted_6","qrCodeUrl","src","frameborder","width","height","_hoisted_7","_hoisted_8","onPaymentSuccess"],"sources":["D:\\Python\\20250603开发八字命理AI指导功能页码\\开发八字命理AI指导功能页码\\frontend\\src\\Payment.vue"],"sourcesContent":["<template>\n  <div class=\"payment-container\">\n    <van-nav-bar\n      title=\"订单支付\"\n      left-text=\"返回\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n    />\n    \n    <van-card\n      title=\"八字命理AI人生指导\"\n      desc=\"个性化人生指导建议\"\n      price=\"9.90\"\n      currency=\"¥\"\n    >\n      <template #tags>\n        <van-tag plain type=\"primary\">专业分析</van-tag>\n        <van-tag plain type=\"success\">AI解读</van-tag>\n        <van-tag plain type=\"warning\">PDF报告</van-tag>\n      </template>\n    </van-card>\n    \n    <van-cell-group inset title=\"订单信息\">\n      <van-cell title=\"订单编号\" :value=\"orderId\" />\n      <van-cell title=\"创建时间\" :value=\"createTime\" />\n      <van-cell title=\"支付金额\" value=\"¥9.90\" />\n    </van-cell-group>\n    \n    <van-cell-group inset title=\"选择支付方式\">\n      <van-cell clickable @click=\"paymentMethod = 'wechat'\">\n        <template #title>\n          <div class=\"payment-method\">\n            <van-icon name=\"wechat\" color=\"#07C160\" size=\"24\" />\n            <span class=\"payment-name\">微信支付</span>\n          </div>\n        </template>\n        <template #right-icon>\n          <van-radio :name=\"'wechat'\" :checked=\"paymentMethod === 'wechat'\" />\n        </template>\n      </van-cell>\n      \n      <van-cell clickable @click=\"paymentMethod = 'alipay'\">\n        <template #title>\n          <div class=\"payment-method\">\n            <van-icon name=\"alipay\" color=\"#1677FF\" size=\"24\" />\n            <span class=\"payment-name\">支付宝</span>\n          </div>\n        </template>\n        <template #right-icon>\n          <van-radio :name=\"'alipay'\" :checked=\"paymentMethod === 'alipay'\" />\n        </template>\n      </van-cell>\n    </van-cell-group>\n    \n    <div class=\"payment-action\">\n      <van-button round block type=\"primary\" @click=\"onPayment\">\n        立即支付\n      </van-button>\n    </div>\n    \n    <van-popup :show=\"showQRCode\" @update:show=\"showQRCode = $event\" round>\n      <div class=\"qrcode-container\">\n        <h3>请扫码支付</h3>\n        <div class=\"qrcode\">\n          <iframe v-if=\"qrCodeUrl\" :src=\"qrCodeUrl\" frameborder=\"0\" width=\"200\" height=\"200\"></iframe>\n          <div v-else class=\"qrcode-placeholder\">\n            <p>正在加载支付二维码...</p>\n          </div>\n        </div>\n        <p>支付金额: ¥9.90</p>\n        <van-button type=\"primary\" block @click=\"onPaymentSuccess\">\n          支付完成\n        </van-button>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { Toast } from 'vant';\n\nexport default {\n  name: 'PaymentPage',\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    \n    // 从路由参数获取订单信息\n    const gender = route.query.gender;\n    const calendarType = route.query.calendarType;\n    const birthDate = route.query.birthDate;\n    const birthTime = route.query.birthTime;\n    const birthPlace = route.query.birthPlace;\n    const livingPlace = route.query.livingPlace;\n    const focusAreas = route.query.focusAreas?.split(',') || [];\n    \n    // 支付相关状态\n    const orderId = ref('BZ' + Date.now().toString());\n    const createTime = ref(new Date().toLocaleString());\n    const paymentMethod = ref('wechat');\n    const showQRCode = ref(false);\n    const qrCodeUrl = ref('');\n    \n    onMounted(() => {\n      // 实际项目中这里应该调用API创建订单\n      console.log('订单创建成功', {\n        gender,\n        calendarType,\n        birthDate,\n        birthTime,\n        birthPlace,\n        livingPlace,\n        focusAreas\n      });\n    });\n    \n    const onClickLeft = () => {\n      router.go(-1);\n    };\n    \n    const onPayment = () => {\n      // 根据支付方式显示不同的二维码\n      if (paymentMethod.value === 'wechat') {\n        // 使用本地HTML文件作为微信支付二维码\n        qrCodeUrl.value = '/images/wechat-qrcode.html';\n      } else {\n        // 使用本地HTML文件作为支付宝二维码\n        qrCodeUrl.value = '/images/alipay-qrcode.html';\n      }\n      \n      showQRCode.value = true;\n      \n      // 实际项目中这里应该调用API获取支付二维码\n      console.log('发起支付请求', {\n        orderId: orderId.value,\n        paymentMethod: paymentMethod.value\n      });\n\n      // 由于我们只是演示，记录一下二维码URL\n      console.log(`使用${paymentMethod.value}支付，二维码URL:`, qrCodeUrl.value);\n    };\n    \n    const onPaymentSuccess = () => {\n      Toast.success('支付成功');\n      showQRCode.value = false;\n      \n      // 模拟支付成功后的结果ID\n      const resultId = 'RES' + orderId.value;\n      \n      // 跳转到结果页面，传递出生日期和时间参数\n      router.push({\n        path: `/result/${resultId}`,\n        query: {\n          birthDate,\n          birthTime,\n          gender,\n          birthPlace,\n          livingPlace,\n          originalOrderId: orderId.value // 传递原始订单ID\n        }\n      });\n    };\n    \n    return {\n      orderId,\n      createTime,\n      paymentMethod,\n      showQRCode,\n      qrCodeUrl,\n      onClickLeft,\n      onPayment,\n      onPaymentSuccess\n    };\n  }\n};\n</script>\n\n<style scoped>\n.payment-container {\n  padding-bottom: 20px;\n}\n\n.payment-method {\n  display: flex;\n  align-items: center;\n}\n\n.payment-name {\n  margin-left: 10px;\n}\n\n.payment-action {\n  padding: 20px 16px;\n}\n\n.qrcode-container {\n  padding: 20px;\n  text-align: center;\n  width: 280px;\n}\n\n.qrcode {\n  width: 200px;\n  height: 200px;\n  margin: 20px auto;\n  background-color: #f2f3f5;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #ebedf0;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.qrcode iframe {\n  border: none;\n  width: 100%;\n  height: 100%;\n}\n\n.qrcode img {\n  max-width: 100%;\n  max-height: 100%;\n}\n\n.qrcode-placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #969799;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
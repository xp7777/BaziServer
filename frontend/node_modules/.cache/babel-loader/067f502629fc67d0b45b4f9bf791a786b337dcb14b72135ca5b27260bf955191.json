{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"result-container\"\n};\nconst _hoisted_2 = {\n  class: \"bazi-chart\"\n};\nconst _hoisted_3 = {\n  class: \"pillar\"\n};\nconst _hoisted_4 = {\n  class: \"stem\"\n};\nconst _hoisted_5 = {\n  class: \"branch\"\n};\nconst _hoisted_6 = {\n  class: \"pillar\"\n};\nconst _hoisted_7 = {\n  class: \"stem\"\n};\nconst _hoisted_8 = {\n  class: \"branch\"\n};\nconst _hoisted_9 = {\n  class: \"pillar\"\n};\nconst _hoisted_10 = {\n  class: \"stem\"\n};\nconst _hoisted_11 = {\n  class: \"branch\"\n};\nconst _hoisted_12 = {\n  class: \"pillar\"\n};\nconst _hoisted_13 = {\n  class: \"stem\"\n};\nconst _hoisted_14 = {\n  class: \"branch\"\n};\nconst _hoisted_15 = {\n  class: \"pillar\"\n};\nconst _hoisted_16 = {\n  class: \"label\"\n};\nconst _hoisted_17 = {\n  key: 2,\n  class: \"five-elements\"\n};\nconst _hoisted_18 = {\n  class: \"element-name\"\n};\nconst _hoisted_19 = {\n  class: \"element-value\"\n};\nconst _hoisted_20 = {\n  key: 3,\n  class: \"five-elements\"\n};\nconst _hoisted_21 = {\n  class: \"element-name\"\n};\nconst _hoisted_22 = {\n  key: 4,\n  class: \"shen-sha-info\"\n};\nconst _hoisted_23 = {\n  key: 5,\n  class: \"shen-sha-info\"\n};\nconst _hoisted_24 = {\n  key: 6,\n  class: \"da-yun-info\"\n};\nconst _hoisted_25 = {\n  class: \"qi-yun-info\"\n};\nconst _hoisted_26 = {\n  key: 0,\n  class: \"da-yun-table\"\n};\nconst _hoisted_27 = {\n  class: \"da-yun-table\"\n};\nconst _hoisted_28 = {\n  key: 2\n};\nconst _hoisted_29 = {\n  key: 7,\n  class: \"da-yun-info\"\n};\nconst _hoisted_30 = {\n  key: 8,\n  class: \"flowing-years\"\n};\nconst _hoisted_31 = {\n  key: 9,\n  class: \"flowing-years\"\n};\nconst _hoisted_32 = {\n  class: \"ai-analysis\"\n};\nconst _hoisted_33 = {\n  key: 0,\n  class: \"age-notice\"\n};\nconst _hoisted_34 = {\n  key: 1,\n  class: \"age-notice\"\n};\nconst _hoisted_35 = {\n  key: 2,\n  class: \"age-notice\"\n};\nconst _hoisted_36 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_37 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_38 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_39 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_40 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_41 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_42 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_43 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_44 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_45 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_46 = {\n  class: \"analysis-section\"\n};\nconst _hoisted_47 = {\n  class: \"action-buttons\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  const _component_van_grid_item = _resolveComponent(\"van-grid-item\");\n  const _component_van_grid = _resolveComponent(\"van-grid\");\n  const _component_van_cell = _resolveComponent(\"van-cell\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  const _component_van_step = _resolveComponent(\"van-step\");\n  const _component_van_steps = _resolveComponent(\"van-steps\");\n  const _component_van_tab = _resolveComponent(\"van-tab\");\n  const _component_van_notice_bar = _resolveComponent(\"van-notice-bar\");\n  const _component_van_tabs = _resolveComponent(\"van-tabs\");\n  const _component_van_button = _resolveComponent(\"van-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_nav_bar, {\n    title: \"八字分析结果\",\n    \"left-text\": \"返回\",\n    \"left-arrow\": \"\",\n    onClickLeft: $setup.onClickLeft\n  }), _cache[26] || (_cache[26] = _createElementVNode(\"div\", {\n    class: \"result-header\"\n  }, [_createElementVNode(\"h2\", null, \"您的八字命盘分析\"), _createElementVNode(\"p\", null, \"基于您的出生信息，AI为您提供的个性化人生指导\")], -1 /* HOISTED */)), _createVNode(_component_van_tabs, {\n    modelValue: $setup.activeTab,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.activeTab = $event),\n    sticky: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_tab, {\n      title: \"命盘信息\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"八字命盘\", -1 /* HOISTED */)), $setup.baziData && $setup.baziData.yearPillar && $setup.baziData.monthPillar && $setup.baziData.dayPillar && $setup.baziData.hourPillar ? (_openBlock(), _createBlock(_component_van_grid, {\n        key: 0,\n        \"column-num\": 4,\n        border: false\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_grid_item, null, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.baziData.yearPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_5, _toDisplayString($setup.baziData.yearPillar.earthlyBranch), 1 /* TEXT */), _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n            class: \"label\"\n          }, \"年柱\", -1 /* HOISTED */))])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_van_grid_item, null, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.baziData.monthPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, _toDisplayString($setup.baziData.monthPillar.earthlyBranch), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n            class: \"label\"\n          }, \"月柱\", -1 /* HOISTED */))])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_van_grid_item, null, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString($setup.baziData.dayPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.baziData.dayPillar.earthlyBranch), 1 /* TEXT */), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n            class: \"label\"\n          }, \"日柱\", -1 /* HOISTED */))])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_van_grid_item, null, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, _toDisplayString($setup.baziData.hourPillar.heavenlyStem), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_14, _toDisplayString($setup.baziData.hourPillar.earthlyBranch), 1 /* TEXT */), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n            class: \"label\"\n          }, \"时柱\", -1 /* HOISTED */))])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })) : (_openBlock(), _createElementBlock(_Fragment, {\n        key: 1\n      }, [_createCommentVNode(\" 数据缺失时显示占位符 \"), _createVNode(_component_van_grid, {\n        \"column-num\": 4,\n        border: false\n      }, {\n        default: _withCtx(() => [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(['年柱', '月柱', '日柱', '时柱'], pillar => {\n          return _createVNode(_component_van_grid_item, {\n            key: pillar\n          }, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_15, [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n              class: \"stem placeholder\"\n            }, \"--\", -1 /* HOISTED */)), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n              class: \"branch placeholder\"\n            }, \"--\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_16, _toDisplayString(pillar), 1 /* TEXT */)])]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */);\n        }), 64 /* STABLE_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      })], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _cache[10] || (_cache[10] = _createElementVNode(\"h3\", null, \"五行分布\", -1 /* HOISTED */)), $setup.baziData && $setup.baziData.fiveElements ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziData.fiveElements, (value, element) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"element\",\n          key: element\n        }, [_createElementVNode(\"div\", _hoisted_18, _toDisplayString($setup.getElementName(element)), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_19, _toDisplayString(value), 1 /* TEXT */)]);\n      }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(['wood', 'fire', 'earth', 'metal', 'water'], element => {\n        return _createElementVNode(\"div\", {\n          class: \"element\",\n          key: element\n        }, [_createElementVNode(\"div\", _hoisted_21, _toDisplayString($setup.getElementName(element)), 1 /* TEXT */), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n          class: \"element-value\"\n        }, \"--\", -1 /* HOISTED */))]);\n      }), 64 /* STABLE_FRAGMENT */))])), _createCommentVNode(\" 添加神煞显示 \"), _cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"神煞信息\", -1 /* HOISTED */)), $setup.baziData && $setup.baziData.shenSha ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"日冲\",\n          value: $setup.baziData.shenSha.dayChong || '无'\n        }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n          title: \"值神\",\n          value: $setup.baziData.shenSha.zhiShen || '无'\n        }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n          title: \"彭祖百忌\",\n          value: $setup.baziData.shenSha.pengZuGan && $setup.baziData.shenSha.pengZuZhi ? `${$setup.baziData.shenSha.pengZuGan} ${$setup.baziData.shenSha.pengZuZhi}` : '无'\n        }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n          title: \"喜神方位\",\n          value: $setup.baziData.shenSha.xiShen || '无'\n        }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n          title: \"福神方位\",\n          value: $setup.baziData.shenSha.fuShen || '无'\n        }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n          title: \"财神方位\",\n          value: $setup.baziData.shenSha.caiShen || '无'\n        }, null, 8 /* PROPS */, [\"value\"]), _createVNode(_component_van_cell, {\n          title: \"本命神煞\",\n          value: $setup.baziData.shenSha.benMing ? $setup.baziData.shenSha.benMing.join('、') : '无'\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"神煞信息\",\n          value: \"暂无数据\"\n        })]),\n        _: 1 /* STABLE */\n      })])), _createCommentVNode(\" 添加大运显示 \"), _cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"大运信息\", -1 /* HOISTED */)), $setup.baziData && $setup.baziData.daYun ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [_createElementVNode(\"p\", _hoisted_25, \"起运年龄: \" + _toDisplayString($setup.baziData.daYun.startAge || '--') + \"岁，起运年份: \" + _toDisplayString($setup.baziData.daYun.startYear || '--') + \"年\", 1 /* TEXT */), $setup.baziData.daYun.daYunList && $setup.baziData.daYun.daYunList.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziData.daYun.daYunList, item => {\n          return _openBlock(), _createBlock(_component_van_cell, {\n            key: item.index,\n            title: `${item.index || '--'}. ${item.heavenlyStem || '--'}${item.earthlyBranch || '--'} (${item.element || '--'})`,\n            value: `${item.startYear || '--'}-${item.endYear || '--'}年`\n          }, null, 8 /* PROPS */, [\"title\", \"value\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      })])) : $setup.baziData.daYun.daYun && $setup.baziData.daYun.daYun.length ? (_openBlock(), _createElementBlock(_Fragment, {\n        key: 1\n      }, [_createCommentVNode(\" 处理数据结构不一致的情况：daYun下有daYun数组 \"), _createElementVNode(\"div\", _hoisted_27, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziData.daYun.daYun, item => {\n          return _openBlock(), _createBlock(_component_van_cell, {\n            key: item.index || item.ganZhi,\n            title: `${item.index || '--'}. ${item.heavenlyStem || item.ganZhi?.slice(0, 1) || '--'}${item.earthlyBranch || item.ganZhi?.slice(1, 2) || '--'} (${item.element || '--'})`,\n            value: `${item.startYear || '--'}-${item.endYear || '--'}年`\n          }, null, 8 /* PROPS */, [\"title\", \"value\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      })])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"大运信息\",\n          value: \"暂无详细数据\"\n        })]),\n        _: 1 /* STABLE */\n      })]))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"大运信息\",\n          value: \"暂无数据\"\n        })]),\n        _: 1 /* STABLE */\n      })])), _cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"大运流年\", -1 /* HOISTED */)), $setup.baziData && $setup.baziData.flowingYears && $setup.baziData.flowingYears.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createVNode(_component_van_steps, {\n        direction: \"horizontal\",\n        active: 2\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.baziData.flowingYears.slice(0, 5), (year, index) => {\n          return _openBlock(), _createBlock(_component_van_step, {\n            key: index\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(year.year || '--') + \"年\", 1 /* TEXT */), _cache[8] || (_cache[8] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(year.heavenlyStem || '--') + _toDisplayString(year.earthlyBranch || '--'), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */,\n            __: [8]\n          }, 1024 /* DYNAMIC_SLOTS */);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell, {\n          title: \"流年信息\",\n          value: \"暂无数据\"\n        })]),\n        _: 1 /* STABLE */\n      })]))])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_van_tab, {\n      title: \"AI分析结果\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_32, [$setup.userAge !== null && $setup.userAge < 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [_createVNode(_component_van_notice_bar, {\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\"\n      }, {\n        default: _withCtx(() => _cache[14] || (_cache[14] = [_createTextVNode(\" 此分析针对未来出生的宝宝，重点关注性格特点、天赋才能和健康发展趋势。 \")])),\n        _: 1 /* STABLE */,\n        __: [14]\n      })])) : $setup.userAge !== null && $setup.userAge < 6 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [_createVNode(_component_van_notice_bar, {\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 此分析针对婴幼儿(\" + _toDisplayString($setup.userAge) + \"岁)，重点关注性格特点、天赋才能和健康发展趋势。 \", 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })])) : $setup.userAge !== null && $setup.userAge < 18 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [_createVNode(_component_van_notice_bar, {\n        color: \"#1989fa\",\n        background: \"#ecf9ff\",\n        \"left-icon\": \"info-o\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" 此分析针对未成年人(\" + _toDisplayString($setup.userAge) + \"岁)，重点关注性格特点、学业发展和健康状况。 \", 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_36, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", null, \"身体健康\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.health), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_37, [_cache[16] || (_cache[16] = _createElementVNode(\"h3\", null, \"性格特点\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.personality || $setup.getAnalysisContent('性格特点')), 1 /* TEXT */)]), _createCommentVNode(\" 学业分析（对所有年龄段显示，但侧重点不同） \"), _createElementVNode(\"div\", _hoisted_38, [_cache[17] || (_cache[17] = _createElementVNode(\"h3\", null, \"学业分析\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.education || $setup.getAnalysisContent('学业分析')), 1 /* TEXT */)]), _createCommentVNode(\" 父母情况（所有年龄段都显示） \"), _createElementVNode(\"div\", _hoisted_39, [_cache[18] || (_cache[18] = _createElementVNode(\"h3\", null, \"父母情况\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.parents || '暂无父母情况分析'), 1 /* TEXT */)]), _createCommentVNode(\" 人际关系（所有年龄段都显示） \"), _createElementVNode(\"div\", _hoisted_40, [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", null, \"人际关系\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.social || '暂无人际关系分析'), 1 /* TEXT */)]), _createCommentVNode(\" 财运分析（18岁以上显示，或者标注为未来发展） \"), _createElementVNode(\"div\", _hoisted_41, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '财运分析' : '未来财运发展'), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.wealth), 1 /* TEXT */)]), _createCommentVNode(\" 事业发展（18岁以上显示，或者标注为未来发展） \"), _createElementVNode(\"div\", _hoisted_42, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '事业发展' : '未来事业发展'), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.career), 1 /* TEXT */)]), _createCommentVNode(\" 婚姻感情（18岁以上显示，或者标注为未来发展） \"), _createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '婚姻感情' : '未来感情发展'), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.relationship), 1 /* TEXT */)]), _createCommentVNode(\" 子女情况（18岁以上显示，或者标注为未来发展） \"), _createElementVNode(\"div\", _hoisted_44, [_createElementVNode(\"h3\", null, _toDisplayString($setup.userAge !== null && $setup.userAge >= 18 ? '子女情况' : '未来子女缘分'), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.children), 1 /* TEXT */)]), _createCommentVNode(\" 近五年运势（所有年龄段都显示） \"), _createElementVNode(\"div\", _hoisted_45, [_cache[20] || (_cache[20] = _createElementVNode(\"h3\", null, \"近五年运势\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.future || $setup.getAnalysisContent('近五年运势') || $setup.aiAnalysis.overall), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_46, [_cache[21] || (_cache[21] = _createElementVNode(\"h3\", null, \"综合建议\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($setup.aiAnalysis.overall), 1 /* TEXT */)])])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_47, [_createVNode(_component_van_button, {\n    type: \"primary\",\n    block: \"\",\n    onClick: $setup.downloadPDF\n  }, {\n    default: _withCtx(() => _cache[22] || (_cache[22] = [_createTextVNode(\" 下载PDF报告 \")])),\n    _: 1 /* STABLE */,\n    __: [22]\n  }), _createVNode(_component_van_button, {\n    plain: \"\",\n    type: \"primary\",\n    block: \"\",\n    style: {\n      \"margin-top\": \"10px\"\n    },\n    onClick: $setup.shareResult\n  }, {\n    default: _withCtx(() => _cache[23] || (_cache[23] = [_createTextVNode(\" 分享结果 \")])),\n    _: 1 /* STABLE */,\n    __: [23]\n  }), _createCommentVNode(\" 本地生成PDF按钮 \"), _createVNode(_component_van_button, {\n    plain: \"\",\n    type: \"info\",\n    block: \"\",\n    style: {\n      \"margin-top\": \"10px\"\n    },\n    onClick: $setup.handleLocalPDFGeneration\n  }, {\n    default: _withCtx(() => _cache[24] || (_cache[24] = [_createTextVNode(\" 本地生成PDF \")])),\n    _: 1 /* STABLE */,\n    __: [24]\n  }), _createCommentVNode(\" 调试按钮 \"), _createVNode(_component_van_button, {\n    plain: \"\",\n    type: \"warning\",\n    block: \"\",\n    style: {\n      \"margin-top\": \"10px\"\n    },\n    onClick: $setup.reloadBaziData\n  }, {\n    default: _withCtx(() => _cache[25] || (_cache[25] = [_createTextVNode(\" 重新加载分析数据 \")])),\n    _: 1 /* STABLE */,\n    __: [25]\n  })])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","_createElementVNode","_component_van_tabs","modelValue","activeTab","_cache","$event","sticky","default","_withCtx","_component_van_tab","_hoisted_2","baziData","yearPillar","monthPillar","dayPillar","hourPillar","_createBlock","_component_van_grid","border","_component_van_grid_item","_hoisted_3","_hoisted_4","_toDisplayString","heavenlyStem","_hoisted_5","earthlyBranch","_","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_Fragment","_createCommentVNode","_renderList","pillar","_hoisted_15","_hoisted_16","fiveElements","_hoisted_17","value","element","_hoisted_18","getElementName","_hoisted_19","_hoisted_20","_hoisted_21","shenSha","_hoisted_22","_component_van_cell_group","inset","_component_van_cell","dayChong","zhiShen","pengZuGan","pengZuZhi","xiShen","fuShen","caiShen","benMing","join","_hoisted_23","daYun","_hoisted_24","_hoisted_25","startAge","startYear","daYunList","length","_hoisted_26","item","index","endYear","_hoisted_27","ganZhi","slice","_hoisted_28","_hoisted_29","flowingYears","_hoisted_30","_component_van_steps","direction","active","year","_component_van_step","_createTextVNode","__","_hoisted_31","_hoisted_32","userAge","_hoisted_33","_component_van_notice_bar","color","background","_hoisted_34","_hoisted_35","_hoisted_36","aiAnalysis","health","_hoisted_37","personality","getAnalysisContent","_hoisted_38","education","_hoisted_39","parents","_hoisted_40","social","_hoisted_41","wealth","_hoisted_42","career","_hoisted_43","relationship","_hoisted_44","children","_hoisted_45","future","overall","_hoisted_46","_hoisted_47","_component_van_button","type","block","onClick","downloadPDF","plain","style","shareResult","handleLocalPDFGeneration","reloadBaziData"],"sources":["D:\\Python\\20250603开发八字命理AI指导功能页码\\开发八字命理AI指导功能页码\\frontend\\src\\Result.vue"],"sourcesContent":["<template>\n  <div class=\"result-container\">\n    <van-nav-bar\n      title=\"八字分析结果\"\n      left-text=\"返回\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n    />\n    \n    <div class=\"result-header\">\n      <h2>您的八字命盘分析</h2>\n      <p>基于您的出生信息，AI为您提供的个性化人生指导</p>\n    </div>\n    \n    <van-tabs v-model=\"activeTab\" sticky>\n      <van-tab title=\"命盘信息\">\n        <div class=\"bazi-chart\">\n          <h3>八字命盘</h3>\n          <van-grid :column-num=\"4\" :border=\"false\" v-if=\"baziData && baziData.yearPillar && baziData.monthPillar && baziData.dayPillar && baziData.hourPillar\">\n            <van-grid-item>\n              <template #default>\n                <div class=\"pillar\">\n                  <div class=\"stem\">{{ baziData.yearPillar.heavenlyStem }}</div>\n                  <div class=\"branch\">{{ baziData.yearPillar.earthlyBranch }}</div>\n                  <div class=\"label\">年柱</div>\n                </div>\n              </template>\n            </van-grid-item>\n            <van-grid-item>\n              <template #default>\n                <div class=\"pillar\">\n                  <div class=\"stem\">{{ baziData.monthPillar.heavenlyStem }}</div>\n                  <div class=\"branch\">{{ baziData.monthPillar.earthlyBranch }}</div>\n                  <div class=\"label\">月柱</div>\n                </div>\n              </template>\n            </van-grid-item>\n            <van-grid-item>\n              <template #default>\n                <div class=\"pillar\">\n                  <div class=\"stem\">{{ baziData.dayPillar.heavenlyStem }}</div>\n                  <div class=\"branch\">{{ baziData.dayPillar.earthlyBranch }}</div>\n                  <div class=\"label\">日柱</div>\n                </div>\n              </template>\n            </van-grid-item>\n            <van-grid-item>\n              <template #default>\n                <div class=\"pillar\">\n                  <div class=\"stem\">{{ baziData.hourPillar.heavenlyStem }}</div>\n                  <div class=\"branch\">{{ baziData.hourPillar.earthlyBranch }}</div>\n                  <div class=\"label\">时柱</div>\n                </div>\n              </template>\n            </van-grid-item>\n          </van-grid>\n          \n          <!-- 数据缺失时显示占位符 -->\n          <van-grid :column-num=\"4\" :border=\"false\" v-else>\n            <van-grid-item v-for=\"pillar in ['年柱', '月柱', '日柱', '时柱']\" :key=\"pillar\">\n              <template #default>\n                <div class=\"pillar\">\n                  <div class=\"stem placeholder\">--</div>\n                  <div class=\"branch placeholder\">--</div>\n                  <div class=\"label\">{{ pillar }}</div>\n                </div>\n              </template>\n            </van-grid-item>\n          </van-grid>\n          \n          <h3>五行分布</h3>\n          <div class=\"five-elements\" v-if=\"baziData && baziData.fiveElements\">\n            <div class=\"element\" v-for=\"(value, element) in baziData.fiveElements\" :key=\"element\">\n              <div class=\"element-name\">{{ getElementName(element) }}</div>\n              <div class=\"element-value\">{{ value }}</div>\n            </div>\n          </div>\n          <div class=\"five-elements\" v-else>\n            <div class=\"element\" v-for=\"element in ['wood', 'fire', 'earth', 'metal', 'water']\" :key=\"element\">\n              <div class=\"element-name\">{{ getElementName(element) }}</div>\n              <div class=\"element-value\">--</div>\n            </div>\n          </div>\n          \n          <!-- 添加神煞显示 -->\n          <h3>神煞信息</h3>\n          <div class=\"shen-sha-info\" v-if=\"baziData && baziData.shenSha\">\n            <van-cell-group inset>\n              <van-cell title=\"日冲\" :value=\"baziData.shenSha.dayChong || '无'\" />\n              <van-cell title=\"值神\" :value=\"baziData.shenSha.zhiShen || '无'\" />\n              <van-cell title=\"彭祖百忌\" :value=\"(baziData.shenSha.pengZuGan && baziData.shenSha.pengZuZhi) ? `${baziData.shenSha.pengZuGan} ${baziData.shenSha.pengZuZhi}` : '无'\" />\n              <van-cell title=\"喜神方位\" :value=\"baziData.shenSha.xiShen || '无'\" />\n              <van-cell title=\"福神方位\" :value=\"baziData.shenSha.fuShen || '无'\" />\n              <van-cell title=\"财神方位\" :value=\"baziData.shenSha.caiShen || '无'\" />\n              <van-cell title=\"本命神煞\" :value=\"baziData.shenSha.benMing ? baziData.shenSha.benMing.join('、') : '无'\" />\n            </van-cell-group>\n          </div>\n          <div class=\"shen-sha-info\" v-else>\n            <van-cell-group inset>\n              <van-cell title=\"神煞信息\" value=\"暂无数据\" />\n            </van-cell-group>\n          </div>\n          \n          <!-- 添加大运显示 -->\n          <h3>大运信息</h3>\n          <div class=\"da-yun-info\" v-if=\"baziData && baziData.daYun\">\n            <p class=\"qi-yun-info\">起运年龄: {{ baziData.daYun.startAge || '--' }}岁，起运年份: {{ baziData.daYun.startYear || '--' }}年</p>\n            \n            <div class=\"da-yun-table\" v-if=\"baziData.daYun.daYunList && baziData.daYun.daYunList.length\">\n              <van-cell-group inset>\n                <van-cell v-for=\"item in baziData.daYun.daYunList\" :key=\"item.index\"\n                  :title=\"`${item.index || '--'}. ${item.heavenlyStem || '--'}${item.earthlyBranch || '--'} (${item.element || '--'})`\"\n                  :value=\"`${item.startYear || '--'}-${item.endYear || '--'}年`\"\n                />\n              </van-cell-group>\n            </div>\n            <!-- 处理数据结构不一致的情况：daYun下有daYun数组 -->\n            <div class=\"da-yun-table\" v-else-if=\"baziData.daYun.daYun && baziData.daYun.daYun.length\">\n              <van-cell-group inset>\n                <van-cell v-for=\"item in baziData.daYun.daYun\" :key=\"item.index || item.ganZhi\"\n                  :title=\"`${item.index || '--'}. ${item.heavenlyStem || item.ganZhi?.slice(0,1) || '--'}${item.earthlyBranch || item.ganZhi?.slice(1,2) || '--'} (${item.element || '--'})`\"\n                  :value=\"`${item.startYear || '--'}-${item.endYear || '--'}年`\"\n                />\n              </van-cell-group>\n            </div>\n            <div v-else>\n              <van-cell-group inset>\n                <van-cell title=\"大运信息\" value=\"暂无详细数据\" />\n              </van-cell-group>\n            </div>\n          </div>\n          <div class=\"da-yun-info\" v-else>\n            <van-cell-group inset>\n              <van-cell title=\"大运信息\" value=\"暂无数据\" />\n            </van-cell-group>\n          </div>\n          \n          <h3>大运流年</h3>\n          <div class=\"flowing-years\" v-if=\"baziData && baziData.flowingYears && baziData.flowingYears.length\">\n            <van-steps direction=\"horizontal\" :active=\"2\">\n              <van-step v-for=\"(year, index) in baziData.flowingYears.slice(0, 5)\" :key=\"index\">\n                {{ year.year || '--' }}年<br>\n                {{ year.heavenlyStem || '--' }}{{ year.earthlyBranch || '--' }}\n              </van-step>\n            </van-steps>\n          </div>\n          <div class=\"flowing-years\" v-else>\n            <van-cell-group inset>\n              <van-cell title=\"流年信息\" value=\"暂无数据\" />\n            </van-cell-group>\n          </div>\n        </div>\n      </van-tab>\n      \n      <van-tab title=\"AI分析结果\">\n        <div class=\"ai-analysis\">\n          <div v-if=\"userAge !== null && userAge < 0\" class=\"age-notice\">\n            <van-notice-bar\n              color=\"#1989fa\"\n              background=\"#ecf9ff\"\n              left-icon=\"info-o\"\n            >\n              此分析针对未来出生的宝宝，重点关注性格特点、天赋才能和健康发展趋势。\n            </van-notice-bar>\n          </div>\n          <div v-else-if=\"userAge !== null && userAge < 6\" class=\"age-notice\">\n            <van-notice-bar\n              color=\"#1989fa\"\n              background=\"#ecf9ff\"\n              left-icon=\"info-o\"\n            >\n              此分析针对婴幼儿({{userAge}}岁)，重点关注性格特点、天赋才能和健康发展趋势。\n            </van-notice-bar>\n          </div>\n          <div v-else-if=\"userAge !== null && userAge < 18\" class=\"age-notice\">\n            <van-notice-bar\n              color=\"#1989fa\"\n              background=\"#ecf9ff\"\n              left-icon=\"info-o\"\n            >\n              此分析针对未成年人({{userAge}}岁)，重点关注性格特点、学业发展和健康状况。\n            </van-notice-bar>\n          </div>\n          \n          <div class=\"analysis-section\">\n            <h3>身体健康</h3>\n            <p>{{ aiAnalysis.health }}</p>\n          </div>\n          \n          <div class=\"analysis-section\">\n            <h3>性格特点</h3>\n            <p>{{ aiAnalysis.personality || getAnalysisContent('性格特点') }}</p>\n          </div>\n          \n          <!-- 学业分析（对所有年龄段显示，但侧重点不同） -->\n          <div class=\"analysis-section\">\n            <h3>学业分析</h3>\n            <p>{{ aiAnalysis.education || getAnalysisContent('学业分析') }}</p>\n          </div>\n          \n          <!-- 父母情况（所有年龄段都显示） -->\n          <div class=\"analysis-section\">\n            <h3>父母情况</h3>\n            <p>{{ aiAnalysis.parents || '暂无父母情况分析' }}</p>\n          </div>\n          \n          <!-- 人际关系（所有年龄段都显示） -->\n          <div class=\"analysis-section\">\n            <h3>人际关系</h3>\n            <p>{{ aiAnalysis.social || '暂无人际关系分析' }}</p>\n          </div>\n          \n          <!-- 财运分析（18岁以上显示，或者标注为未来发展） -->\n          <div class=\"analysis-section\">\n            <h3>{{ userAge !== null && userAge >= 18 ? '财运分析' : '未来财运发展' }}</h3>\n            <p>{{ aiAnalysis.wealth }}</p>\n          </div>\n          \n          <!-- 事业发展（18岁以上显示，或者标注为未来发展） -->\n          <div class=\"analysis-section\">\n            <h3>{{ userAge !== null && userAge >= 18 ? '事业发展' : '未来事业发展' }}</h3>\n            <p>{{ aiAnalysis.career }}</p>\n          </div>\n          \n          <!-- 婚姻感情（18岁以上显示，或者标注为未来发展） -->\n          <div class=\"analysis-section\">\n            <h3>{{ userAge !== null && userAge >= 18 ? '婚姻感情' : '未来感情发展' }}</h3>\n            <p>{{ aiAnalysis.relationship }}</p>\n          </div>\n          \n          <!-- 子女情况（18岁以上显示，或者标注为未来发展） -->\n          <div class=\"analysis-section\">\n            <h3>{{ userAge !== null && userAge >= 18 ? '子女情况' : '未来子女缘分' }}</h3>\n            <p>{{ aiAnalysis.children }}</p>\n          </div>\n          \n          <!-- 近五年运势（所有年龄段都显示） -->\n          <div class=\"analysis-section\">\n            <h3>近五年运势</h3>\n            <p>{{ aiAnalysis.future || getAnalysisContent('近五年运势') || aiAnalysis.overall }}</p>\n          </div>\n          \n          <div class=\"analysis-section\">\n            <h3>综合建议</h3>\n            <p>{{ aiAnalysis.overall }}</p>\n          </div>\n        </div>\n      </van-tab>\n    </van-tabs>\n    \n    <div class=\"action-buttons\">\n      <van-button type=\"primary\" block @click=\"downloadPDF\">\n        下载PDF报告\n      </van-button>\n      <van-button plain type=\"primary\" block style=\"margin-top: 10px;\" @click=\"shareResult\">\n        分享结果\n      </van-button>\n      \n      <!-- 本地生成PDF按钮 -->\n      <van-button plain type=\"info\" \n                  block \n                  style=\"margin-top: 10px;\" \n                  @click=\"handleLocalPDFGeneration\">\n        本地生成PDF\n      </van-button>\n      \n      <!-- 调试按钮 -->\n      <van-button plain type=\"warning\" \n                  block \n                  style=\"margin-top: 10px;\" \n                  @click=\"reloadBaziData\">\n        重新加载分析数据\n      </van-button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, reactive, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { Toast, Dialog } from 'vant';\nimport { jsPDF } from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport axios from 'axios';\n\nconst route = useRoute();\nconst router = useRouter();\nconst resultId = route.params.id || route.query.resultId;\nconst activeTab = ref(0);\n\n// 用户年龄，从URL参数或localStorage获取\nconst userAge = ref(null);\n// 尝试从URL参数获取年龄\nif (route.query.age && !isNaN(parseInt(route.query.age))) {\n  userAge.value = parseInt(route.query.age);\n} \n// 如果URL参数中没有年龄，尝试从localStorage获取\nelse if (localStorage.getItem('userAge') && !isNaN(parseInt(localStorage.getItem('userAge')))) {\n  userAge.value = parseInt(localStorage.getItem('userAge'));\n}\n// 记录用户年龄到控制台，便于调试\nconsole.log('用户年龄:', userAge.value);\n\n// 从分析文本中提取特定部分内容\nconst getAnalysisContent = (sectionName) => {\n  try {\n    // 如果是性格特点或学业发展，直接从对应字段获取\n    if (sectionName === '性格特点' && aiAnalysis.value.personality) {\n      return aiAnalysis.value.personality;\n    }\n    \n    if (sectionName === '学业发展' && aiAnalysis.value.education) {\n      return aiAnalysis.value.education;\n    }\n    \n    // 处理健康分析文本，尝试提取学业、性格等内容\n    if (aiAnalysis.value.health) {\n      const healthText = aiAnalysis.value.health;\n      \n      // 查找各部分的标记\n      const sectionMatch = healthText.match(new RegExp(`###\\\\s*${sectionName}([\\\\s\\\\S]*?)(?=###|$)`, 'i'));\n      if (sectionMatch && sectionMatch[1]) {\n        return sectionMatch[1].trim();\n      }\n      \n      // 如果是未来发展，尝试从overall中提取\n      if (sectionName === '未来发展' && aiAnalysis.value.overall) {\n        const futureMatch = aiAnalysis.value.overall.match(/未来(\\d+)年[：:]([\\s\\S]*?)(?=（本分析|$)/i);\n        if (futureMatch && futureMatch[2]) {\n          return futureMatch[2].trim();\n        }\n      }\n    }\n    \n    // 如果没有找到对应部分或提取失败，返回空字符串\n    return '';\n  } catch (e) {\n    console.error(`提取${sectionName}内容时出错:`, e);\n    return '';\n  }\n};\n\n// 模拟数据，作为API调用失败时的备用数据\nconst focusAreas = ref(['health', 'wealth', 'career', 'relationship']);\n\n// 备用数据，只在API调用失败时使用\nconst baziData = ref({\n  yearPillar: {\n    heavenlyStem: '甲',\n    earthlyBranch: '子',\n    element: '水'\n  },\n  monthPillar: {\n    heavenlyStem: '丙',\n    earthlyBranch: '寅',\n    element: '木'\n  },\n  dayPillar: {\n    heavenlyStem: '戊',\n    earthlyBranch: '午',\n    element: '火'\n  },\n  hourPillar: {\n    heavenlyStem: '庚',\n    earthlyBranch: '申',\n    element: '金'\n  },\n  fiveElements: {\n    wood: 2,\n    fire: 2,\n    earth: 1,\n    metal: 2,\n    water: 1\n  },\n  flowingYears: [\n    {\n      year: 2025,\n      heavenlyStem: '乙',\n      earthlyBranch: '丑',\n      element: '土'\n    },\n    {\n      year: 2026,\n      heavenlyStem: '丙',\n      earthlyBranch: '寅',\n      element: '木'\n    },\n    {\n      year: 2027,\n      heavenlyStem: '丁',\n      earthlyBranch: '卯',\n      element: '木'\n    },\n    {\n      year: 2028,\n      heavenlyStem: '戊',\n      earthlyBranch: '辰',\n      element: '土'\n    },\n    {\n      year: 2029,\n      heavenlyStem: '己',\n      earthlyBranch: '巳',\n      element: '火'\n    }\n  ]\n});\n\n// 备用分析数据，只在API调用失败时使用\nconst aiAnalysis = ref({\n  health: '您的八字中火土较旺，木水偏弱。从健康角度看，您需要注意心脑血管系统和消化系统的保养。建议平时多喝水，保持规律作息，避免过度劳累和情绪波动。2025-2026年间需特别注意肝胆健康，可适当增加绿色蔬菜的摄入，定期体检。',\n  wealth: '您的财运在2025年有明显上升趋势，特别是在春夏季节。八字中金水相生，适合从事金融、贸易、水利相关行业。投资方面，稳健为主，可考虑分散投资组合。2027年有意外财运，但需谨慎对待，避免投机性强的项目。',\n  career: '您的事业宫位较为稳定，具有较强的组织能力和执行力。2025-2026年是事业发展的关键期，有升职或转行的机会。建议提升专业技能，扩展人脉关系。您适合在团队中担任协调或管理角色，发挥沟通才能。',\n  relationship: '您的八字中日柱为戊午，感情态度较为务实。2025年下半年至2026年上半年是感情发展的良好时期。已婚者需注意与伴侣的沟通，避免因工作忙碌而忽略家庭。单身者有机会通过社交活动或朋友介绍认识合适的对象。',\n  children: '您的子女宫位较为温和，与子女关系和谐。教育方面，建议采用引导式而非强制式的方法，尊重子女的兴趣发展。2026-2027年是子女发展的重要阶段，可能需要您更多的关注和支持。',\n  overall: '综合分析您的八字，2025-2027年是您人生的一个上升期，各方面都有良好发展。建议把握这段时间，在事业上积极进取，在健康上注意保养，在人际关系上广结善缘。您的人生态度积极乐观，具有较强的适应能力和抗压能力，这将帮助您度过人生中的各种挑战。'\n});\n\nconst testApiConnection = async () => {\n  try {\n    Toast.loading('正在测试API连接...');\n    // 使用配置好的http实例\n    const response = await axios.get('/');\n    console.log('API根路径响应:', response.data);\n    Toast.success('API连接成功');\n    return true;\n  } catch (error) {\n    console.error('API连接测试失败:', error);\n    Toast.fail('API连接失败，请检查后端服务');\n    return false;\n  }\n};\n\nonMounted(async () => {\n  // 先测试API连接\n  const isApiConnected = await testApiConnection();\n  if (!isApiConnected) {\n    console.warn('API连接失败，将使用模拟数据');\n    return;\n  }\n  \n  console.log('结果页面加载，ID:', resultId);\n  \n  // 如果没有resultId，尝试从本地存储获取\n  const localResultId = localStorage.getItem('resultId');\n  if (!resultId && localResultId) {\n    console.log('从本地存储获取ID:', localResultId);\n  }\n  \n  const finalResultId = resultId || localResultId;\n  \n  if (!finalResultId) {\n    console.error('缺少结果ID，无法获取分析结果');\n    Toast.fail('缺少结果ID，无法获取分析结果');\n    return;\n  }\n  \n  try {\n    console.log('调用API获取结果:', `/api/bazi/result/${finalResultId}`);\n    \n    // 显示加载提示，提醒用户需要等待\n    Toast.loading({\n      message: '正在调用AI进行八字分析，请耐心等待30-60秒...',\n      duration: 10000,\n      position: 'middle'\n    });\n    \n    // 使用配置好的http实例\n    const response = await axios.get(`/api/bazi/result/${finalResultId}`);\n    \n    console.log('API响应:', response.status, response.data);\n    \n    if (response.data.code === 200) {\n      console.log('获取成功，更新数据');\n      // 确保从API获取数据并更新视图\n      if (response.data.data.baziChart) {\n        baziData.value = response.data.data.baziChart;\n      } else {\n        console.warn('返回数据中没有baziChart字段，使用默认值');\n      }\n      \n      if (response.data.data.aiAnalysis) {\n        aiAnalysis.value = response.data.data.aiAnalysis;\n      } else {\n        console.warn('返回数据中没有aiAnalysis字段，使用默认值');\n      }\n      \n      if (response.data.data.focusAreas) {\n        focusAreas.value = response.data.data.focusAreas;\n      }\n      \n      Toast.success('分析结果加载成功');\n    } else if (response.data.code === 202) {\n      // 服务器接受了请求但还在处理中（异步分析）\n      console.log('分析正在进行中，等待时间:', response.data.data.waitTime || '未知');\n      \n      // 显示清晰的等待提示，告知用户确切的等待情况\n      Toast.loading({\n        message: `AI正在专注分析您的八字命盘，已经分析了${response.data.data.waitTime || 0}秒，完整分析需要30-60秒，请稍候...`,\n        duration: 8000,\n        position: 'middle'\n      });\n      \n      // 预先显示部分数据\n      if (response.data.data.baziChart) {\n        baziData.value = response.data.data.baziChart;\n      }\n      if (response.data.data.aiAnalysis) {\n        aiAnalysis.value = response.data.data.aiAnalysis;\n      }\n      if (response.data.data.focusAreas) {\n        focusAreas.value = response.data.data.focusAreas;\n      }\n      \n      // 创建轮询定时器引用\n      const pollInterval = ref(null);\n      const maxPollTimeout = ref(null);\n      \n      // 启动轮询，每15秒查询一次直到分析完成\n      pollInterval.value = setInterval(async () => {\n        try {\n          console.log('轮询查询分析结果...');\n          const pollResponse = await axios.get(`/api/bazi/result/${finalResultId}`);\n          \n          // 添加更详细的日志\n          console.log(`轮询响应状态码: ${pollResponse.status}, 响应code: ${pollResponse.data.code}`);\n          \n          // 首先检查是否有分析结果\n          const hasAnalysis = pollResponse.data.data && \n                              pollResponse.data.data.aiAnalysis && \n                              Object.values(pollResponse.data.data.aiAnalysis).some(v => v);\n          \n          if (pollResponse.data.code === 200 || hasAnalysis) {\n            // 分析完成，更新数据\n            console.log('分析已完成，更新数据');\n            baziData.value = pollResponse.data.data.baziChart;\n            aiAnalysis.value = pollResponse.data.data.aiAnalysis;\n            focusAreas.value = pollResponse.data.data.focusAreas;\n            Toast.success('分析结果加载成功！您的八字命盘解析已完成');\n            \n            // 清除所有定时器\n            if (pollInterval.value) {\n              clearInterval(pollInterval.value);\n              pollInterval.value = null;\n            }\n            if (maxPollTimeout.value) {\n              clearTimeout(maxPollTimeout.value);\n              maxPollTimeout.value = null;\n            }\n            \n            // 自动切换到AI分析结果标签\n            activeTab.value = 1;\n          } else if (pollResponse.data.code !== 202) {\n            // 如果返回其他错误码，停止轮询\n            console.error('轮询时发生错误:', pollResponse.data.message);\n            Toast.fail(`查询错误: ${pollResponse.data.message}`);\n            \n            // 清除所有定时器\n            if (pollInterval.value) {\n              clearInterval(pollInterval.value);\n              pollInterval.value = null;\n            }\n            if (maxPollTimeout.value) {\n              clearTimeout(maxPollTimeout.value);\n              maxPollTimeout.value = null;\n            }\n          } else {\n            // 仍在分析中，更新等待时间\n            const waitTime = pollResponse.data.data.waitTime || 0;\n            const remainingTime = Math.max(0, 60 - waitTime);  // 假设总时间为60秒\n            \n            Toast.loading({\n              message: `AI正在专注分析中(${Math.round(waitTime/60*100)}%)，预计还需${remainingTime}秒完成...`,\n              duration: 5000,\n              position: 'middle'\n            });\n            console.log('仍在分析中，已等待:', waitTime, '秒');\n          }\n        } catch (err) {\n          console.error('轮询时出错:', err);\n          // 出错也停止轮询并清除定时器\n          if (pollInterval.value) {\n            clearInterval(pollInterval.value);\n            pollInterval.value = null;\n          }\n        }\n      }, 15000); // 每15秒查询一次，减少服务器压力\n      \n      // 设置最大轮询时间，防止无限轮询\n      maxPollTimeout.value = setTimeout(() => {\n        if (pollInterval.value) {\n          clearInterval(pollInterval.value);\n          pollInterval.value = null;\n          console.log('超过最大轮询时间，停止轮询');\n          \n          // 显示一个友好的提示，询问用户是否要继续等待\n          Dialog.confirm({\n            title: '分析耗时较长',\n            message: '您的八字命理分析正在进行中，但耗时较长。您可以选择继续等待或稍后再查看结果。',\n            confirmButtonText: '继续等待',\n            cancelButtonText: '稍后查看',\n          }).then(() => {\n            // 用户选择继续等待，重新启动轮询\n            window.location.reload();\n          }).catch(() => {\n            // 用户选择稍后查看，可以先返回首页\n            router.push('/');\n          });\n        }\n      }, 180000); // 最多轮询3分钟\n    } else {\n      console.error('API返回错误:', response.data.message);\n      Toast.fail(response.data.message || '获取分析结果失败');\n    }\n  } catch (error) {\n    console.error('获取分析结果出错:', error);\n    console.error('错误详情:', error.response ? error.response.data : '无响应数据');\n    Toast.fail('获取分析结果失败，请稍后重试');\n    \n    // 备选方案：如果ID以\"RES\"开头，尝试模拟支付再获取结果\n    if (finalResultId.startsWith('RES')) {\n      try {\n        console.log('尝试使用模拟支付接口...');\n        \n        // 显示加载提示\n        Toast.loading({\n          message: '正在模拟支付并进行八字分析，请耐心等待30-60秒...',\n          duration: 20000,  // 增加等待时间\n          position: 'middle'\n        });\n        \n        // 直接使用完整的finalResultId，不要去掉RES前缀\n        const orderId = finalResultId;\n        \n        // 从URL查询参数中获取出生日期和时间\n        const urlParams = new URLSearchParams(window.location.search);\n        const birthDate = urlParams.get('birthDate') || '2023-06-06'; // 使用默认值\n        const birthTime = urlParams.get('birthTime') || '辰时 (07:00-09:00)'; // 使用默认值\n        const gender = urlParams.get('gender') || 'male'; // 使用默认值\n        // 获取原始订单ID（如果有）\n        const originalOrderId = urlParams.get('originalOrderId');\n        \n        console.log('URL参数:', { birthDate, birthTime, gender, originalOrderId });\n        \n        // 验证日期格式\n        let validBirthDate = birthDate;\n        try {\n          // 检查日期格式是否正确\n          const dateParts = birthDate.split('-');\n          if (dateParts.length === 3) {\n            const year = parseInt(dateParts[0]);\n            const month = parseInt(dateParts[1]);\n            const day = parseInt(dateParts[2]);\n            \n            // 验证年份在合理范围内\n            if (year < 1900 || year > 2100) {\n              console.warn(`出生年份 ${year} 超出推荐范围(1900-2100)，使用默认值`);\n              validBirthDate = '2000-01-01';\n            }\n          } else {\n            console.warn(`日期格式错误: ${birthDate}，使用默认值`);\n            validBirthDate = '2000-01-01';\n          }\n        } catch (e) {\n          console.error('日期验证错误:', e);\n          validBirthDate = '2000-01-01';\n        }\n        \n        console.log('模拟支付使用参数:', { birthDate: validBirthDate, birthTime, gender });\n        \n        // 准备请求数据\n        const requestData = {\n          birthDate: validBirthDate,\n          birthTime: birthTime,\n          gender: gender\n        };\n        \n        // 如果有原始订单ID，添加到请求数据中\n        if (originalOrderId) {\n          requestData.originalOrderId = originalOrderId;\n          console.log('添加原始订单ID到请求数据:', originalOrderId);\n        }\n        \n        console.log('模拟支付请求数据:', requestData);\n        \n        // 尝试最多3次请求\n        let retryCount = 0;\n        let mockPaymentResponse = null;\n        \n        // 如果有原始订单ID，优先使用它进行模拟支付\n        const paymentId = originalOrderId || orderId;\n        console.log('使用ID进行模拟支付:', paymentId);\n        \n        while (retryCount < 3) {\n          try {\n            console.log(`尝试请求模拟支付 (${retryCount + 1}/3)...`);\n            // 发送POST请求，确保设置正确的Content-Type\n            mockPaymentResponse = await axios.post(`/api/order/mock/pay/${paymentId}`, requestData, {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            });\n            \n            // 如果成功，跳出循环\n            if (mockPaymentResponse && mockPaymentResponse.data && mockPaymentResponse.data.code === 200) {\n              break;\n            }\n            \n            // 如果失败但有响应，记录错误\n            console.error('模拟支付请求失败:', mockPaymentResponse?.data);\n            \n            // 如果第一次使用原始订单ID失败，尝试使用RES前缀ID\n            if (retryCount === 0 && originalOrderId && paymentId !== orderId) {\n              console.log('使用原始订单ID失败，尝试使用RES前缀ID:', orderId);\n              mockPaymentResponse = await axios.post(`/api/order/mock/pay/${orderId}`, requestData, {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n              \n              // 如果成功，跳出循环\n              if (mockPaymentResponse && mockPaymentResponse.data && mockPaymentResponse.data.code === 200) {\n                break;\n              }\n            }\n            \n            // 等待一秒后重试\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            retryCount++;\n          } catch (retryError) {\n            console.error(`模拟支付请求出错 (尝试 ${retryCount + 1}/3):`, retryError);\n            \n            // 等待一秒后重试\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            retryCount++;\n          }\n        }\n        \n        // 检查是否成功获取响应\n        if (mockPaymentResponse && mockPaymentResponse.data && mockPaymentResponse.data.code === 200 && mockPaymentResponse.data.data && mockPaymentResponse.data.data.resultId) {\n          const newResultId = mockPaymentResponse.data.data.resultId;\n          console.log('获取到新的resultId:', newResultId);\n          \n          // 等待2秒，让服务器有时间处理结果\n          await new Promise(resolve => setTimeout(resolve, 2000));\n          \n          // 尝试最多3次获取结果\n          let resultRetryCount = 0;\n          let resultSuccess = false;\n          \n          while (resultRetryCount < 3 && !resultSuccess) {\n            try {\n              console.log(`尝试获取结果 (${resultRetryCount + 1}/3)...`);\n              const retryResponse = await axios.get(`/api/bazi/result/${newResultId}`);\n              \n              if (retryResponse.data.code === 200) {\n                baziData.value = retryResponse.data.data.baziChart;\n                aiAnalysis.value = retryResponse.data.data.aiAnalysis;\n                focusAreas.value = retryResponse.data.data.focusAreas;\n                Toast.success('分析结果加载成功');\n                resultSuccess = true;\n                break;\n              } else if (retryResponse.data.code === 202) {\n                // 结果正在处理中，等待更长时间再重试\n                console.log('结果正在处理中，等待...');\n                await new Promise(resolve => setTimeout(resolve, 3000));\n              } else {\n                console.error('获取结果失败:', retryResponse.data);\n                await new Promise(resolve => setTimeout(resolve, 1000));\n              }\n            } catch (resultError) {\n              console.error(`获取结果出错 (尝试 ${resultRetryCount + 1}/3):`, resultError);\n              await new Promise(resolve => setTimeout(resolve, 1000));\n            }\n            \n            resultRetryCount++;\n          }\n          \n          if (resultSuccess) {\n            return; // 成功获取结果，退出函数\n          }\n        }\n        \n        // 如果所有尝试都失败，显示错误提示\n        Toast.fail('无法获取分析结果，请稍后刷新页面重试');\n      } catch (mockError) {\n        console.error('模拟支付失败:', mockError);\n        Toast.fail('模拟支付失败，请稍后重试');\n      }\n    }\n  }\n});\n\nconst getElementName = (element) => {\n  if (!element) return '--';\n  \n  const elementNames = {\n    wood: '木',\n    fire: '火',\n    earth: '土',\n    metal: '金',\n    water: '水'\n  };\n  return elementNames[element] || element;\n};\n\nconst onClickLeft = () => {\n  router.push('/');\n};\n\n// 修改后的直接流下载函数，适应后端始终返回文件流\nconst downloadPDFAsStream = async () => {\n  Toast.loading({\n    message: '正在生成PDF并下载报告...',\n    duration: 0,\n    position: 'middle',\n    forbidClick: true\n  });\n  \n  if (!resultId) {\n    Toast.clear();\n    Toast.fail('缺少结果ID，无法下载报告');\n    return false;\n  }\n  \n  try {\n    console.log('直接下载报告, 结果ID:', resultId);\n    \n    // 创建下载链接，添加时间戳避免缓存问题\n    const timestamp = new Date().getTime();\n    const downloadUrl = `/api/bazi/pdf/${resultId}?t=${timestamp}`;\n    console.log('下载URL:', downloadUrl);\n    \n    // 使用fetch API获取文件流\n    const response = await fetch(downloadUrl, {\n      method: 'GET',\n      cache: 'no-cache',\n      headers: {\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache',\n        'Expires': '0'\n      }\n    });\n    \n    // 检查错误\n    if (!response.ok) {\n      let errorMsg = `下载失败: HTTP错误 ${response.status}`;\n      try {\n        const contentType = response.headers.get('content-type');\n        if (contentType && contentType.includes('application/json')) {\n          const errorData = await response.json();\n          errorMsg = errorData.message || errorMsg;\n        } else {\n          // 如果不是JSON格式的错误，尝试获取文本错误信息\n          const errorText = await response.text();\n          if (errorText) {\n            errorMsg = `下载失败: ${errorText.substring(0, 100)}`;\n          }\n        }\n      } catch (e) {\n        console.error('解析错误响应失败:', e);\n      }\n      throw new Error(errorMsg);\n    }\n    \n    // 检查内容类型\n    const contentType = response.headers.get('content-type');\n    const disposition = response.headers.get('content-disposition');\n    \n    console.log('响应内容类型:', contentType);\n    console.log('响应内容处置:', disposition);\n    \n    // 确定文件名和扩展名\n    let filename = `八字命理分析_${resultId}.pdf`;\n    if (disposition && disposition.includes('filename=')) {\n      const filenameMatch = disposition.match(/filename=[\"']?([^\"']+)[\"']?/);\n      if (filenameMatch && filenameMatch[1]) {\n        filename = filenameMatch[1];\n      }\n    }\n    \n    // 确定文件类型\n    const fileExtension = contentType && contentType.includes('html') ? 'html' : 'pdf';\n    if (!filename.endsWith(fileExtension)) {\n      filename = `八字命理分析_${resultId}.${fileExtension}`;\n    }\n    \n    // 转换为Blob对象\n    const blob = await response.blob();\n    \n    // 检查Blob大小 - 注意：当浏览器接管下载时，可能会导致blob.size为0\n    // 因此，如果有Content-Disposition头部，我们应该认为下载已经开始\n    const isDownloadStarted = disposition && disposition.includes('attachment');\n    if (blob.size === 0 && !isDownloadStarted) {\n      throw new Error('下载的文件为空');\n    }\n    \n    // 对于小文件，我们可以验证文件内容\n    // 但对于大文件或浏览器接管的下载，跳过验证\n    if (blob.size > 0 && blob.size < 1024*1024 && contentType && contentType.includes('pdf')) {\n      try {\n        // 读取文件头部以验证是否为有效的PDF\n        const fileReader = new FileReader();\n        const headerPromise = new Promise((resolve, reject) => {\n          fileReader.onloadend = (e) => resolve(e.target.result);\n          fileReader.onerror = (e) => reject(e);\n        });\n        fileReader.readAsArrayBuffer(blob.slice(0, 5));\n        \n        const header = await headerPromise;\n        const headerView = new Uint8Array(header);\n        const headerString = String.fromCharCode.apply(null, headerView);\n        \n        if (!headerString.startsWith('%PDF')) {\n          console.error('无效的PDF文件头:', headerString);\n          throw new Error('下载的不是有效的PDF文件');\n        }\n      } catch (e) {\n        console.error('验证PDF文件失败:', e);\n        // 如果是浏览器接管下载导致的验证失败，我们不抛出错误\n        if (!isDownloadStarted) {\n          throw new Error('验证PDF文件失败: ' + e.message);\n        } else {\n          console.warn('浏览器接管了下载，跳过PDF验证');\n        }\n      }\n    }\n    \n    // 如果浏览器已经接管下载（通过Content-Disposition头部），\n    // 我们不需要手动创建下载链接\n    if (!isDownloadStarted) {\n      // 创建下载链接\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      \n      // 触发下载\n      document.body.appendChild(a);\n      a.click();\n      \n      // 清理\n      setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(a);\n      }, 100);\n    }\n    \n    Toast.clear();\n    Toast.success('报告下载成功');\n    return true;\n  } catch (error) {\n    console.error('直接下载PDF出错:', error);\n    Toast.clear();\n    \n    // 检查是否是因为浏览器已经接管了下载而导致的错误\n    if (error.message && (\n        error.message.includes('下载的文件为空') || \n        error.message.includes('验证PDF文件失败')\n      )) {\n      // 如果是这类错误，可能是浏览器已经开始下载，我们不显示错误\n      console.log('可能是浏览器已经接管了下载，不显示错误');\n      Toast.success('报告下载已开始，请等待浏览器完成下载');\n      return true;\n    }\n    \n    // 显示错误信息\n    Toast.fail(error.message || '下载失败，请稍后重试');\n    return false;\n  }\n};\n\n// 修改主下载函数，添加重试逻辑\nconst downloadPDF = async () => {\n  Toast.loading({\n    message: '正在生成并下载PDF报告...',\n    duration: 5000,\n    position: 'middle'\n  });\n  \n  if (!resultId) {\n    Toast.fail('缺少结果ID，无法生成报告');\n    return;\n  }\n  \n  // 最多尝试3次下载\n  let attempts = 0;\n  let success = false;\n  \n  while (attempts < 3 && !success) {\n    attempts++;\n    \n    if (attempts > 1) {\n      console.log(`尝试第${attempts}次下载...`);\n      Toast.loading({\n        message: `尝试第${attempts}次下载...`,\n        duration: 2000\n      });\n      // 在重试之前等待一段时间\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    }\n    \n    // 使用流式下载模式，并处理返回值\n    success = await downloadPDFAsStream();\n    \n    // 如果流式下载成功，直接返回，不再尝试其他方法\n    if (success === true) {\n      return;\n    }\n  }\n  \n  // 如果多次尝试后仍然失败，提示用户\n  if (!success) {\n    Toast.clear();\n    Dialog.alert({\n      title: 'PDF下载失败',\n      message: '下载PDF报告失败，请稍后再试。如果问题持续存在，请联系客服。',\n    });\n  }\n};\n\n// 本地生成PDF的函数\nconst generatePDFLocally = async () => {\n  console.log('使用客户端jsPDF库生成PDF');\n  \n  // 获取内容元素\n  const element = document.querySelector('.result-container');\n  if (!element) {\n    throw new Error('找不到要转换的内容元素');\n  }\n  \n  Toast.loading({\n    message: '正在捕获页面内容...',\n    duration: 5000\n  });\n  \n  try {\n    // 使用html2canvas捕获内容\n    const canvas = await html2canvas(element, {\n      scale: 1,\n      useCORS: true,\n      logging: false,\n      windowWidth: document.documentElement.offsetWidth,\n      windowHeight: document.documentElement.offsetHeight,\n    });\n    \n    Toast.loading({\n      message: '正在生成PDF文件...',\n      duration: 5000\n    });\n        \n    // 创建PDF文档\n    const pdf = new jsPDF('p', 'mm', 'a4');\n        \n    // 计算尺寸和比例\n    const imgData = canvas.toDataURL('image/png');\n    const imgWidth = 210; // A4宽度，单位mm\n    const pageHeight = 297; // A4高度，单位mm\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n          \n    // 添加首页\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n    \n    // 如果内容超过一页，添加更多页\n    while (heightLeft > 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n    \n    // 添加页脚\n    const pageCount = pdf.internal.getNumberOfPages();\n    for (let i = 1; i <= pageCount; i++) {\n      pdf.setPage(i);\n      pdf.setFontSize(10);\n      pdf.setTextColor(150);\n      pdf.text(`八字命理AI分析报告 - 页 ${i} / ${pageCount}`, pdf.internal.pageSize.getWidth() / 2, pdf.internal.pageSize.getHeight() - 10, { align: 'center' });\n    }\n    \n    // 保存PDF\n    pdf.save(`八字命理分析_${resultId}.pdf`);\n    \n    return true;\n  } catch (error) {\n    console.error('本地PDF生成错误:', error);\n    throw error;\n  }\n};\n\nconst shareResult = () => {\n  Toast.success('分享功能开发中');\n};\n\n// 处理本地PDF生成\nconst handleLocalPDFGeneration = async () => {\n  try {\n    Toast.loading({\n      message: '正在本地生成PDF...',\n      duration: 0,\n      forbidClick: true\n    });\n    \n    await generatePDFLocally();\n    \n    Toast.clear();\n    Toast.success('本地PDF生成成功');\n  } catch (error) {\n    console.error('本地PDF生成失败:', error);\n    Toast.clear();\n    Toast.fail('本地PDF生成失败: ' + (error.message || '未知错误'));\n  }\n};\n\nconst reloadBaziData = async () => {\n  Toast.loading('正在重新加载数据...');\n  \n  try {\n    // 测试模拟支付接口以获取分析结果\n    if (!resultId) {\n      Toast.fail('缺少结果ID');\n      return;\n    }\n    \n    // 首先尝试使用模拟支付接口\n    try {\n      console.log('尝试使用模拟支付接口...');\n      \n      // 显示加载提示\n      Toast.loading({\n        message: '正在重新分析八字，请耐心等待30-60秒...',\n        duration: 10000,\n        position: 'middle'\n      });\n      \n      // 直接使用完整的resultId，不要去掉RES前缀\n      const mockPaymentResponse = await axios.post(`/api/order/mock/pay/${resultId}`, {\n        birthDate: urlParams.get('birthDate') || '2023-06-06',\n        birthTime: urlParams.get('birthTime') || '辰时 (07:00-09:00)',\n        gender: urlParams.get('gender') || 'male'\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('模拟支付响应:', mockPaymentResponse.data);\n      \n      if (mockPaymentResponse.data.code === 200 && mockPaymentResponse.data.data.resultId) {\n        // 使用返回的resultId重新加载数据\n        const newResultId = mockPaymentResponse.data.data.resultId;\n        console.log('获取到新的resultId:', newResultId);\n        \n        const response = await axios.get(`/api/bazi/result/${newResultId}`);\n        if (response.data.code === 200) {\n          baziData.value = response.data.data.baziChart;\n          aiAnalysis.value = response.data.data.aiAnalysis;\n          focusAreas.value = response.data.data.focusAreas;\n          Toast.success('数据加载成功');\n          return;\n        }\n      }\n    } catch (mockError) {\n      console.warn('模拟支付失败，尝试直接获取结果:', mockError);\n    }\n    \n    // 如果模拟支付失败，尝试直接获取结果\n    const response = await axios.get(`/api/bazi/result/${resultId}`);\n    \n    if (response.data.code === 200) {\n      baziData.value = response.data.data.baziChart;\n      aiAnalysis.value = response.data.data.aiAnalysis;\n      focusAreas.value = response.data.data.focusAreas;\n      Toast.success('数据加载成功');\n    } else {\n      Toast.fail(response.data.message || '加载失败');\n    }\n  } catch (error) {\n    console.error('重新加载失败:', error);\n    Toast.fail('加载失败: ' + (error.message || '未知错误'));\n  }\n};\n\n// 追问相关状态\nconst followupOptions = ref([\n  { id: 'marriage', name: '婚姻感情', selected: false, paid: false },\n  { id: 'career', name: '事业财运', selected: false, paid: false },\n  { id: 'children', name: '子女情况', selected: false, paid: false },\n  { id: 'parents', name: '父母情况', selected: false, paid: false },\n  { id: 'health', name: '身体健康', selected: false, paid: false },\n  { id: 'education', name: '学业', selected: false, paid: false },\n  { id: 'relationship', name: '人际关系', selected: false, paid: false },\n  { id: 'fiveYears', name: '近五年运势', selected: false, paid: false }\n]);\n\nconst currentFollowup = ref(null);\nconst showFollowupDialog = ref(false);\nconst followupAnalysis = ref({});\nconst isLoadingFollowup = ref(false);\n\n// 选择追问选项\nconst selectFollowupOption = (option) => {\n  // 如果已经支付过，直接显示结果\n  if (option.paid) {\n    // 显示已支付的分析结果\n    currentFollowup.value = option;\n    return;\n  }\n  \n  // 否则设置当前选择的追问选项\n  currentFollowup.value = option;\n  showFollowupDialog.value = true;\n};\n\n// 支付追问费用\nconst payForFollowup = async () => {\n  if (!currentFollowup.value) return;\n  \n  try {\n    isLoadingFollowup.value = true;\n    Toast.loading({\n      message: '处理中...',\n      forbidClick: true,\n      duration: 0\n    });\n    \n    // 创建追问订单\n    const orderResponse = await axios.post('/api/order/create/followup', {\n      resultId: finalResultId.value,\n      area: currentFollowup.value.id\n    });\n    \n    if (orderResponse.data.code === 200) {\n      const followupOrderId = orderResponse.data.data.orderId;\n      console.log('追问订单创建成功:', followupOrderId);\n      \n      // 模拟支付\n      const paymentResponse = await axios.post(`/api/order/mock/pay/${followupOrderId}`, {\n        birthDate: baziData.value?.birthDate || urlParams.get('birthDate'),\n        birthTime: baziData.value?.birthTime || urlParams.get('birthTime'),\n        gender: baziData.value?.gender || urlParams.get('gender'),\n        area: currentFollowup.value.id,\n        resultId: finalResultId.value\n      });\n      \n      if (paymentResponse.data.code === 200) {\n        console.log('追问支付成功:', paymentResponse.data);\n        \n        // 获取追问分析结果\n        await getFollowupAnalysis(currentFollowup.value.id);\n        \n        // 标记为已支付\n        const index = followupOptions.value.findIndex(o => o.id === currentFollowup.value.id);\n        if (index !== -1) {\n          followupOptions.value[index].paid = true;\n        }\n        \n        showFollowupDialog.value = false;\n        Toast.success('分析完成');\n      } else {\n        Toast.fail('支付失败');\n      }\n    } else {\n      Toast.fail('创建订单失败');\n    }\n  } catch (error) {\n    console.error('追问支付过程出错:', error);\n    Toast.fail('处理失败，请重试');\n  } finally {\n    isLoadingFollowup.value = false;\n    Toast.clear();\n  }\n};\n\n// 获取追问分析结果\nconst getFollowupAnalysis = async (area) => {\n  try {\n    const response = await axios.get(`/api/bazi/followup/${finalResultId.value}/${area}`);\n    \n    if (response.data.code === 200) {\n      console.log('获取追问分析成功:', response.data);\n      followupAnalysis.value[area] = response.data.data.analysis;\n      return response.data.data.analysis;\n    } else {\n      console.error('获取追问分析失败:', response.data);\n      return null;\n    }\n  } catch (error) {\n    console.error('获取追问分析出错:', error);\n    return null;\n  }\n};\n\n// 检查是否有已支付的追问\nconst checkPaidFollowups = async () => {\n  try {\n    const response = await axios.get(`/api/bazi/followup/list/${finalResultId.value}`);\n    \n    if (response.data.code === 200 && response.data.data.followups) {\n      const paidFollowups = response.data.data.followups;\n      \n      // 更新已支付的追问选项\n      followupOptions.value = followupOptions.value.map(option => {\n        const isPaid = paidFollowups.some(f => f.area === option.id);\n        if (isPaid) {\n          // 如果已支付，获取分析结果\n          getFollowupAnalysis(option.id);\n        }\n        return { ...option, paid: isPaid };\n      });\n    }\n  } catch (error) {\n    console.error('检查已支付追问出错:', error);\n  }\n};\n\n// 在获取结果成功后检查已支付的追问\nconst originalGetBaziResult = getBaziResult;\nconst getBaziResult = async () => {\n  const result = await originalGetBaziResult();\n  if (result) {\n    await checkPaidFollowups();\n  }\n  return result;\n};\n</script>\n\n<style scoped>\n.result-container {\n  padding-bottom: 20px;\n}\n\n.result-header {\n  text-align: center;\n  padding: 20px 0;\n  background-color: #f2f3f5;\n}\n\n.result-header h2 {\n  margin: 0;\n  font-size: 20px;\n  color: #323233;\n}\n\n.result-header p {\n  margin: 10px 0 0;\n  font-size: 14px;\n  color: #969799;\n}\n\n.bazi-chart {\n  padding: 20px 16px;\n}\n\n.bazi-chart h3 {\n  margin: 20px 0 10px;\n  color: #323233;\n}\n\n.pillar {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.stem {\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  background-color: #1989fa;\n  color: white;\n  border-radius: 4px;\n  margin-bottom: 5px;\n}\n\n.branch {\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  background-color: #07c160;\n  color: white;\n  border-radius: 4px;\n  margin-bottom: 5px;\n}\n\n.label {\n  font-size: 12px;\n  color: #646566;\n}\n\n.five-elements {\n  display: flex;\n  justify-content: space-between;\n  margin: 10px 0;\n}\n\n.element {\n  text-align: center;\n  flex: 1;\n}\n\n.element-name {\n  font-size: 14px;\n  color: #323233;\n}\n\n.element-value {\n  font-size: 18px;\n  font-weight: bold;\n  color: #1989fa;\n  margin-top: 5px;\n}\n\n.flowing-years {\n  margin: 20px 0;\n}\n\n.ai-analysis {\n  padding: 20px 16px;\n}\n\n.analysis-section {\n  margin-bottom: 20px;\n}\n\n.analysis-section h3 {\n  margin: 0 0 10px;\n  color: #323233;\n}\n\n.analysis-section p {\n  margin: 0;\n  font-size: 14px;\n  color: #646566;\n  line-height: 1.6;\n}\n\n.action-buttons {\n  padding: 20px 16px;\n}\n\n.age-notice {\n  margin-bottom: 20px;\n}\n\n.shen-sha-info {\n  margin-bottom: 20px;\n}\n\n.da-yun-info {\n  margin-bottom: 20px;\n}\n\n.qi-yun-info {\n  margin: 0 0 10px;\n  font-size: 14px;\n  color: #646566;\n}\n\n.da-yun-table {\n  margin-top: 10px;\n}\n\n.placeholder {\n  background-color: #f2f3f5;\n  color: #969799;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
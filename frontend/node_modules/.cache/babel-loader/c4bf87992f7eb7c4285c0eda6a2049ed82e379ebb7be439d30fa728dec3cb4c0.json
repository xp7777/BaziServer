{"ast":null,"code":"import { withDirectives as _withDirectives, mergeProps as _mergeProps, resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, computed, nextTick, onBeforeUnmount, defineComponent, getCurrentInstance } from \"vue\";\nimport { isDef, addUnit, inBrowser, truthProp, numericProp, makeStringProp, createNamespace } from \"../utils\";\nimport { Icon } from \"../icon\";\nconst [name, bem] = createNamespace(\"image\");\nconst imageProps = {\n  src: String,\n  alt: String,\n  fit: String,\n  position: String,\n  round: Boolean,\n  width: numericProp,\n  height: numericProp,\n  radius: numericProp,\n  lazyLoad: Boolean,\n  iconSize: numericProp,\n  showError: truthProp,\n  errorIcon: makeStringProp(\"photo-fail\"),\n  iconPrefix: String,\n  showLoading: truthProp,\n  loadingIcon: makeStringProp(\"photo\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: imageProps,\n  emits: [\"load\", \"error\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const error = ref(false);\n    const loading = ref(true);\n    const imageRef = ref();\n    const {\n      $Lazyload\n    } = getCurrentInstance().proxy;\n    const style = computed(() => {\n      const style2 = {\n        width: addUnit(props.width),\n        height: addUnit(props.height)\n      };\n      if (isDef(props.radius)) {\n        style2.overflow = \"hidden\";\n        style2.borderRadius = addUnit(props.radius);\n      }\n      return style2;\n    });\n    watch(() => props.src, () => {\n      error.value = false;\n      loading.value = true;\n    });\n    const onLoad = event => {\n      loading.value = false;\n      emit(\"load\", event);\n    };\n    const onError = event => {\n      error.value = true;\n      loading.value = false;\n      emit(\"error\", event);\n    };\n    const renderIcon = (name2, className, slot) => {\n      if (slot) {\n        return slot();\n      }\n      return _createVNode(Icon, {\n        \"name\": name2,\n        \"size\": props.iconSize,\n        \"class\": className,\n        \"classPrefix\": props.iconPrefix\n      }, null);\n    };\n    const renderPlaceholder = () => {\n      if (loading.value && props.showLoading) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"loading\")\n        }, [renderIcon(props.loadingIcon, bem(\"loading-icon\"), slots.loading)]);\n      }\n      if (error.value && props.showError) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"error\")\n        }, [renderIcon(props.errorIcon, bem(\"error-icon\"), slots.error)]);\n      }\n    };\n    const renderImage = () => {\n      if (error.value || !props.src) {\n        return;\n      }\n      const attrs = {\n        alt: props.alt,\n        class: bem(\"img\"),\n        style: {\n          objectFit: props.fit,\n          objectPosition: props.position\n        }\n      };\n      if (props.lazyLoad) {\n        return _withDirectives(_createVNode(\"img\", _mergeProps({\n          \"ref\": imageRef\n        }, attrs), null), [[_resolveDirective(\"lazy\"), props.src]]);\n      }\n      return _createVNode(\"img\", _mergeProps({\n        \"src\": props.src,\n        \"onLoad\": onLoad,\n        \"onError\": onError\n      }, attrs), null);\n    };\n    const onLazyLoaded = ({\n      el\n    }) => {\n      const check = () => {\n        if (el === imageRef.value && loading.value) {\n          onLoad();\n        }\n      };\n      if (imageRef.value) {\n        check();\n      } else {\n        nextTick(check);\n      }\n    };\n    const onLazyLoadError = ({\n      el\n    }) => {\n      if (el === imageRef.value && !error.value) {\n        onError();\n      }\n    };\n    if ($Lazyload && inBrowser) {\n      $Lazyload.$on(\"loaded\", onLazyLoaded);\n      $Lazyload.$on(\"error\", onLazyLoadError);\n      onBeforeUnmount(() => {\n        $Lazyload.$off(\"loaded\", onLazyLoaded);\n        $Lazyload.$off(\"error\", onLazyLoadError);\n      });\n    }\n    return () => {\n      var _a;\n      return _createVNode(\"div\", {\n        \"class\": bem({\n          round: props.round\n        }),\n        \"style\": style.value\n      }, [renderImage(), renderPlaceholder(), (_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport { stdin_default as default };","map":{"version":3,"names":["withDirectives","_withDirectives","mergeProps","_mergeProps","resolveDirective","_resolveDirective","createVNode","_createVNode","ref","watch","computed","nextTick","onBeforeUnmount","defineComponent","getCurrentInstance","isDef","addUnit","inBrowser","truthProp","numericProp","makeStringProp","createNamespace","Icon","name","bem","imageProps","src","String","alt","fit","position","round","Boolean","width","height","radius","lazyLoad","iconSize","showError","errorIcon","iconPrefix","showLoading","loadingIcon","stdin_default","props","emits","setup","emit","slots","error","loading","imageRef","$Lazyload","proxy","style","style2","overflow","borderRadius","value","onLoad","event","onError","renderIcon","name2","className","slot","renderPlaceholder","renderImage","attrs","class","objectFit","objectPosition","onLazyLoaded","el","check","onLazyLoadError","$on","$off","_a","default","call"],"sources":["C:/Users/Administrator/Desktop/开发八字命理AI指导功能页码/frontend/node_modules/vant/es/image/Image.js"],"sourcesContent":["import { withDirectives as _withDirectives, mergeProps as _mergeProps, resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, computed, nextTick, onBeforeUnmount, defineComponent, getCurrentInstance } from \"vue\";\nimport { isDef, addUnit, inBrowser, truthProp, numericProp, makeStringProp, createNamespace } from \"../utils\";\nimport { Icon } from \"../icon\";\nconst [name, bem] = createNamespace(\"image\");\nconst imageProps = {\n  src: String,\n  alt: String,\n  fit: String,\n  position: String,\n  round: Boolean,\n  width: numericProp,\n  height: numericProp,\n  radius: numericProp,\n  lazyLoad: Boolean,\n  iconSize: numericProp,\n  showError: truthProp,\n  errorIcon: makeStringProp(\"photo-fail\"),\n  iconPrefix: String,\n  showLoading: truthProp,\n  loadingIcon: makeStringProp(\"photo\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: imageProps,\n  emits: [\"load\", \"error\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const error = ref(false);\n    const loading = ref(true);\n    const imageRef = ref();\n    const {\n      $Lazyload\n    } = getCurrentInstance().proxy;\n    const style = computed(() => {\n      const style2 = {\n        width: addUnit(props.width),\n        height: addUnit(props.height)\n      };\n      if (isDef(props.radius)) {\n        style2.overflow = \"hidden\";\n        style2.borderRadius = addUnit(props.radius);\n      }\n      return style2;\n    });\n    watch(() => props.src, () => {\n      error.value = false;\n      loading.value = true;\n    });\n    const onLoad = (event) => {\n      loading.value = false;\n      emit(\"load\", event);\n    };\n    const onError = (event) => {\n      error.value = true;\n      loading.value = false;\n      emit(\"error\", event);\n    };\n    const renderIcon = (name2, className, slot) => {\n      if (slot) {\n        return slot();\n      }\n      return _createVNode(Icon, {\n        \"name\": name2,\n        \"size\": props.iconSize,\n        \"class\": className,\n        \"classPrefix\": props.iconPrefix\n      }, null);\n    };\n    const renderPlaceholder = () => {\n      if (loading.value && props.showLoading) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"loading\")\n        }, [renderIcon(props.loadingIcon, bem(\"loading-icon\"), slots.loading)]);\n      }\n      if (error.value && props.showError) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"error\")\n        }, [renderIcon(props.errorIcon, bem(\"error-icon\"), slots.error)]);\n      }\n    };\n    const renderImage = () => {\n      if (error.value || !props.src) {\n        return;\n      }\n      const attrs = {\n        alt: props.alt,\n        class: bem(\"img\"),\n        style: {\n          objectFit: props.fit,\n          objectPosition: props.position\n        }\n      };\n      if (props.lazyLoad) {\n        return _withDirectives(_createVNode(\"img\", _mergeProps({\n          \"ref\": imageRef\n        }, attrs), null), [[_resolveDirective(\"lazy\"), props.src]]);\n      }\n      return _createVNode(\"img\", _mergeProps({\n        \"src\": props.src,\n        \"onLoad\": onLoad,\n        \"onError\": onError\n      }, attrs), null);\n    };\n    const onLazyLoaded = ({\n      el\n    }) => {\n      const check = () => {\n        if (el === imageRef.value && loading.value) {\n          onLoad();\n        }\n      };\n      if (imageRef.value) {\n        check();\n      } else {\n        nextTick(check);\n      }\n    };\n    const onLazyLoadError = ({\n      el\n    }) => {\n      if (el === imageRef.value && !error.value) {\n        onError();\n      }\n    };\n    if ($Lazyload && inBrowser) {\n      $Lazyload.$on(\"loaded\", onLazyLoaded);\n      $Lazyload.$on(\"error\", onLazyLoadError);\n      onBeforeUnmount(() => {\n        $Lazyload.$off(\"loaded\", onLazyLoaded);\n        $Lazyload.$off(\"error\", onLazyLoadError);\n      });\n    }\n    return () => {\n      var _a;\n      return _createVNode(\"div\", {\n        \"class\": bem({\n          round: props.round\n        }),\n        \"style\": style.value\n      }, [renderImage(), renderPlaceholder(), (_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
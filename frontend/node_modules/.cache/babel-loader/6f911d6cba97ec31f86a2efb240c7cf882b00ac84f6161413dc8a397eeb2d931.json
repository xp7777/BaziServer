{"ast":null,"code":"import { createNamespace, isFunction } from \"../utils\";\nconst [name, bem, t] = createNamespace(\"uploader\");\nconst toArray = item => Array.isArray(item) ? item : [item];\nfunction readFileContent(file, resultType) {\n  return new Promise(resolve => {\n    if (resultType === \"file\") {\n      resolve();\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = event => {\n      resolve(event.target.result);\n    };\n    if (resultType === \"dataUrl\") {\n      reader.readAsDataURL(file);\n    } else if (resultType === \"text\") {\n      reader.readAsText(file);\n    }\n  });\n}\nfunction isOversize(items, maxSize) {\n  return toArray(items).some(item => {\n    if (item.file) {\n      if (isFunction(maxSize)) {\n        return maxSize(item.file);\n      }\n      return item.file.size > maxSize;\n    }\n    return false;\n  });\n}\nfunction filterFiles(items, maxSize) {\n  const valid = [];\n  const invalid = [];\n  items.forEach(item => {\n    if (isOversize(item, maxSize)) {\n      invalid.push(item);\n    } else {\n      valid.push(item);\n    }\n  });\n  return {\n    valid,\n    invalid\n  };\n}\nconst IMAGE_REGEXP = /\\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;\nconst isImageUrl = url => IMAGE_REGEXP.test(url);\nfunction isImageFile(item) {\n  if (item.isImage) {\n    return true;\n  }\n  if (item.file && item.file.type) {\n    return item.file.type.indexOf(\"image\") === 0;\n  }\n  if (item.url) {\n    return isImageUrl(item.url);\n  }\n  if (typeof item.content === \"string\") {\n    return item.content.indexOf(\"data:image\") === 0;\n  }\n  return false;\n}\nexport { bem, filterFiles, isImageFile, isImageUrl, isOversize, name, readFileContent, t, toArray };","map":{"version":3,"names":["createNamespace","isFunction","name","bem","t","toArray","item","Array","isArray","readFileContent","file","resultType","Promise","resolve","reader","FileReader","onload","event","target","result","readAsDataURL","readAsText","isOversize","items","maxSize","some","size","filterFiles","valid","invalid","forEach","push","IMAGE_REGEXP","isImageUrl","url","test","isImageFile","isImage","type","indexOf","content"],"sources":["D:/Python/20250522开发八字命理AI指导功能页码/开发八字命理AI指导功能页码/frontend/node_modules/vant/es/uploader/utils.js"],"sourcesContent":["import { createNamespace, isFunction } from \"../utils\";\nconst [name, bem, t] = createNamespace(\"uploader\");\nconst toArray = (item) => Array.isArray(item) ? item : [item];\nfunction readFileContent(file, resultType) {\n  return new Promise((resolve) => {\n    if (resultType === \"file\") {\n      resolve();\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      resolve(event.target.result);\n    };\n    if (resultType === \"dataUrl\") {\n      reader.readAsDataURL(file);\n    } else if (resultType === \"text\") {\n      reader.readAsText(file);\n    }\n  });\n}\nfunction isOversize(items, maxSize) {\n  return toArray(items).some((item) => {\n    if (item.file) {\n      if (isFunction(maxSize)) {\n        return maxSize(item.file);\n      }\n      return item.file.size > maxSize;\n    }\n    return false;\n  });\n}\nfunction filterFiles(items, maxSize) {\n  const valid = [];\n  const invalid = [];\n  items.forEach((item) => {\n    if (isOversize(item, maxSize)) {\n      invalid.push(item);\n    } else {\n      valid.push(item);\n    }\n  });\n  return { valid, invalid };\n}\nconst IMAGE_REGEXP = /\\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;\nconst isImageUrl = (url) => IMAGE_REGEXP.test(url);\nfunction isImageFile(item) {\n  if (item.isImage) {\n    return true;\n  }\n  if (item.file && item.file.type) {\n    return item.file.type.indexOf(\"image\") === 0;\n  }\n  if (item.url) {\n    return isImageUrl(item.url);\n  }\n  if (typeof item.content === \"string\") {\n    return item.content.indexOf(\"data:image\") === 0;\n  }\n  return false;\n}\nexport {\n  bem,\n  filterFiles,\n  isImageFile,\n  isImageUrl,\n  isOversize,\n  name,\n  readFileContent,\n  t,\n  toArray\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
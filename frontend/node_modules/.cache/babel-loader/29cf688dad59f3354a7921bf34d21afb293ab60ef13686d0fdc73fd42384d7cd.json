{"ast":null,"code":"import { watch, onBeforeUnmount, onDeactivated } from \"vue\";\nimport { getScrollParent, onMountedOrActivated } from \"@vant/use\";\nimport { useTouch } from \"./use-touch\";\nimport { preventDefault } from \"../utils\";\nlet totalLockCount = 0;\nconst BODY_LOCK_CLASS = \"van-overflow-hidden\";\nfunction useLockScroll(rootRef, shouldLock) {\n  const touch = useTouch();\n  const onTouchMove = event => {\n    touch.move(event);\n    const direction = touch.deltaY.value > 0 ? \"10\" : \"01\";\n    const el = getScrollParent(event.target, rootRef.value);\n    const {\n      scrollHeight,\n      offsetHeight,\n      scrollTop\n    } = el;\n    let status = \"11\";\n    if (scrollTop === 0) {\n      status = offsetHeight >= scrollHeight ? \"00\" : \"01\";\n    } else if (scrollTop + offsetHeight >= scrollHeight) {\n      status = \"10\";\n    }\n    if (status !== \"11\" && touch.isVertical() && !(parseInt(status, 2) & parseInt(direction, 2))) {\n      preventDefault(event, true);\n    }\n  };\n  const lock = () => {\n    document.addEventListener(\"touchstart\", touch.start);\n    document.addEventListener(\"touchmove\", onTouchMove, {\n      passive: false\n    });\n    if (!totalLockCount) {\n      document.body.classList.add(BODY_LOCK_CLASS);\n    }\n    totalLockCount++;\n  };\n  const unlock = () => {\n    if (totalLockCount) {\n      document.removeEventListener(\"touchstart\", touch.start);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      totalLockCount--;\n      if (!totalLockCount) {\n        document.body.classList.remove(BODY_LOCK_CLASS);\n      }\n    }\n  };\n  const init = () => shouldLock() && lock();\n  const destroy = () => shouldLock() && unlock();\n  onMountedOrActivated(init);\n  onDeactivated(destroy);\n  onBeforeUnmount(destroy);\n  watch(shouldLock, value => {\n    value ? lock() : unlock();\n  });\n}\nexport { useLockScroll };","map":{"version":3,"names":["watch","onBeforeUnmount","onDeactivated","getScrollParent","onMountedOrActivated","useTouch","preventDefault","totalLockCount","BODY_LOCK_CLASS","useLockScroll","rootRef","shouldLock","touch","onTouchMove","event","move","direction","deltaY","value","el","target","scrollHeight","offsetHeight","scrollTop","status","isVertical","parseInt","lock","document","addEventListener","start","passive","body","classList","add","unlock","removeEventListener","remove","init","destroy"],"sources":["D:/Python/20250522开发八字命理AI指导功能页码/开发八字命理AI指导功能页码/frontend/node_modules/vant/es/composables/use-lock-scroll.js"],"sourcesContent":["import { watch, onBeforeUnmount, onDeactivated } from \"vue\";\nimport { getScrollParent, onMountedOrActivated } from \"@vant/use\";\nimport { useTouch } from \"./use-touch\";\nimport { preventDefault } from \"../utils\";\nlet totalLockCount = 0;\nconst BODY_LOCK_CLASS = \"van-overflow-hidden\";\nfunction useLockScroll(rootRef, shouldLock) {\n  const touch = useTouch();\n  const onTouchMove = (event) => {\n    touch.move(event);\n    const direction = touch.deltaY.value > 0 ? \"10\" : \"01\";\n    const el = getScrollParent(event.target, rootRef.value);\n    const { scrollHeight, offsetHeight, scrollTop } = el;\n    let status = \"11\";\n    if (scrollTop === 0) {\n      status = offsetHeight >= scrollHeight ? \"00\" : \"01\";\n    } else if (scrollTop + offsetHeight >= scrollHeight) {\n      status = \"10\";\n    }\n    if (status !== \"11\" && touch.isVertical() && !(parseInt(status, 2) & parseInt(direction, 2))) {\n      preventDefault(event, true);\n    }\n  };\n  const lock = () => {\n    document.addEventListener(\"touchstart\", touch.start);\n    document.addEventListener(\"touchmove\", onTouchMove, { passive: false });\n    if (!totalLockCount) {\n      document.body.classList.add(BODY_LOCK_CLASS);\n    }\n    totalLockCount++;\n  };\n  const unlock = () => {\n    if (totalLockCount) {\n      document.removeEventListener(\"touchstart\", touch.start);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      totalLockCount--;\n      if (!totalLockCount) {\n        document.body.classList.remove(BODY_LOCK_CLASS);\n      }\n    }\n  };\n  const init = () => shouldLock() && lock();\n  const destroy = () => shouldLock() && unlock();\n  onMountedOrActivated(init);\n  onDeactivated(destroy);\n  onBeforeUnmount(destroy);\n  watch(shouldLock, (value) => {\n    value ? lock() : unlock();\n  });\n}\nexport {\n  useLockScroll\n};\n"],"mappings":"AAAA,SAASA,KAAK,EAAEC,eAAe,EAAEC,aAAa,QAAQ,KAAK;AAC3D,SAASC,eAAe,EAAEC,oBAAoB,QAAQ,WAAW;AACjE,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,cAAc,QAAQ,UAAU;AACzC,IAAIC,cAAc,GAAG,CAAC;AACtB,MAAMC,eAAe,GAAG,qBAAqB;AAC7C,SAASC,aAAaA,CAACC,OAAO,EAAEC,UAAU,EAAE;EAC1C,MAAMC,KAAK,GAAGP,QAAQ,CAAC,CAAC;EACxB,MAAMQ,WAAW,GAAIC,KAAK,IAAK;IAC7BF,KAAK,CAACG,IAAI,CAACD,KAAK,CAAC;IACjB,MAAME,SAAS,GAAGJ,KAAK,CAACK,MAAM,CAACC,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI;IACtD,MAAMC,EAAE,GAAGhB,eAAe,CAACW,KAAK,CAACM,MAAM,EAAEV,OAAO,CAACQ,KAAK,CAAC;IACvD,MAAM;MAAEG,YAAY;MAAEC,YAAY;MAAEC;IAAU,CAAC,GAAGJ,EAAE;IACpD,IAAIK,MAAM,GAAG,IAAI;IACjB,IAAID,SAAS,KAAK,CAAC,EAAE;MACnBC,MAAM,GAAGF,YAAY,IAAID,YAAY,GAAG,IAAI,GAAG,IAAI;IACrD,CAAC,MAAM,IAAIE,SAAS,GAAGD,YAAY,IAAID,YAAY,EAAE;MACnDG,MAAM,GAAG,IAAI;IACf;IACA,IAAIA,MAAM,KAAK,IAAI,IAAIZ,KAAK,CAACa,UAAU,CAAC,CAAC,IAAI,EAAEC,QAAQ,CAACF,MAAM,EAAE,CAAC,CAAC,GAAGE,QAAQ,CAACV,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE;MAC5FV,cAAc,CAACQ,KAAK,EAAE,IAAI,CAAC;IAC7B;EACF,CAAC;EACD,MAAMa,IAAI,GAAGA,CAAA,KAAM;IACjBC,QAAQ,CAACC,gBAAgB,CAAC,YAAY,EAAEjB,KAAK,CAACkB,KAAK,CAAC;IACpDF,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEhB,WAAW,EAAE;MAAEkB,OAAO,EAAE;IAAM,CAAC,CAAC;IACvE,IAAI,CAACxB,cAAc,EAAE;MACnBqB,QAAQ,CAACI,IAAI,CAACC,SAAS,CAACC,GAAG,CAAC1B,eAAe,CAAC;IAC9C;IACAD,cAAc,EAAE;EAClB,CAAC;EACD,MAAM4B,MAAM,GAAGA,CAAA,KAAM;IACnB,IAAI5B,cAAc,EAAE;MAClBqB,QAAQ,CAACQ,mBAAmB,CAAC,YAAY,EAAExB,KAAK,CAACkB,KAAK,CAAC;MACvDF,QAAQ,CAACQ,mBAAmB,CAAC,WAAW,EAAEvB,WAAW,CAAC;MACtDN,cAAc,EAAE;MAChB,IAAI,CAACA,cAAc,EAAE;QACnBqB,QAAQ,CAACI,IAAI,CAACC,SAAS,CAACI,MAAM,CAAC7B,eAAe,CAAC;MACjD;IACF;EACF,CAAC;EACD,MAAM8B,IAAI,GAAGA,CAAA,KAAM3B,UAAU,CAAC,CAAC,IAAIgB,IAAI,CAAC,CAAC;EACzC,MAAMY,OAAO,GAAGA,CAAA,KAAM5B,UAAU,CAAC,CAAC,IAAIwB,MAAM,CAAC,CAAC;EAC9C/B,oBAAoB,CAACkC,IAAI,CAAC;EAC1BpC,aAAa,CAACqC,OAAO,CAAC;EACtBtC,eAAe,CAACsC,OAAO,CAAC;EACxBvC,KAAK,CAACW,UAAU,EAAGO,KAAK,IAAK;IAC3BA,KAAK,GAAGS,IAAI,CAAC,CAAC,GAAGQ,MAAM,CAAC,CAAC;EAC3B,CAAC,CAAC;AACJ;AACA,SACE1B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}